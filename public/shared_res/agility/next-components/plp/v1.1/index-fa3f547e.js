const e=768,t="WEB_COMPONENT_POPIN_OPEN",i="WEB_COMPONENT_POPIN_CLOSE",s="WEB_COMPONENT_POPIN_CLOSED",n="WEB_COMPONENT_SLIDER_READY",r="WEB_COMPONENT_SORT_BY_CHANGE";class a extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const t=e||this.attributes;let i;try{i=[...t].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});const e=[...t].find((e=>"data"===e.nodeName));return null==e?i:{...i,...JSON.parse(e.nodeValue)}}catch(e){console.log("ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const t=(e,i)=>{const s=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),n=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var r=Array.prototype.slice.call(i.childNodes),a=Array.prototype.slice.call(e.childNodes),o=r.length-a.length;if(o>0)for(;o>0;o--)r[r.length-o].parentNode.removeChild(r[r.length-o]);a.forEach((function(e,a){if(r[a])if(s(e)===s(r[a])){var o=n(e);if(o&&o!==n(r[a])&&(r[a].textContent=o),r[a].childNodes.length>0&&e.childNodes.length<1)r[a].innerHTML="";else{if(r[a].childNodes.length<1&&e.childNodes.length>0){var l=document.createDocumentFragment();return t(e,l),void r[a].appendChild(l)}e.childNodes.length>0&&t(e,r[a])}}else r[a].parentNode.replaceChild(e.cloneNode(!0),r[a]);else i.appendChild(e.cloneNode(!0))}))},i=(s=this.template,(new DOMParser).parseFromString(s,"text/html").body);var s;t(i,this)}loadTemplate(e="",t=!1){this.template=""===e?this.template:`${e}`,this.render(t)}disconnectedCallback(){this.onDestroy?.()}}function o(e){const t=document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body.childNodes}function l(e,t,i,s,n){const r=(t,i)=>{e.setAttribute(t,i);const r=()=>e.classList.add("lazy-loaded");if(s){const t=new Image;return t.src=s,t.onload=r,void(t.onerror=()=>{n&&n(`Image ${s} cannot be loaded.`),e.classList.add("lazy-loaded-error")})}r()};if(/Trident\/|MSIE/.test(window.navigator.userAgent)||(a=window.navigator.userAgent,o=a.indexOf("OS "),(a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1)&&o>-1&&window.Number(a.substr(o+3,3).replace("_","."))<14))r(t,i);else if("IntersectionObserver"in window){e.classList.add("lazy-load");let s=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&(r(t,i),s.unobserve(e.target))}))}));s.observe(e)}else r(t,i);var a,o}function c(e,t,i,s){let n=0;for(;e;){const r=e.indexOf(i,n);if(-1===r)break;const a=e.indexOf(s,r+1);if(-1===a)break;const o=e.substring(r+i.length,a);null!=t[o]?(e=e.substr(0,r)+t[o]+e.substr(a+s.length),n=r):n=a}return e}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",a);const d=e=>u(JSON.stringify(e)),u=e=>e?e.toString().replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"",h={get is(){const{innerWidth:e,devicePixelRatio:t}=window;return{mobile:e<768,mobile_tablet:e<1024,tablet:e>=768&&e<1024,desktop:e>=1024&&t<=1,retina:e>=1024&&t>1}},lt:e=>window.innerWidth<e},p="plp",b=e=>"pdp"===e,_=e=>{const{url:t,name:i="",name_custom:s=""}=e;if(!i)return"";const n=""!==s?s:i,r=[],a=(({variation:e})=>b(e)?"h1":"h3")(e);return r.push(`<${a} class="cb-heading">`),t&&b(e.variation)?r.push((({url:e,a11y_product_card:t="",name:i="",name_custom:s=""})=>{const n=t.replace("{productName}",i);return`<a href="${e}" target="_self" title="${n}" aria-label="${n}">${""!==s?s:i}</a>`})(e)):r.push(`${n}`),r.push(`</${a}>`),r.join("")},m=({headline:e="",is_headline_hidden:t=!1})=>t&&h.is.mobile||!e?"":`<p class="cb-text">${e}</p>`,g=({label_technology:e})=>e?`<p class="cb-technology t-xs-700">${e}</p>`:"",f=({label_range:e})=>e?`<p class="cb-range t-xs-500">${e}</p>`:"";function v(e){return e.sales_multiple=e.sales_multiple||e.salesMultiple,!(e.sales_multiple>1&&1===e.unitQuantity)&&(1===e.sales_multiple&&e.unitQuantity>1)}const y=async e=>{const t=await(async()=>await window.napi.priceFormat())(),i=window[window.config.padl.namespace].dataLayer.app.app.currency;return t.html?t.html(i,e):t.short(i,e)||""},k=e=>e.querySelector(".cb-price-old"),w=({strikethrough_price:e},t)=>{return e?((i=e,y(i)).then((e=>{const i=k(t);i&&(i.innerHTML=e)})).catch((e=>{console.error(`Error: Component SKU - Strike Through Price  - ${e}`);const i=k(t);i&&(i.style.display="none")})),'<p class="cb-price-old"></p>'):"";var i},E=({price:e,hidePrice:t,giftcard_price:i})=>!e&&!i||t?"":`<p class="cb-price-current"><span>${e||i}</span></p>`;class C extends a{constructor(){super(),this.type="default",this.boundOnPDPLinkClick=this.onPDPLinkClick.bind(this)}loadTemplate(){this.classList.add("nb-sku"),this.classList.add(`nb-sku__${this.type}`),(({variation:e,type:t},i)=>{"pdp"!==e?"capsule"===t&&h.is.mobile?i.setAttribute("landscape","true"):i.setAttribute("portrait","true"):i.setAttribute("pdp","true")})(this.props,this),this.template=`${this.renderVisual()}\n                          ${this.renderHeader()}\n                          <div class="cb-content">\n                              ${this.renderInformation()}\n                              <div class="cb-shop">\n                                  <div class="cb-price">\n                                      ${this.renderPricing()}\n                                  </div>\n                                  ${this.renderAction()}\n                              </div>\n                              ${this.renderFooter()}\n                          </div>`,this.render()}onReady(){const{sku:e,category_name:t,position:i=0}=this.props;this.setAttribute("data-product-item-id",e),this.setAttribute("data-product-section",t),this.setAttribute("data-product-position",i.toString()),this.activateLazyLoad(),this.bindEvent()}activateLazyLoad(){const{image:e}=this.props;if(!e)return"";(({image:e=""},t)=>{const i=".cb-image img",s=t.querySelector(i),n=e=>{console.log(e),console.error(`Error: Component SKU - Lazy Load - ${e}`),s&&(s.style.display="none")};if(!s)return n(`${i} HTMLElement not found.`),"";const r=e+((e="product",t=150)=>{const i=[];return e&&i.push(`impolicy=${e}`),t&&i.push(`imwidth=${t}`),`?${i.join("&")}`})();if(!r)return n(`${r} source file is empty.`),"";l(s,"src",`${r}`,r,n)})(this.props,this)}renderHeaderDefault(){return`${(({labels:e=[]},t=null)=>{if(!t||!e||!e.length)return"";t&&e.length&&t.classList.add("has-labels");const i=h.is.mobile?"row":"column";return`<nb-card-labels data="${d({labels:e})}" direction="${i}"></nb-card-labels>`})(this.props,this)}${((e,t)=>{const{fair_trade:i,alt_fair_trade:s,is_organic:n,alt_organic:r,only_vertuo_next:a,alt_vertuo_next:o,is_rainforest:l,alt_rainforest:c,is_sustainable:u,alt_sustainable:h,is_q_certified_arabica:p,alt_q_certification_arabica:b,logos:_}=e;return i||n||a||l||u||p||!(null==_||_.length<1)?(t.classList.add("has-logos"),`<nb-card-logos data='${d({fair_trade:i,alt_fair_trade:s,is_organic:n,alt_organic:r,only_vertuo_next:a,alt_vertuo_next:o,is_rainforest:l,alt_rainforest:c,is_sustainable:u,alt_sustainable:h,is_q_certified_arabica:p,alt_q_certification_arabica:b,logos:_})}'></nb-card-logos>`):""})(this.props,this)}`}renderHeader(){return this.renderHeaderDefault()}renderVisualDefault(){return(({url:e,image_alt_text:t,image:i})=>{if(!i)return"";let s=`<img src="" alt="${t||"loading"}"/>`;return e&&(s=`<a href="${e}" target="_self" aria-hidden="true" tabindex="-1">${s}</a>`),`<div class="cb-image">\n                ${s}\n            </div>`})(this.props)}renderVisual(){return this.renderVisualDefault()}renderInformationDefault(){return`${g(this.props)}\n        ${f(this.props)}\n        ${_(this.props)}\n        ${m(this.props)}`}renderInformation(){return this.renderInformationDefault()}renderPricingDefault(){return`${w(this.props,this)}\n                ${E(this.props)}`}renderPricing(){return this.renderPricingDefault()}renderActionDefault(){return(e=>{const{category_name:t="",sku:i,longSku:s="",position:n,variation:r=p,hidePrice:a,url:o,view_details_label:l="View details",rendererName:c=""}=e;let d="large";return r===p&&(d=h.is.mobile?"small":"large"),"small"===r&&(d="small"),a?`<nb-cta link="${o}" variation="primary">${l}</nb-cta>`:`\n        <nb-add-to-cart\n            sku="${i}"\n            longSku="${s}"\n            buttonSize="${d}"\n            showPrice\n            range='${t}'\n            position='${n}'\n            rendererName='${c}'\n        ></nb-add-to-cart>\n    `})(this.props)}renderAction(){return this.renderActionDefault()}renderFooterDefault(){return(({additional_message_icon:e,additional_message:t,additional_message_link:i})=>{if(!t&&!i)return"";let s="";if(t){let i="";e&&(i=`<nb-icon icon="${e}" class="additionalMsgIcon"></nb-icon>`),s=`<p class="cb-warn t-sm-500-sl">\n            ${i}\n            ${t}</p>`}return i&&i.link&&i.label&&(s+=`<nb-link\n            link='${i.link}'\n            color="${i.color}"\n            size="${i.size}"\n            seo_label="${i.seo_label}">\n            ${i.label}\n        </nb-link>`),s})(this.props)}renderFooter(){return this.renderFooterDefault()}async onPDPLinkClick(){window.napi&&window.napi.data&&window.napi.data().product().setProductClickData(await window.productHelper.getPadlProductDetail(await window.napi.catalog().getProduct(this.props.longSku)))}bindEvent(){this.linkElements=[],this.unbindEvent(),this.linkElements=this.querySelectorAll("a[href]"),this.linkElements.length&&Array.from(this.linkElements).forEach((e=>{e.addEventListener("click",this.boundOnPDPLinkClick)}))}unbindEvent(){this.linkElements.length&&(Array.from(this.linkElements).forEach((e=>{e.removeEventListener("click",this.boundOnPDPLinkClick)})),this.linkElements=[])}disconnectedCallback(){this.unbindEvent()}}customElements.get("nb-sku")||customElements.define("nb-sku",C);const L=({eventName:e,args:t,element:i})=>{let s;i=i||window,t?s=new CustomEvent(e,{detail:t,bubbles:!0}):"function"==typeof Event?s=new Event(e):(s=document.createEvent("Event"),s.initEvent(e,!0,!0)),i.dispatchEvent(s)},$=e=>{if(e.detail)return e.detail};let S,P="";const O=e=>{if(null!=document.getElementById("bundle-popin-id"))return;let t=document.createElement("nb-popin");t=e.appendChild(t),t.setAttribute("id","bundle-popin-id"),t.setAttribute("content","")},A=e=>{const{label_decaffeinato:t}=e;return new RegExp(t,"ig")},T=e=>{const{name:t}=e;if(((e,t)=>{const{label_decaffeinato:i}=e;return i&&""!==i&&A(e).test(t)})(e,t)){const{label_decaffeinato:i}=e,s=h.is.mobile?"t-xs-700-caps":"t-sm-700-caps";e.name_custom=t.replace(A(e),`<span class='${s}'>${i}</span>`).trim()}return _(e)};customElements.get("nb-sku-coffee")||customElements.define("nb-sku-coffee",class extends C{constructor(){super(),this.type="coffee",this.boundHandleBundleOpen=this.handleBundleOpen.bind(this)}onReady(){this.bundlePopinLink=this.querySelector(".cb-cta-bundle"),super.onReady()}renderInformation(){return`${g(this.props)}\n                ${f(this.props)}\n                ${T(this.props)}\n                ${m(this.props)}\n                ${(({technologies:e,intensity:t,a11y_intensity_max:i,intensity_label:s=""})=>{const n=(({technologies:e})=>e.indexOf("original")?14:12)({technologies:e});return 0===t?"":`<nb-intensity\n        class="t-xs-500-sl"\n        intensity="${t}"\n        max_intensity="${n}"\n        a11y_intensity_max="${i}"\n        intensity_label="${s}">\n    </nb-intensity>`})(this.props)}\n                ${(({type:e,bundle_details:t,bundled:i,sku:s,position:n,range:r},a)=>"capsule"===e&&t&&t.popin_link_text&&!0===i?(P=`<nb-bundle-details\n                main_sku='${s}'\n                description='${t.description}'\n                other_skus='${t.other_skus}'\n                other_skus_quantity= '${t.other_skus_quantity}'\n                range='${r}'\n                position='${n}'>\n            </nb-bundle-details>`,a.variation="white",S=t.popin_label_close,`<nb-link class="cb-cta-bundle" size="large" color="gold" label="${t.popin_link_text}"></nb-link>`):"")(this.props,this)}\n                ${(({packaging:e})=>{if(!e)return"";const{show_packaging:t,packaging_list:i,a11y_packaging_label:s}=e;return t&&i&&i.length?`<div class="cb-sku-tab">\n        <span class="sr-only">${s}</span>\n        ${i.map((({label:e,url:t,selected:i})=>t&&!i?`<a href="${t}" target="_self"><span class="t-sm-400-caps">${e}</span></a>`:`<div aria-current="page"><span class="t-sm-700-caps">${e}</span></div>`)).join("")}\n    </div>`:""})(this.props)}`}renderPricingDefault(){return`${w(this.props,this)}\n                ${E(this.props)}`}renderPricing(){return`${this.renderPricingDefault()}\n                ${(({packaging:e})=>{if(!e)return"";const{show_packaging:t,packaging_list:i}=e;return t&&i&&i.length?`<p class="cb-price-items cb-pack-format">${i.find((e=>!0===e.selected)).pack_format}</p>`:""})(this.props)}\n                ${(e=>{const{show_sleeve:t=!1}=e;if(!t)return"";const{label_capsules:i,sleeve_syntax:s}=e,n=(({number_of_sleeves:e,label_sleeves:t,label_sleeve:i})=>e>1&&t?t:i)(e),r=e.number_of_capsules?e.number_of_capsules:(({bundled:e,sales_multiple:t,unit_quantity:i,unitQuantity:s})=>!1===e?t:i||s||0)(e),a=e.number_of_sleeves?e.number_of_sleeves:function(e){function t(e,t){return e%t==0}return"original"===function(e){const t=e.technologies[0];return t.substring(t.indexOf("/machineTechno/")+"/machineTechno/".length)}(e)?1===e.sales_multiple?t(e.unitQuantity,10)?e.unitQuantity/10:NaN:t(e.sales_multiple,10)?e.sales_multiple/10:NaN:1===e.sales_multiple?t(e.unitQuantity,10)&&1!==e.unitQuantity?e.unitQuantity/10:t(e.unitQuantity,7)&&1!==e.unitQuantity?e.unitQuantity/7:NaN:t(e.sales_multiple,10)?e.sales_multiple/10:t(e.sales_multiple,7)?e.sales_multiple/7:NaN}(e),o=c(s,{numberOfSleeves:a,sleeveLabel:n,quantity:r,label_capsules:i},"{","}");return o?`<p class="cb-price-items cb-show-sleeve">${o}</p>`:""})(this.props)}\n                ${(e=>{const{show_capsule_price:t=!1,capsule_price_label:i,capsule_price_syntax:s="{capsule_price_label}: {price_per_capsule}",price_per_capsule:n}=e;if(!t||!i)return"";const r=c(s,{capsule_price_label:i,price_per_capsule:n},"{","}");return r&&n?`<p class="cb-price-items cb-price-capsule">${r}</p>`:""})(this.props)}`}handleBundleOpen(){var e;O(e=this),e.bundlePopIn=document.getElementById("bundle-popin-id"),e.appendChild(e.bundlePopIn),((e,t)=>{for(let i in t)e.setAttribute(i,t[i])})(e.bundlePopIn,{variation:"before",bgcolor:"white",size:"L",padding:"false",label_close:S,content:P}),e.bundlePopIn.classList.add("nb-popin--bundle"),L({eventName:t,args:{id:"bundle-popin-id"}})}bindEvent(){super.bindEvent(),this.bundlePopinLink&&this.bundlePopinLink.addEventListener("click",this.boundHandleBundleOpen)}unbindEvent(){super.unbindEvent(),this.bundlePopinLink&&this.bundlePopinLink.removeEventListener("click",this.boundHandleBundleOpen)}});const x=e=>{const t=(e=>e.find((e=>"data"===e.nodeName)))([...e]),i=[...e].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(N(t))return i;try{return{...i,...JSON.parse(t.nodeValue)}}catch(e){console.log("ERROR: No data",e)}},N=e=>null==e;class I{constructor(){this._bus=document.createElement("div")}register(e,t){this._bus.addEventListener(e,t)}remove(e,t){this._bus.removeEventListener(e,t)}fire(e,t={}){this._bus.dispatchEvent(new CustomEvent(e,{detail:t}))}}if(!M)var M=new I;var B=M;window.gtmDataObject=window.gtmDataObject||[];const D=e=>{window.gtmDataObject.push({event:"customEvent",eventRaisedBy:"Web component",eventCategory:"User Engagement",eventAction:"Click",eventLabel:"",nonInteraction:0,...e})},F=e=>{window.gtmDataObject.push({event:"impression",eventRaisedBy:"Web component",eventAction:"Promo Impression - On Scroll",ecommerce:{},...e})},H=e=>{window.gtmDataObject.push({event:"promoClick",eventRaisedBy:"Web component",ecommerce:{},...e})},q=()=>window[window?.padlNamespace]?.dataLayer,z=()=>{const e=q();return e?e.app.app.market.toLocaleLowerCase():"ch"},R=()=>q()?q().page.page.pageInfo.language.toLocaleLowerCase():"en";class j extends HTMLElement{constructor(){super(),this.props={},this.market=z(),this.language=R()}static get observedAttributes(){return["slot","quantity"]}connectedCallback(){this.props=x(this.attributes),this.boundHandleClick=this.handleClick.bind(this),this.slot=this.innerHTML.replace(/\n*$/,"").trim(),this.render()}render(){const{variation:e,contrast:t,transparent:i="false",size:s="48",icon_right:n="",icon_left:r="",label:a,seo_label:o="",aria_label_before:l,aria_label_after:c,link_new_tab:d=!1,label_update:u,add_to_cart:h=""}=this.props;let{link:p}=this.props;const b=this.slot?this.slot:a,_=document.createElement(p?"a":"button");p&&(p=p.replace("{market}",this.market),p=p.replace("{lang}",this.language),_.setAttribute("href",p)),p&&d&&_.setAttribute("target","_blank"),o&&p&&_.setAttribute("title",o),l&&_.setAttribute("aria-label",l+" "+b),c&&_.setAttribute("aria-label",b+" "+c),l&&c&&_.setAttribute("aria-label",l+" "+b+" "+c),"navigation"!==e&&_.classList.add("button--cta"),_.classList.add(`button--${e}`),t&&("true"===i?_.classList.add(`button--${t}--transparent`):_.classList.add(`button--${t}`)),s&&_.classList.add(`size--${s}`),"primary"!==e&&"tertiary"!==e||""===h||(this.setAttribute("quantity","0"),"small"===h?_.classList.add("addToCart--small"):_.classList.add("addToCart--large")),r&&this.setAttribute("icon_left",r),n&&this.setAttribute("icon_right",n),_.innerHTML=`\n                ${r&&`<nb-icon icon='${r}'></nb-icon>`}\n                <span>${b}</span>\n                ${"primary"===e&&""!==h&&""!==u?`<span class="update">${u}</span>`:""}\n                ${n&&`<nb-icon icon='${n}'></nb-icon>`}\n        `,this.innerHTML=_.outerHTML,this.removeListeners(),this.addListeners()}handleClick(){this.track();const{event_id:e="",popin_id:t="",qs_id:i=""}=this.props;e&&B.fire(e,{}),t&&this.popin(t),i&&this.openQuantitySelector(i)}popin(e){L({eventName:t,args:{id:e}})}openQuantitySelector(e){L({eventName:"WEB_COMPONENT_QS_OPEN",args:{id:e}})}track(){this.props.campaign_id&&this.handlePromoClick(),this.props.tracking_label&&this.handleCustomEvent()}handlePromoClick(){const{campaign_id:e="",campaign_name:t="",campaign_position:i="",campaign_creative:s=""}=this.props;""!==e&&H({ecommerce:{promoClick:{promotions:[{id:e,name:t,position:i,creative:s}]}}})}handleCustomEvent(){const{tracking_label:e=""}=this.props;""!==e&&D({eventAction:"Click CTA",eventLabel:e})}attributeChangedCallback(e){"slot"===e&&this.render(),"quantity"===e&&(this.classList.add("updated"),setTimeout((()=>{this.classList.remove("updated")}),1200))}addListeners(){this.addEventListener("click",this.boundHandleClick)}removeListeners(){this.removeEventListener("click",this.boundHandleClick)}disconnectedCallback(){this.removeListeners()}}customElements.get("nb-cta")||customElements.define("nb-cta",j);class V extends HTMLElement{constructor(){super(),this.slot=this.innerHTML,this.boundHandleClick=this.handleClick.bind(this),this.market=z(),this.language=R()}connectedCallback(){this.props=x(this.attributes),this.render(),this.setClassHelper(),this.bindEvents()}render(){const{size:e="large",color:t="gold",link:i="",icon_right:s="",icon_left:n="",image:r="",image_alt:a=""}=this.props;e&&this.setAttribute("size",e),t&&this.setAttribute("color",t),r&&this.setAttribute("image",r),a&&this.setAttribute("image_alt",a),n&&this.setAttribute("icon_left",n),s&&this.setAttribute("icon_right",s),""===i?this.renderButton():this.renderLink(),this.link=this.firstElementChild}renderLink(){const{label:e,seo_label:t="",tracking_label:i="",link_new_tab:s="false",a11y_label_new_tab:n="",icon_right:r="",image:a="",image_alt:o="",icon_left:l="",selected:c="",phantom:d=""}=this.props;let{link:u}=this.props;const h=this.slot?this.slot:e;u&&(u=u.replace("{market}",this.market),u=u.replace("{lang}",this.language)),this.innerHTML=`\n        <a\n            href="${u}"\n            ${"true"===s?'target="_blank"':""}\n            ${"true"===s&&""!==n?`aria-description='${n}'`:""}\n            ${i&&`tracking_label='${i}'`}\n            ${t?`title="${t}"`:""}\n            ${"true"===c?'aria-selected="true"':""}\n            ${"true"===d?`phantom="${h}"`:""}\n        >\n            ${l&&`<nb-icon icon='${l}'></nb-icon>`}\n            ${a&&`<img src='${a}' alt='${o}'/>`}\n            <span>${h}</span>\n            ${r&&`<nb-icon icon='${r}'></nb-icon>`}\n        </a>`}renderButton(){const{label:e,tracking_label:t="",icon_right:i="",icon_left:s="",selected:n="",image:r="",image_alt:a="",phantom:o=""}=this.props,l=this.slot?this.slot:e;this.innerHTML=`\n        <button\n            ${t&&`tracking_label='${t}'`}\n            ${"true"===n?'aria-selected="true"':""}\n            ${"true"===o?`phantom="${l}"`:""}\n        >\n            ${r&&`<img src='${r}' alt='${a}'/>`}\n            ${s&&`<nb-icon icon='${s}'></nb-icon>`}\n            <span>${l}</span>\n            ${i&&`<nb-icon icon='${i}'></nb-icon>`}\n        </button>`}setClassHelper(){const{size:e="large",cta_link_type:t="false"}=this.props;let i="";switch(e){case"xsmall":i="t-2xs-500";break;case"small":i="t-xs-500-sl";break;case"medium":i="t-sm-400-sl";break;default:i="t-xs-700-caps-sl"}"true"===t&&(i="t-sm-700-caps-sl",this.setAttribute("underline","false")),this.querySelector("a, button").classList.add(i)}handleClick(){this.track();const{popin_id:e=""}=this.props;e&&this.popin(e)}popin(e){L({eventName:t,args:{id:e}})}track(){this.props.campaign_id&&this.handlePromoClick(),this.props.custom_tracking&&this.handleCustomEvent()}handlePromoClick(){const{campaign_id:e="",campaign_name:t="",campaign_position:i="",campaign_creative:s=""}=this.props;""!==e&&H({ecommerce:{promoClick:{promotions:[{id:e,name:t,position:i,creative:s}]}}})}handleCustomEvent(){const{tracking_label:e=""}=this.props;""!==e&&D({eventAction:"Click",eventLabel:e})}bindEvents(){this.unbindEvents(),this.link.addEventListener("click",this.boundHandleClick)}unbindEvents(){this.link.removeEventListener("click",this.boundHandleClick)}disconnectedCallback(){this.unbindEvents()}}customElements.get("nb-link")||customElements.define("nb-link",V);class W{constructor(e,t){this.observer=new IntersectionObserver((e=>this.onChange(e)),{threshold:[0],rootMargin:"0% 0%"}),this.el=e,this.data=t,this.el instanceof Element&&this.observer.observe(this.el)}onChange(e){e.forEach((e=>{e.isIntersecting&&(this.track(e),this.observer.unobserve(e.target))}))}track(){window.requestIdleCallback((()=>this.runTrack()))}runTrack(){this.data.id&&null!==this.data.id&&""!==this.data.id&&F({ecommerce:{promoView:{promotions:[this.data]}}})}}function G(e,t){const i=new Q(e,t);return{destroy:()=>{i.getIom().hasIntersectionObserver()||i.destroy()}}}class Q extends W{constructor(e,t){super(e),this.data=t}runTrack(){this.data.id&&null!==this.data.id&&""!==this.data.id&&F({ecommerce:{promoView:{promotions:[this.data]}}})}}class U extends HTMLElement{constructor(){super(),this.slot=this.innerHTML}connectedCallback(){this.props=[...this.attributes].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{}),this.render(),this.initTracking(),this.initLazyLoad()}initTracking(){const{campaign_id:e=null,campaign_name:t=null,campaign_position:i=null,campaign_creative:s=null}=this.props;G(this,{id:e,name:t,position:i,creative:s})}initLazyLoad(){const e=this.querySelector(".cb-bg-img");if(!e)return;const t=this.getBgImgUrl();t&&l(e,"style",`background-image: url(${t}); ${e.getAttribute("style")||""}`,t)}getBgImgUrl(){const{background_mobile:e="",background_tablet:t="",background_desktop:i="",background_retina:s=""}=this.props;return h.is.mobile&&e?e:h.is.tablet&&t?t:h.is.retina&&s?s:i}render(){const{styles:e="",contrast:t,background_color:i="",classname:s="",element_class:n="",slot:r}=this.props;let a="light";"undefined"===t?this.setAttribute("contrast",a):a=t,this.innerHTML=`\n            <section\n                class="${s}"\n                contrast="${a}"\n                style="${e}"\n            >\n                ${i||this.hasBgImage()?this.renderBg():""}\n                <div class="cb-inner ${n}">\n                    ${r}\n                </div>\n            </section>`}hasBgImage(){const{background_mobile:e,background_desktop:t,background_retina:i}=this.props;return!!e||!!t||!!i}renderBg(){const{background_color:e=""}=this.props;return`<div class="cb-bg-color ${e?`${e}`:""}">\n        </div>${this.hasBgImage()?'<div class="cb-bg-img"></div>':""}`}}customElements.get("nb-container")||customElements.define("nb-container",U);const K=["notes-almonds","notes-balanced","notes-bergamot","notes-berry","notes-biscuity","notes-blueberry","notes-cardamom","notes-cereal","notes-citrus","notes-cocoa","notes-default","notes-flowery","notes-fruity","notes-hazelnut","notes-herbal","notes-honey","notes-leather","notes-malted","notes-roasted","notes-spicy","notes-sugar","notes-winey","notes-wood","notes-brand-coffee-roasted","notes-brand-coffee-caramel","notes-brand-coffee-intense-roasted"],Y=["upvote","19-bar","24-7-service","360-view","accessories-and-sweets","address-2","address","amex-card","android","apple-pay-card","apple-pay","apple","arrow-bottom","arrow-filled-down","arrow-left","arrow-right","arrow-top","assistance-alt","assistance-videos","assistance","boutique","brand_coffee_capsule-vl-carafe","brand_coffee_capsule-vl-double-espresso-gran-lungo","brand_coffee_capsule-vl-espresso","brand_coffee_capsule-vl-mug","brand_coffee_capsule_ol","brand_coffee_capsule_pro","brand_coffee_capsule_vl","brand_coffee_cereals","brand_coffee_citrus","brand_coffee_cocoa","brand_coffee_coffee-assortment","brand_coffee_coffee-discovery-set","brand_coffee_machines","brand_coffee_malted","brand_coffee_notes-herbal","brand_delivery_boutique-location","brand_delivery_delivery","brand_delivery_free_delivery","brand_delivery_package","brand_delivery_schedule_delivery","brand_general_coffee","brand_machines_auto_clean_system","brand_machines_automatic_off","brand_machines_digital_display","brand_machines_energy_class","brand_machines_fast_heat_up","brand_machines_low_water_alert","brand_machines_milk_frothing","brand_machines_pump_pressure_bar","brand_payment_credit_card","brand_payment_gift_card","brand_payment_invoice","brand_payment_secure","brand_services_assistance","brand_services_boutique","brand_services_easy_order","brand_services_help","brand_services_promotions","brand_services_recycling","brand_services_recycling_ol","brand_services_recycling_vl","brand_services_subscription","brand_services_sustainability","calendar","capsule-cupSize-Cappuccino-And-Latte-Macchiato","capsule-cupSize-Cortado-Cappuccino","capsule-cupSize-icedRecipe-vertuo","capsule-cupSize-icedRecipe","capsule-cupSize-alto","capsule-cupSize-carafe-vertuo","capsule-cupSize-coffee","capsule-cupSize-double-espresso-vertuo","capsule-cupSize-espresso-vertuo","capsule-cupSize-espresso","capsule-cupSize-gran-lungo","capsule-cupSize-lungo","capsule-cupSize-mug","capsule-cupSize-ristretto","capsule-cupSize-americano","capsule-cupSize-large-americano","check","chevron-down","chevron-left","chevron-right","chevron-up","check-mark","clock","close-2","close","coffee","coffee_capsule-ol_24","credit-card-flag","credit-card","delivery-fast","delivery-scheduled","delivery-standard","eco-mode","edit","error","espresso-vertuo-capsule","eye-closed","eye-opened","facebook","filter","find-us-alt","find-us","free-return","gift-card","globe","gran-lungo-vertuo-capsule","help","hero-chat","huawei","information-24","information","instagram","invoice","language","linkedin","link","live-chat","loading-nitro","loading","loan","logout","machine_machines_ol_24","machines-2","machines","mail","mastercard-card","mastercard","menu","minus-16","minus-24","minus-o","modal-alert","modal-check","more-info","nespresso-logo","nespresso-monogram","nespresso-professional-2","nespresso-professional","nespresso","notification","orders","original","package-box","payment-bcorp","payment-bvr","payment-google-pay","payment-ideal","payment-klarna","payment-lsv","payment-postfinance","payment-twint","paypal-card","paypal","phone","pin","pinterest","play-button","play-mini","play","plus-16","plus-24","plus-o","promotions","recycling-point","recycling","remove","search","secure","set-up","shopping-bag","signal-high","signal-low","signal-med","speed","star","rating","subscription-2","subscription","sustainability","tag","twitter","ui_payment_cash","ui_coffee_bergamot","ui_coffee_capsule-ol","ui_coffee_capsule-vl-carafe","ui_coffee_capsule-vl-double-espresso_gran-lungo","ui_coffee_capsule-vl-espresso","ui_coffee_capsule-vl-mug","ui_coffee_capsule-vl","ui_coffee_capsule_professional","ui_coffee_cardamom","ui_coffee_cocoa","ui_coffee_hazelnut","ui_coffee_honey","ui_coffee_notes-cereal","ui_coffee_notes-malted","ui_coffee_winey","ui_delivery_calendar","ui_delivery_clock","ui_general_alerts","ui_general_arrow-right","ui_general_check","ui_general_chevron-bottom","ui_general_chevron-left","ui_general_chevron-right","ui_general_chevron-top","ui_general_credit-card","ui_general_edit","ui_general_error","ui_general_eye-close","ui_general_eye-open","ui_general_faq","ui_general_filter","ui_general_gift-card","ui_general_globe","ui_general_information","ui_general_language","ui_general_link","ui_general_loading","ui_general_log-out","ui_general_map_view","ui_general_menu","ui_general_minus","ui_general_notification","ui_general_order","ui_general_play","ui_general_plus","ui_general_promotions","ui_general_remove","ui_general_search","ui_general_secure","ui_general_shopping-bag","ui_general_tag","ui_general_user-account","ui_general_warranty","ui_general_wifi","ui_general_x","ui_map_directions","ui_payment_invoice","ui_services_assistance","ui_services_delivery","ui_services_easy_order","ui_services_find-us","ui_services_free-return","ui_services_mail","ui_services_phone","ui_services_subscription","ui_sustainability_climate","ui_sustainability_recycling","ui_sustainability_recycling_ol","ui_sustainability_recycling_vl","ui_sustainability_social_sustainability","ui_user_member_status","ui_user_my-address","ui_user_my_information","ultra-compact","user-account","versatil-coffee-system","video-play","vertuo","visa-card","visa","warranty","youtube","services-anticipation-of-maintenance","services-assistance","services-avant-premiere","services-avant-premiere-ol","services-avant-premiere-vl","services-coffee-assortment","services-coffee-coffee-sample","services-coffee-discovery-set","services-coffee-experiences","services-contact-chat","services-contact-community-forum","services-contact-mobile","services-contact-sms","services-contact-video-assistance","services-contact-virtual","services-data-insight","services-delivery-boutique-location","services-delivery-boutique-pick-up","services-delivery-delivery","services-delivery-delivery-bike","services-delivery-delivery-fast","services-delivery-free-delivery","services-delivery-next-day-delivery","services-delivery-package","services-delivery-pick-up-points","services-delivery-schedule-delivery","services-easy-maintenance","services-easy-order","services-easy-stock-management","services-generic","services-gifting-card","services-help","services-orders","services-payments-credit-card","services-payments-gift-card","services-payments-invoice","services-phone","services-reorder","services-satisfied-or-reimbursed","services-services-boutique","services-subscription","services-vip-masterclass","services-voice-enabled","payments-cash","delivery-same-day-delivery","contact-voice-assistant-chatbot","contact-video-chat","contact-mobile-push-notification","contact-chat-bot","coffee-coffee-tasting","contact-video-assistance","filter-style_step-01","filter-style_step-02","filter-style_step-03","filter-style_step-04"].concat(K).concat(["machine_technology_machine-ol","machine_technology_machine-vl","machine_details_deluxe-version","machine_details_machine-tutorial-ol","machine_details_machine-tutorial-vl","machine_warranty_warranty-ol","machine_warranty_warranty-vl","machine_features_generic","machine_features_auto-clean-system","machine_features_automatic-off","machine_features_blend-specific-brewing","machine_features_bluetooth","machine_features_capsule-ejection-ol","machine_features_capsule-ejection-vl","machine_features_centrifusion","machine_features_cold-foam-ol","machine_features_cold-foam-vl","machine_features_descale-alert","machine_features_descale","machine_features_digital-display","machine_features_dimensions","machine_features_eco-mode","machine_features_energy-class","machine_features_fast-heat-up","machine_features_hot-foam-ol","machine_features_hot-foam-vl","machine_features_hot-milk","machine_features_hot-foam","machine_features_hot-water","machine_features_low-water-alert","machine_features_manual-lever","machine_features_milk-frothing","machine_features_mobile-push-notification","machine_features_one-touch","machine_features_power-off","machine_features_pump-pressure-bar","machine_features_rinse","machine_features_settings","machine_features_steam","machine_features_temperature-settings-invert","machine_features_temperature-settings","machine_features_temperature","machine_features_ultra-compact","machine_features_water-tank","machine_features_weight"]),J=window.memoPromiseCache?window.memoPromiseCache:{};class X{constructor(e){this.getPromise=e,this.request=this.request.bind(this)}request({uniqueKey:e,url:t}){if(!e)return Promise.reject(new Error("Unique key not passed"));if(!J[e]){const i=this.getPromise(t);J[e]=i.then((e=>e.text())).catch((t=>{throw delete J[e],t}))}return J[e]}}class Z extends HTMLElement{constructor(){super(),this.props={},this.path="",this.source=""}connectedCallback(){this.props=x(this.attributes),this.classList.add("lazy-load"),this.classList.add("nb-svg"),this.beforeRender(),this.render()}beforeRender(){}render(){if(""===this.source)return void console.error(`Error: Component SVG - render - 'source' property is not set:${this.source}`);this.innerHTML="<svg></svg>",this.afterHtmlRender();const e=this;!function(e,t){if(/Trident\/|MSIE/.test(window.navigator.userAgent)||(i=window.navigator.userAgent,s=i.indexOf("OS "),(i.indexOf("iPhone")>-1||i.indexOf("iPad")>-1)&&s>-1&&window.Number(i.substr(s+3,3).replace("_","."))<14))t();else if("IntersectionObserver"in window){let i=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&(t(),i.unobserve(e.target))}))}),{above:[0],rootMargin:"150% 0px"});i.observe(e)}var i,s}(e,(()=>{e.fetchSVG(this.source,`${this.path}${this.source}.svg`)}))}afterHtmlRender(){}request(e){return fetch(e)}async fetchSVG(e,t){const i=this.firstElementChild,s=new X(this.request),{request:n}=s;let r=await n({uniqueKey:e,url:t});let a=(new DOMParser).parseFromString(r,"image/svg+xml").getElementsByTagName("svg");if(!a.length)return console.error(`Error: Component SVG - fetchSVG - SVG not found ${a}`),this.classList.remove("lazy-load"),void this.classList.add("lazy-loaded-error");this.classList.remove("lazy-load"),this.classList.add("lazy-loaded"),a=a[0];const o=a.attributes,l=o.length;for(let e=0;e<l;++e)if(o[e].specified)if("class"===o[e].name){const t=o[e].value.replace(/\s+/g," ").trim().split(" "),s=t.length;for(let e=0;e<s;++e)i.classList.add(t[e])}else i.setAttribute(o[e].name,o[e].value);for(;a.childNodes.length;)i.appendChild(a.childNodes[0])}}customElements.get("nb-svg")||customElements.define("nb-svg",Z);customElements.get("nb-icon")||customElements.define("nb-icon",class extends Z{beforeRender(){const{icon:e}=this.props;-1!==Y.indexOf(e)?(this.classList.add("nb-icon"),this.path="/shared_res/agility/next-components/assets/icons/",this.source=e):console.error(`Error: Component Icon - beforeRender - 'icon' is not part of the authorized list - Icon name:${e}`)}afterHtmlRender(){this.setAttribute("aria-hidden","true")}});class ee extends HTMLElement{constructor(){super(),this.slot=this.innerHTML,this.checkbox=null}static get observedAttributes(){return["disabled","checked"]}connectedCallback(){this.props=x(this.attributes),this.render()}render(){const{content:e,icon:t="",color:i="",background_image:s="",filter_label_AA:n="filter",rounded:r="true",checked:a="false",disabled:o="false"}=this.props,l=this.slot?this.slot:e;const c="true"===a?"checked":"",d="true"===o?"disabled":"";this.innerHTML=`\n            <input type='checkbox' name='options' aria-label="${l+" "+n}" ${c} ${d}>\n            <label style=''>\n                ${t&&`<nb-icon icon='${t}'></nb-icon>\n                `}\n                ${i&&`<div class='chip-color' style='background:${i}'></div>\n                `}\n                ${s&&`<div class='chip-image ${"true"===r?"rounded":""}' style='background-image:url("${s}")'></div>\n                `}\n                <span aria-hidden="true" phantom="${l}">${l}</span>\n            </label>\n        `,this.querySelector("label").addEventListener("click",(e=>{e.preventDefault(),this.querySelector("input").click()})),this.checkbox=this.getElementsByTagName("input")[0]}attributeChangedCallback(e,t,i){this.checkbox&&("disabled"===e?this.checkbox.disabled="true"===i:"checked"===e&&(this.checkbox.checked="true"===i))}disconnectedCallback(){this.querySelector("label").removeEventListener("click",(e=>{e.preventDefault(),this.querySelector("input").click()}))}}function te(e,t){const i=e.parentNode;if(i===document.getElementsByTagName("body")[0])return;const s=i.children;for(const i of s)i!==e&&(t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden"));te(i,t)}function ie(e,t,i){t.contains(e.target)?t.lastFocused=e.target:t.lastFocused===t.firstFocusable?i?t.lastFocusable.focus():t.firstFocusable.focus():i?t.firstFocusable.focus():t.lastFocusable.focus()}function se(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex="0"]');e.firstFocusable=t[0],e.lastFocusable=t[t.length-1],e.lastFocused=e.firstFocusable}customElements.get("nb-chip")||customElements.define("nb-chip",ee);class ne extends HTMLElement{constructor(){super(),this.isOpen=!1,this.selected=null,this.buttonElement=null,this.onClickOutside=this.onClickOutside.bind(this)}connectedCallback(){this.props=x(this.attributes),this.render()}render(){this.buttonElement=null;const{label:e="",aa_description:t}=this.props;let{options:i}=this.props;i=i.map((e=>{const t={...e};return t.checked=t.checked||t.selected,t})),this.unbindEvent(),this.innerHTML=`\n            <button\n                class='nb-dropdown__button'\n                aria-haspopup="listbox"\n                aria-expanded="${this.isOpen}"\n                aria-label="${e} ${i&&this.renderSelected()}"\n                ${""!==t?`aria-description="${t}"`:""}>\n                    <span class="nb-dropdown__button__label t-xs-700-caps-sl">${e}</span>\n                    <span class="nb-dropdown__button__value t-xs-500-sl" value="${i&&this.renderSelected()}">\n                    </span>\n                </button>\n            <div class="nb-dropdown__menu">\n                <div role="listbox">\n                    ${i&&i.length>0&&this.renderOptions()}\n                </div>\n            </div>\n        `,this.buttonElement=this.querySelector(".nb-dropdown__button"),this.buttonElementValue=this.querySelector(".nb-dropdown__button__value"),this.dropdownMenu=this.querySelector(".nb-dropdown__menu > div"),this.selectedOption=this.querySelector("button[aria-selected=true]"),this.selected||(this.selected=i[0]),se(this.dropdownMenu),this.bindEvent()}renderOptions(){const{label:e,aa_listbox_description:t,aa_select_description:i,icon_option:s,options:n}=this.props;return n.map((n=>`<button\n                    class="${h.is.mobile?"t-sm-400-sl":"t-xs-500-sl"}"\n                    role="option"\n                    aria-label='${e+" "+n.label}'\n                    value='${n.label}'\n                    aria-selected='${n.checked}'\n                    ${n.link&&`data-link='${n.link}'`}\n                    ${n.checked?void 0!==t&&`aria-description="${t}"`:void 0!==i&&`aria-description="${i}"`}>\n                  ${s&&`<nb-icon icon='${s}'></nb-icon>`} ${n.label}\n                </button>`)).join("")}renderSelected(){const e=this.props.options.find((e=>!0===e.checked||!0===e.selected));return`${e&&e.label||this.props.options[0].label}`}bindEvent(){this.boundHandleClick=this.handleClick.bind(this),this.boundHandleLabelClick=this.handleLabelClick.bind(this),this.boundHandleMobileClose=this.handleMobileClose.bind(this),this.boundFocus=this.focus.bind(this),this.boundFocusin=this.focusin.bind(this),this.boundKeyNav=this.keyNav.bind(this),this.buttonElement.addEventListener("click",this.boundHandleClick),this.querySelectorAll(".nb-dropdown__menu button").forEach((e=>{e.addEventListener("click",this.boundHandleLabelClick)})),this.dropdownMenu.addEventListener("click",this.boundHandleMobileClose),window.addEventListener("click",this.onClickOutside)}unbindEvent(){this.buttonElement&&(this.buttonElement.removeEventListener("click",this.boundHandleClick),this.querySelectorAll(".nb-dropdown__menu button").forEach((e=>{e.removeEventListener("click",this.boundHandleLabelClick)})),this.dropdownMenu.removeEventListener("click",this.boundHandleMobileClose),window.removeEventListener("click",this.onClickOutside),document.removeEventListener("keydown",this.boundKeyNav))}handleClick(){this.toogleDropdown(!this.isOpen)}handleMobileClose(){this.toogleDropdown(!1)}onClickOutside(e){!this.isOpen||e.target.classList.contains("nb-dropdown__button")||e.target.classList.contains("nb-dropdown__button__label")||e.target.classList.contains("nb-dropdown__button__value")||this.toogleDropdown(!1)}handleLabelClick(e){this.isOpen=!1,this.selectedOption.setAttribute("aria-selected","false"),this.selectedOption=e.target,this.selectedOption.setAttribute("aria-selected","true"),this.props.options=this.props.options.map((e=>({...e,checked:!1}))),this.selected=this.props.options.find((e=>e.label===this.selectedOption.value)),this.selected.checked=!0,this.reRender(),L({eventName:"WEB_COMPONENT_SORT_BY_CHANGE",args:{options:this.props.options,selected:this.selected},element:this})}reRender(){const{label:e,aa_listbox_description:t,aa_select_description:i}=this.props;this.buttonElementValue.setAttribute("value",this.selectedOption.value),this.buttonElement.setAttribute("aria-label",e+" "+this.renderSelected()),this.dropdownMenu.querySelectorAll("button").forEach((e=>{e.setAttribute("aria-description",i)})),this.selectedOption.setAttribute("aria-description",t)}setSelected(e,t=!1){const i=this.props.options.find((t=>t.value===e));i&&(this.selected.checked=!1,this.selected=i,this.selected.checked=!0),t&&L({eventName:"WEB_COMPONENT_SORT_BY_CHANGE",args:{options:this.props.options,selected:this.selected},element:this})}toogleDropdown(e){e?this.open():this.close(),this.isOpen=!this.isOpen,this.switchAriaModal(),this.buttonElement.setAttribute("aria-expanded",this.isOpen)}switchAriaModal(){this.dropdownMenu.setAttribute("aria-modal",this.isOpen),te(this.dropdownMenu,this.isOpen)}open(){this.dropdownMenu.addEventListener("transitionend",this.boundFocus),document.addEventListener("focusin",this.boundFocusin),document.addEventListener("keydown",this.boundKeyNav),this.buttonElement.classList.add("isOpen"),this.openingSource=document.activeElement}close(){this.dropdownMenu.addEventListener("transitionend",this.boundFocus),document.removeEventListener("focusin",this.boundFocusin),document.removeEventListener("keydown",this.boundKeyNav),this.buttonElement.classList.remove("isOpen"),this.buttonElement.setAttribute("aria-expanded",!1)}focus(){this.dropdownMenu.removeEventListener("transitionend",this.boundFocus),this.isOpen?(this.selectedOption.focus(),this.dropdownMenu.lastFocused=this.selectedOption):this.buttonElement.focus()}focusin(e){ie(e,this.dropdownMenu,!1)}keyNav(e){switch(e.key){case"Escape":this.toogleDropdown(!1);break;case"ArrowUp":e.preventDefault(),this.prevOption();break;case"ArrowDown":e.preventDefault(),this.nextOption();break;case"Home":case"PageUp":e.preventDefault(),this.firstOption();break;case"End":case"PageDown":e.preventDefault(),this.lastOption()}}prevOption(){if(this.dropdownMenu.lastFocused!==this.dropdownMenu.firstFocusable){const e=this.dropdownMenu.lastFocused.previousElementSibling;e.focus(),this.dropdownMenu.lastFocused=e}}nextOption(){if(this.dropdownMenu.lastFocused!==this.dropdownMenu.lastFocusable){const e=this.dropdownMenu.lastFocused.nextElementSibling;e.focus(),this.dropdownMenu.lastFocused=e}}firstOption(){this.dropdownMenu.lastFocused!==this.dropdownMenu.firstFocusable&&(this.dropdownMenu.firstFocusable.focus(),this.dropdownMenu.lastFocused=this.dropdownMenu.firstFocusable)}lastOption(){this.dropdownMenu.lastFocused!==this.dropdownMenu.lastFocusable&&(this.dropdownMenu.lastFocusable.focus(),this.dropdownMenu.lastFocused=this.dropdownMenu.lastFocusable)}disconnectedCallback(){this.unbindEvent()}}customElements.get("nb-dropdown")||customElements.define("nb-dropdown",ne);class re extends W{constructor(e,t,i,s,n){super(e),this.data=t,this.currency=i,this.range=s,this.position=n}async runTrack(){if(!this.data)return;const e=await this.getCategories(this.data);window.impressionsOnScroll=window.impressionsOnScroll||{},window.impressionsOnScroll[this.data.internationalId]=this.buildGTMProductObject(this.data,e)}async getPLPCategory(e){return(await window.getPLPData()).data.configuration.eCommerceData.categories.find((t=>t.id===e))}async getCategoriesWithPlpData(e){const t="/machineTechno/",i=[...e.cupSizes,...e.flavors,...e.ranges,...e.technologies];return(await Promise.all(i.map((async e=>{const i=await this.getPLPCategory(e);return!i&&(e=>-1!==e.indexOf(t))(e)?(e=>e.substr(e.indexOf(t)+t.length))(e):i.name})))).join("|")}async getCategories(e){return e?window.getPLPData?this.getCategoriesWithPlpData(e):Promise.all(e.supercategories.map((e=>window.napi.catalog().getCategory(e)))).then((e=>{const t=[];for(const i of e){const e=i.code;if(!e)return;(~e.indexOf("-cupSize-")||~e.indexOf("-range-")||~e.indexOf("capsule-aromatic-")||~e.indexOf("machine-keyFeature-")||~e.indexOf("machine-color-")||~e.indexOf("accessory-collection-")||~e.indexOf("accessory-hero-month"))&&t.push(i.name.toLowerCase())}return t.join("|")})):""}buildGTMProductObject(e,t){let i;"capsule"===e.type?i="capsules":"accessory"===e.type?i="accessories":"machine"===e.type&&(i="machines");let s=null;e.technologies&&(s=e.technologies.map((e=>function(e=""){return e[0].toUpperCase()+e.slice(1)}(e.split("/")[2]))).join("|||"));let n="";null!=e.productSelections&&(n=e.productSelections.join("|"));const r={brand:"Nespresso",category:i,dimension43:"false",dimension44:"false",dimension53:e.legacyId,dimension54:o(e.name)[0].textContent,dimension55:t,dimension56:s,dimension57:this.isBundled(e)?"bundled":"single",dimension130:n,id:e.internationalId,name:o(e.internationalName)[0].textContent,price:e.price};return this.range&&(r.list=this.range),this.position&&(r.position=parseInt(this.position)),r}isBundled(e){let t=1===e.salesMultiple&&e.unitQuantity>1;return e.bundled?t=e.bundled:e.salesMultiple>1&&1===e.unitQuantity&&(t=!1),t}}class ae extends HTMLElement{connectedCallback(){this.sku=(this.getAttribute("sku")||"").trim(),this.range=this.getAttribute("range"),this.position=this.getAttribute("position"),this.longSku=(this.getAttribute("longSku")||"").trim(),this.buttonSize=this.getAttribute("buttonSize")||"small",this.rendererName=this.getAttribute("rendererName")||"default",this.elementID=`u-product-${""!==this.range?this.range.replace(/(\s|\W)/g,"")+"-":""}${this.position}-${this.sku}-${this.longSku.replace(/(\s|\W)/g,"")}-${this.rendererName}`,this.render(),this.isWindowNapiActive()&&(window.napi.getConfig().then((()=>{this.pushButton()})).catch((e=>console.error(e))),this.tracking().then((()=>{})).catch((e=>console.error(e))))}render(){this.innerHTML=`<div class="cb-AddToCart" id="${this.elementID}">\n                <button class='AddToBagButtonLarge'>\n                    <span class='AddToBagButtonLarge__label'>+</span>\n                </button>\n            </div>`}isWindowNapiActive(){return!!window.napi}pushButton(){if(!document.getElementById(this.elementID))return;const e=this.buttonSize;window.ui=window.ui||[],window.ui.push({id:this.elementID,module:"AddToBagButton",configuration:{props:{productId:this.longSku,buttonSize:e}},ecommerceData:{activated:!0}})}async tracking(){if(!this.isWindowNapiActive())return new Promise.resolve;!function(e,t,i,s,n){const r=new re(e,t,i,s,n)}(this,await this.getProductData(),window[window.config.padl.namespace].dataLayer.app.app.currency,this.range,this.position)}getSkuKey(e){return-1!==e.indexOf("prod/")?"id":"legacyId"}async getProductData(){if(null!=window.getPLPData){const e=this.getSkuKey(this.sku),t=await window.getPLPData(),i=[e,"internationalId","id","legacyId"];let s=0,n=null;for(;!n&&s<i.length-1;){const e=i[s];n=t.data.configuration.eCommerceData.products.find((t=>t[e]===this.sku)),s++}return n}if(this.isWindowNapiActive())return await window.napi.catalog().getProduct(this.longSku);console.error("Error: napi is not found.")}}customElements.get("nb-add-to-cart")||customElements.define("nb-add-to-cart",ae);const oe=e=>[...e.querySelectorAll("[data-ref]")].reduce(le,{}),le=(e,t)=>{const{ref:i}=t.dataset,s=i.match(/(\w+)\[(.+)\]/);return null!==s?ce(e,t,s):{...e,[t.dataset.ref]:t}},ce=(e,t,[,i,s])=>(void 0===e[i]&&(e[i]=[]),e[i][s]=t,e);class de extends HTMLElement{constructor(){super(),this.baseClass="nb-bubble",this.boundOnSelected=this.onSelected.bind(this)}static get observedAttributes(){return["state"]}attributeChangedCallback(e){"state"===e&&this.updateState()}connectedCallback(){this.props=x(this.attributes),this.classes=this.createClasses(),this.render(),this.refs=oe(this),this.bindEvent(),this.initLazyLoad()}initLazyLoad(){let{visual:{src:e="",src_retina:t=""}={}}=this.props;const{visual:i}=this.refs;h.is.retina&&t&&(e=t),i&&e&&l(i,"src",`${e}`,e)}createClasses(){const{state:e="default"}=this.props;return{base:`${this.baseClass} ${this.baseClass}--${e}`,label:this.getLabelClassName(),theme:`${this.baseClass}__theme`,visual:`${this.baseClass}__visual `,avatar:`${this.baseClass}__avatar`,outline:`${this.baseClass}__outline`}}getLabelClassName(){const{state:e="default"}=this.props,t=["selected","focus"].includes(e);return[`${this.baseClass}__label`,t?"t-xs-700-sl":"t-xs-500-sl"].join(" ")}render(){this.innerHTML=`\n            <div data-ref="button" class='${this.classes.base}'>\n                <div class='${this.classes.avatar}'>\n                    <div class='${this.classes.outline}'></div>\n                    ${this.renderBackground()}\n                    ${this.renderVisual()}\n                </div>\n                ${this.renderLabel()}\n            </div>\n        `}renderBackground(){const{theme:e="#e1dad0"}=this.props;return`\n            <div\n                class='${this.classes.theme}'\n                style='background-color: ${e};'\n            ></div>\n        `}renderVisual(){const{visual:{alt:e="",src:t=""}={}}=this.props;return`${t&&`<img class="${this.classes.visual}" src="" alt="${e}" data-ref="visual"/>`}`}renderLabel(){const{label:e}=this.props;return`${e&&`<div class="${this.classes.label}" data-ref="label">${e}</div>`}`}updateState(){if(this.refs){const{button:e,label:t}=this.refs;e.className="",t.className="",this.props=x(this.attributes),this.classes=this.createClasses(),e.className=this.classes.base,t.className=this.classes.label}}bindEvent(){window.addEventListener("EVENT_BUBBLE_SELECTED",this.boundOnSelected)}unbindEvent(){window.removeEventListener("EVENT_BUBBLE_SELECTED",this.boundOnSelected)}onSelected(e){const t=$(e),{bubble:i}=t;this.setAttribute("state",i===this?"selected":"default")}disconnectedCallback(){this.unbindEvent()}}customElements.get("nb-bubble")||customElements.define("nb-bubble",de);class ue extends HTMLElement{constructor(){super(),this.boundGetChips=this.getChips.bind(this)}connectedCallback(){this.props=x(this.attributes),this.render(),this.addEventListener(n,this.boundGetChips),this.querySelectorAll(".nb-dropdown__menu button").forEach((e=>{e.addEventListener("click",this.clickChip)}))}render(){const{navigation:e=[],navigation_bubbles:t=""}=this.props;this.classList.add("nb-plp-sticky-bar"),this.innerHTML=`<div class="nb-plp-sticky-bar--inner">\n                ${this.renderLinksSelect(e)}\n                ${this.renderBubblesSlide(t)}\n            </div>`}renderLinksSelect(e){if(h.is.mobile||!e||e.length<=1)return"";const t=e.map((e=>(e.checked=e.selected,e)));return`<div class="nb-plp-sticky-bar--dropdown">\n            <nb-dropdown\n                data='${d({icon_option:"check",options:t})}'\n            ></nb-dropdown>\n        </div>`}renderBubblesSlide(e){const{a11y_slider_previous_button:t="",a11y_slider_next_button:i=""}=this.props;return`<nb-navigation-bubbles\n                a11y_slider_previous_button="${t}"\n                a11y_slider_next_button="${i}"\n                sticky='true' data='${e}'></nb-navigation-bubbles>`}getChips(){this.querySelectorAll("nb-chip").forEach((e=>{e.addEventListener("click",this.clickChip)}))}clickChip(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-link");t&&(window.location.href=t)}disconnectedCallback(){this.removeEventListener(n,this.boundGetChips),this.querySelectorAll("nb-chip").forEach((e=>{e.removeEventListener("click",this.clickChip)})),this.querySelectorAll(".nb-dropdown__menu button").forEach((e=>{e.removeEventListener("click",this.clickChip)}))}}customElements.get("nb-plp-sticky-bar")||customElements.define("nb-plp-sticky-bar",ue);
/*!
 * swiped-events.js - v@version@
 * Pure JavaScript swipe events
 * https://github.com/john-doherty/swiped-events
 * @inspiration https://stackoverflow.com/questions/16348031/disable-scrolling-when-touch-moving-certain-element
 * @author John Doherty <www.johndoherty.info>
 * @license MIT
 */
const he=(e,t,i)=>{if(e.nwcSwipeEvents)return;e.nwcSwipeEvents=!0,t.addEventListener("touchstart",(function(e){if("true"===e.target.getAttribute("data-swipe-ignore"))return;l=e.target,function(e){if(void 0===i||!i.contains(e))return;c=[],d=[];for(;e!==i;)c.push(e.scrollTop),d.push(e.scrollLeft),e=e.parentNode}(l),o=Date.now(),s=e.touches[0].clientX,n=e.touches[0].clientY,r=0,a=0}),!1),t.addEventListener("touchmove",(function(e){if(!s||!n)return;let t=e.touches[0].clientX,i=e.touches[0].clientY;r=s-t,a=n-i}),!1),t.addEventListener("touchend",(function(t){if(l!==t.target)return;const i=.25*e.innerHeight,c=.5*e.innerWidth;let d=parseInt(p(l,"data-swipe-threshold",i),10),h=parseInt(p(l,"data-swipe-threshold",c),10),b=parseInt(p(l,"data-swipe-timeout","500"),10),_=Date.now()-o,m="",g=t.changedTouches||t.touches||[];Math.abs(r)>Math.abs(a)?Math.abs(r)>h&&_<b&&(r>0?u("left",t)&&(m="swiped-left"):u("right",t)&&(m="swiped-right")):Math.abs(a)>d&&_<b&&(a>0?u("up",t)&&(m="swiped-up"):u("down",t)&&(m="swiped-down"));if(""!==m){let e={dir:m.replace(/swiped-/,""),touchType:(g[0]||{}).touchType||"direct",xStart:parseInt(s,10),xEnd:parseInt((g[0]||{}).clientX||-1,10),yStart:parseInt(n,10),yEnd:parseInt((g[0]||{}).clientY||-1,10)};l.dispatchEvent(new CustomEvent("swiped",{bubbles:!0,cancelable:!0,detail:e})),l.dispatchEvent(new CustomEvent(m,{bubbles:!0,cancelable:!0,detail:e}))}s=null,n=null,o=null}),!1);let s=null,n=null,r=null,a=null,o=null,l=null,c=[],d=[];function u(e,t){if(void 0===i)return!0;let s=t.target,n=!0,r=0;for(;s!==i&&n;){if(h(s))switch(e){case"up":n=c[r]===s.scrollHeight-s.clientHeight;break;case"down":n=0===c[r];break;case"left":n=d[r]===s.scrollWidth-s.clientWidth;break;case"right":n=0===d[r];break;default:n=!0}s=s.parentNode,r++}return n}function h(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}function p(e,i,s){for(;e&&e!==t.documentElement;){let t=e.getAttribute(i);if(t)return t;e=e.parentNode}return s}};var pe=e=>{const t=document.createElement("DIV");t.classList.add("nb-overlay"),t.addEventListener("click",(()=>{L({eventName:"WEB_COMPONENT_POPIN_CLOSE",args:{id:e}})})),document.body.appendChild(t),setTimeout((()=>{t.classList.add("fadein")}),1)},be=()=>{if(!document.getElementsByClassName("nb-overlay").length)return;const e=document.getElementsByClassName("nb-overlay")[0];e.classList.remove("fadein"),setTimeout((()=>{e.remove()}),1200)};class _e extends HTMLElement{constructor(){super(),this.props={},this.ariaModal=null,this.isVideo=null,this.boundOpen=this.open.bind(this),this.boundClose=this.close.bind(this),this.boundEscapeClose=this.escapeClose.bind(this),this.boundFocus=this.focus.bind(this),this.boundFocusin=this.focusin.bind(this)}connectedCallback(){this.style.display="none",this.props=x(this.attributes),this.content||this.slot||(this.slot=this.innerHTML),this.id||null==this.props.popin_id||""==this.props.popin_id||(this.id=this.props.popin_id),this.ariaModal=!1,this.isVideo=!1,this.render()}attributeChangedCallback(e,t,i){this.props=x(this.attributes),"content"===e&&(this.props.content=i)}static get observedAttributes(){return["content"]}disconnectedCallback(){this.hasEvent&&this.unbindEvent()}render(){this.hasEvent&&this.unbindEvent();const{heading:e="",bgcolor:t="highlight",size:i="M",label_close:s="Close",image:n="",image_alt:r="",content:a=""}=this.props,o=a||this.slot;if(""===o)return this.bindEvent(),this.classList.remove("isOpen"),this.isOpen=!1,!1;this.checkIsVideo(o),this.isVideo?this.setAttribute("size","L"):this.setAttribute("size",i),this.setAttribute("role","dialog"),this.setAttribute("aria-hidden","true"),this.setAttribute("bgcolor",t),this.innerHTML=`\n            <nb-cta\n                variation="navigation"\n                ${"white"===t?'contrast="highlight"':'contrast="light"'}\n                icon_right="close-2"\n                label="${s}"></nb-cta>\n            <div class="wrapper">\n                <div class="title">\n                    ${e&&`<h2 class="h-lg-700-caps-sl">${e}</h2>`}\n                </div>\n                <div class="content" tabindex="-1">\n                    ${n&&`<div class="popin-header-img"><img loading="lazy" src="${n}" alt="${r}" title="${r}" width="300" height="225" /></div>`}\n                    ${o}\n                </div>\n                ${this.renderFooter()}\n            </div>\n            ${this.isVideo&&h.is.mobile?'<div class="swipeOverlay"></div>':""}\n        `,setTimeout((()=>{this.style.display="inherit"}),100),se(this),this.buttonElement=this.querySelector("button"),this.bindEvent()}renderFooter(){const{footer:e}=this.props;var t;return!(!(t=e)||"false"===t)?"<footer></footer>":""}checkIsVideo(e){const t=document.createElement("div");t.innerHTML=e,1===t.children.length&&"NB-VIDEO"===t.children[0].tagName&&(this.isVideo=!0,this.setAttribute("video","true"))}addLock(){document.getElementsByTagName("html")[0].classList.add("scroll-lock"),pe(this.props.popin_id)}removeLock(){this.parentNode.closest("nb-popin")||document.getElementsByTagName("html")[0].classList.remove("scroll-lock"),be()}switchAriaModal(){this.ariaModal=!this.ariaModal,this.setAttribute("aria-modal",this.ariaModal),te(this,this.ariaModal)}async open(e){this.addEventListener("transitionend",this.boundFocus),document.addEventListener("focusin",this.boundFocusin),this.openingSource=document.activeElement;const t=$(e);t.id===this.id?(this.addLock(),this.switchAriaModal(),this.setAttribute("aria-hidden","false"),this.isOpen=!this.isOpen,await new Promise((e=>{setTimeout((()=>{this.classList.add("isOpen"),e()}),300)})),L({eventName:"WEB_COMPONENT_POPIN_OPENED",args:{id:this.props.popin_id}})):console.log("return",t.id,this.id)}close(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),this.addEventListener("transitionend",this.boundFocus),document.removeEventListener("focusin",this.boundFocusin),this.removeLock(),this.switchAriaModal(),this.setAttribute("aria-hidden","true"),this.isOpen=!this.isOpen,this.classList.remove("isOpen"),L({eventName:"WEB_COMPONENT_POPIN_CLOSED",args:{id:this.props.popin_id}})}focus(){this.removeEventListener("transitionend",this.boundFocus),this.isOpen?this.buttonElement.focus():this.openingSource.focus()}focusin(e){ie(e,this,!0)}escapeClose(e){"Escape"===e.key&&this.isOpen&&this.close(e)}swipeDown(e){this.isOpen&&this.close(e)}swipeOverlayTogglePlayPause(){L({eventName:"WEB_COMPONENT_VIDEO_TOGGLE",args:{id:this.props.popin_id}})}bindEvent(){this.hasEvent=!0,null!=this.buttonElement&&this.buttonElement.addEventListener("click",this.boundClose),window.addEventListener(t,this.boundOpen),window.addEventListener("WEB_COMPONENT_POPIN_CLOSE",this.boundClose),document.addEventListener("keydown",this.boundEscapeClose),h.is.mobile&&(he(window,document,this),this.boundSwipeDown=this.swipeDown.bind(this),document.addEventListener("swiped-down",this.boundSwipeDown),this.isVideo&&(this.swipeOverlay=this.querySelector(".swipeOverlay"),this.boundSwipeOverlayTogglePlayPause=this.swipeOverlayTogglePlayPause.bind(this),this.swipeOverlay.addEventListener("click",this.boundSwipeOverlayTogglePlayPause)))}unbindEvent(){this.hasEvent=!1,null!=this.buttonElement&&this.buttonElement.removeEventListener("click",this.boundClose),window.removeEventListener(t,this.boundOpen),window.removeEventListener("WEB_COMPONENT_POPIN_CLOSE",this.boundClose),document.removeEventListener("keydown",this.boundEscapeClose),this.boundSwipeDown&&(document.removeEventListener("swiped-down",this.boundSwipeDown),this.boundSwipeDown=null),this.boundSwipeOverlayTogglePlayPause&&(this.swipeOverlay.removeEventListener("click",this.boundSwipeOverlayTogglePlayPause),this.boundSwipeOverlayTogglePlayPause=null)}}customElements.get("nb-popin")||customElements.define("nb-popin",_e);const me={fair_trade:"https://www.nespresso.com/shared_res/agility/commons/img/icons/fairTrade.svg",is_organic:function(){let e="https://www.nespresso.com/shared_res/agility/commons/img/icons/logo-organic-eu.svg";switch(z()){case"us":e="https://www.nespresso.com/shared_res/agility/commons/img/icons/logo-organic-us.svg";break;case"ca":e="https://www.nespresso.com/shared_res/agility/commons/img/icons/logo-organic-ca.svg";break;case"br":e="https://www.nespresso.com/shared_res/agility/commons/img/icons/logo-organic-br.svg";break;case"jp":e="https://www.nespresso.com/shared_res/agility/commons/img/icons/logo-organic-jp.svg";break;case"be":e="https://www.nespresso.com/shared_res/agility/commons/img/icons/logo-organic-be.png"}return e}(),only_vertuo_next:"https://www.nespresso.com/shared_res/agility/commons/img/icons/logo-only-vertuo-next.svg",is_q_certified_arabica:"https://www.nespresso.com/shared_res/agility/commons/img/icons/q_grade_certification_arabica.svg",is_rainforest:"https://www.nespresso.com/shared_res/agility/commons/img/icons/logo-rainforest.svg",is_sustainable:"https://www.nespresso.com/shared_res/agility/commons/img/icons/logo-sustainability.svg",is_design_award_2021:"https://www.nespresso.com/shared_res/agility/commons/img/icons/design_award_2021.svg"};function ge(e){return e.find((e=>function(e){return Le("cat/capsule-attribute-only-vertuo-next").test(e.id)}(e)))}function fe(e){return e.find((e=>function(e){return Le("capsule-attribute-organic-eu").test(e.id)}(e)))}function ve(e){return e.find((e=>function(e){return Le("capsule-attribute-rainforest").test(e.id)}(e)))}function ye(e){return e.find((e=>function(e){return Le("capsule-attribute-sustainability").test(e.id)}(e)))}function ke(e){return e.find((e=>function(e){return Le("capsule-attribute-arabica").test(e.id)}(e)))}function we(e){return e.filter((e=>function(e){return Le("cat/capsule-range-label").test(e.id)}(e)))}function Ee(e){return e.find((e=>function(e){return Le("cat/capsule-attribute-highlight").test(e.id)}(e)))}function Ce(e){return e.find((e=>function(e){return Le("cat/capsule-range-fair-trade").test(e.id)}(e)))}function Le(e){return new RegExp(e.replace(/\//g,"\\/"))}class $e extends HTMLElement{constructor(){super(),this.props={}}connectedCallback(){this.props=x(this.attributes),this.render()}render(){let e,t,i,s,n,r,a,o,l,c,d,u,{direction:h="row",logos:p}=this.props;this.classList.add(""+("column"===h?"direction-column":"direction-"+h));let b=[];null==p?(e=this.props?.fair_trade,t=this.props?.alt_fair_trade,i=this.props?.is_organic,s=this.props?.alt_organic,n=this.props?.only_vertuo_next,r=this.props?.alt_vertuo_next,a=this.props?.is_rainforest,o=this.props?.alt_rainforest,l=this.props?.is_sustainable,c=this.props?.alt_sustainable,d=this.props?.is_q_certified_arabica,u=this.props?.alt_q_certification_arabica):void 0===p.length?(e=p?.fair_trade,t=p?.alt_fair_trade,i=p?.is_organic,s=p?.alt_organic,n=p?.only_vertuo_next,r=p?.alt_vertuo_next,a=p?.is_rainforest,o=p?.alt_rainforest,l=p?.is_sustainable,c=p?.alt_sustainable,d=p?.is_q_certified_arabica,u=p?.alt_q_certification_arabica):p.length&&(b=[...p]),[[e,"fair_trade",t,b],[i,"is_organic",s,b],[n,"only_vertuo_next",r,b],[a,"is_rainforest",o,b],[l,"is_sustainable",c,b],[d,"is_q_certified_arabica",u,b]].map((e=>this.appendLogo.apply(this,e))),this.innerHTML=b.map((e=>`<img src="${me[e.name]}" alt="${e.alt}" loading="lazy">`)).join("")}appendLogo(e,t,i,s){e&&!this.hasLogo(s,t)&&s.push({name:t,alt:i})}hasLogo(e,t){return e.some((e=>e.name===t))}}customElements.get("nb-card-logos")||customElements.define("nb-card-logos",$e);class Se extends HTMLElement{constructor(){super(),this.props={},this.labels=[]}connectedCallback(){this.props=x(this.attributes),this.render()}render(){const{labels:e=[],direction:t="column"}=this.props;if(this.classList.add(""+("row"===t?"direction-row":"direction-"+t)),0===e.length)return"";this.labels=e,this.innerHTML=`${this.renderLabels()}`}renderLabels(){return this.labels.map((e=>{const{name:t="",bgColor:i="",color:s=""}=e;return`<mark class="t-3xs-500"\n                            ${i&&s&&`style="background: ${i}; color: ${s}"`}>\n                            <span aria-hidden="true">${t}</span>\n                            <span class="sr-only">${t}</span>\n                        </mark>`})).join("")}}customElements.get("nb-card-labels")||customElements.define("nb-card-labels",Se);const Pe="pnAdvancerRight",Oe="pnAdvancerLeft",Ae="#000000";class Te{constructor(e,t={}){return this.boundNextClick=this.onNextClick.bind(this),this.boundPrevClick=this.onPrevClick.bind(this),this.boundLinkClick=this.onLinkClick.bind(this),this.boundTouchEnd=this.onTouchEnd.bind(this),this.disableAutoScroll="true"===t.disableAutoScroll||!1,this._entriesBounds=null,new Promise((i=>{this._element=e,this._slides=[].slice.call(e.children),this._options=Object.assign({},{id:"uuid",last_known_scroll_position:0,ticking:!1,navBarTravelDirection:"",navBarTravelling:!1,navBarTravelDistance:150,scrollAmount:220},t),this.buildIHM(),i(this),setTimeout((()=>{this.setOverflowAttribute(),this.initializeIndicatorPosition()}),0)}))}get element(){return this._element}buildIHM(){this._root=this.createElement("div","pn-ProductNav"),this._container=this.createElement("div","pn-ProductNavContents"),this._pnIndicator=null,this._containerSlidesContent=null,this.hasContainer()&&(this._containerSlidesContent=this.createElement("div","pn-ProductContainer")),this.wrapItems(),this._root.appendChild(this._container),this._containerSlidesContent&&this._element.appendChild(this._containerSlidesContent),this._element.insertBefore(this._root,this._element.childNodes[2]),this.createIndicator()}hasContainer(){return!!document.querySelector(".slider-container")}wrapItems(){const e=[];this._slides.map((t=>{const i=function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=i.length,n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*s));return t}(5);if(this.hasContainer()&&t.classList.contains("slider-container")&&(t.children&&t.children.length&&[...t.children].forEach(((t,i)=>{0!==i&&(t.style.display="none"),t.id=e[i],this._containerSlidesContent.appendChild(t)})),t.remove()),!t.classList.contains("pn-Advancer")){const s=this.createElement("div","pn-ProductNavLinkWrapper");s.appendChild(t),s.setAttribute("data-inner-content-id",i),e.push(i),this._container.appendChild(s)}}))}createElement(e,t){let i=document.createElement(e);return i.setAttribute("class",t),i}createIndicator(){this.elements=[],this._pnIndicator=this.createElement("div","pn-ProductNavIndicator"),this._container.appendChild(this._pnIndicator),this.elements=Array.from(this._container.querySelectorAll("nb-link a")),this.elements.forEach((e=>{e.addEventListener("click",this.boundLinkClick)}));const e=document.getElementById(`${Oe}-${this._options.id}`);e&&e.addEventListener("click",this.boundPrevClick);const t=document.getElementById(`${Pe}-${this._options.id}`);t&&t.addEventListener("click",this.boundNextClick),this._root&&this._container.addEventListener("touchend",this.boundTouchEnd)}onLinkClick(e){this.goToElement(e.currentTarget)}goToSlide(e){this.goToElement(this._slides[e])}showContent(e){const t=document.querySelector(".pn-ProductContainer");t.children&&[...t.children].forEach((e=>e.style.display="none")),document.getElementById(e).style.display="block"}goToElement(e){if(this.hasContainer()){const t=e.closest("[data-inner-content-id]").getAttribute("data-inner-content-id");this.showContent(t)}if(this.deselectAllLinkBut(e),e.setAttribute("aria-selected","true"),!e||!this._entriesBounds)return;let t=0;for(const i of this._entriesBounds){if(i.target.getAttribute("data-href")===e.getAttribute("data-href"))break;t=t+i.boundingClientRect.width+10}this.disableAutoScroll||this._root.scroll({left:t,behavior:"smooth"})}deselectAllLinkBut(e){this.elements.map((t=>{t!==e&&t.setAttribute("aria-selected","false")}))}sideScroll(e,t,i,s,n){this.setOverflowAttribute();let r=0,a=setInterval((function(){"left"===t?e.scrollLeft-=n:e.scrollLeft+=n,r+=n,r>=s&&window.clearInterval(a)}),i);return{slideTimer:a}}onPrevClick(){this.sideScroll(this._root,"left",25,this._options.scrollAmount,10),setTimeout((()=>{this.setOverflowAttribute()}),300)}onNextClick(){this.sideScroll(this._root,"right",25,this._options.scrollAmount,10),setTimeout((()=>{this.setOverflowAttribute()}),300)}onTouchEnd(){this.setOverflowAttribute()}initializeIndicatorPosition(){const e=this._root.querySelector('[aria-selected="true"]');e&&this.moveIndicator(e,Ae)}determineOverflow(e,t){let i=t.getBoundingClientRect(),s=Math.floor(i.right),n=Math.floor(i.left),r=e.getBoundingClientRect(),a=Math.floor(r.right),o=Math.floor(r.left);return n>o&&s<a?"both":o<n?"left":a>s?"right":"none"}moveIndicator(e,t){if(!this._pnIndicator)return;let i=e.getBoundingClientRect(),s=this._container.getBoundingClientRect().left,n=i.left-s;this._pnIndicator.style.transform="translateX("+(n+this._container.scrollLeft+10)+"px) scaleX("+.01*(i.width-20)+")",this._root.scrollLeft=Math.floor(n+this._container.getBoundingClientRect().left/2),t&&(this._pnIndicator.style.backgroundColor=t)}onResize(){this.setOverflowAttribute(),this.initializeIndicatorPosition()}clearListeners(){this.elements.forEach((e=>{e.removeEventListener("click",this.boundLinkClick)}));const e=document.getElementById(`${Oe}-${this._options.id}`);e&&e.removeEventListener("click",this.boundPrevClick);const t=document.getElementById(`${Pe}-${this._options.id}`);t&&t.removeEventListener("click",this.boundNextClick)}kill(){this.clearListeners()}setOverflowAttribute(){this._element.setAttribute("data-overflowing",this.determineOverflow(this._container,this._root)),this.observe()}observe(){if(!("IntersectionObserver"in window))return!1;this._entriesBounds=[];const e=new IntersectionObserver((t=>{for(const e of t)this._entriesBounds.push({target:e.target,intersection:e.boundingClientRect.right<=window.innerWidth-10&&e.boundingClientRect.left>=10,boundingClientRect:e.boundingClientRect});e.disconnect()}),{root:this._container});this._slides.map((t=>e.observe(t)))}isInViewport(e){if(!this._entriesBounds)return!1;return this._entriesBounds.find((t=>e===t.target)).intersection}}class xe extends HTMLElement{constructor(){super(),this.slot=this.innerHTML,this.navBarTravelling=!0,this.disableAutoScroll=!1,this.navBarTravelDirection="",this.navBarTravelDistance=200,this.randomId="swiperMenu_"+function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=i.length,n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*s));return t}(5),this.sliderMenu=null,this.boundOnResize=this.onResize.bind(this),this.onLoad=this.onLoad.bind(this),this.debouncedOnResize=function(e,t){let i;return t=t||100,function(s){i&&clearTimeout(i),i=setTimeout(e,t,s)}}(this.boundOnResize,250)}static get observedAttributes(){return["navBarTravelling","navBarTravelDirection","navBarTravelDistance"]}render(){const e="true"===this.getAttribute("navigation")||"",t=this.getAttribute("a11y_slider_previous_button")||"",i=this.getAttribute("a11y_slider_next_button")||"";this.innerHTML=`\n            <div id="pnProductNav-${this.randomId}" class="pn-ProductNavWrapper ${this.randomId}">\n                ${e&&`<nb-cta id="pnAdvancerLeft-${this.randomId}"\n                        class="pn-Advancer pn-AdvancerLeft"\n                        variation="navigation"\n                        contrast="highlight"\n                        size="32"\n                        icon_right="chevron-left"\n                        label="${t}"></nb-cta>`}\n                ${this.slot}\n                ${e&&`<nb-cta id="pnAdvancerRight-${this.randomId}"\n                        class="pn-Advancer pn-AdvancerRight"\n                        variation="navigation"\n                        contrast="highlight"\n                        size="32"\n                        icon_right="chevron-right"\n                        label="${i}"></nb-cta>`}\n                <span id="pnIndicator-${this.randomId}"\n                    class="pn-ProductNavIndicator">\n                </span>\n            </div>\n\n            `,this.loadSwiper()}connectedCallback(){this.navBarTravelling=this.getAttribute("navBarTravelling")||this.navBarTravelling,this.navBarTravelDirection=this.getAttribute("navBarTravelDirection")||this.navBarTravelDirection,this.navBarTravelDistance=this.getAttribute("navBarTravelDistance")||this.navBarTravelDistance,this.disableAutoScroll=this.getAttribute("disable_auto_scroll")||"",this.render(),window.addEventListener("resize",this.debouncedOnResize)}loadSwiper(){let e=this.navBarTravelDirection,t=this.navBarTravelDistance;this.sliderMenu=new Te(this.querySelector("."+this.randomId),{id:this.randomId,index:this.index,navBarTravelDirection:e,navBarTravelDistance:t,disableAutoScroll:this.disableAutoScroll}),this.sliderMenu.then((()=>{this.classList.add("is-show"),L({eventName:n,args:{className:this.randomId},element:this})}))}handleClick(){var e;L({eventName:"WEB_COMPONENT_SLIDE_CHANGE"}),e={rootElement:["nb-slider-menu"]},window.gtmDataObject.push({event:"itemDisplay",eventRaisedBy:"Web component",eventAction:"Click",itemTypes:["products"],...e})}onLoad(){this.sliderMenu.then((e=>e.onLoad()))}onResize(){this.sliderMenu.then((e=>e.onResize()))}onNavigationClick(e){let t="";e.target&&e.target.closest(".link")&&e.target.closest(".link").getAttribute("tracking_label")&&(t=e.target.closest(".link").getAttribute("tracking_label")),D({eventAction:"PLP Content Tab",eventLabel:t})}disconnectedCallback(){window.removeEventListener("resize",this.debouncedOnResize),this.sliderMenu.then((e=>e.kill()))}}customElements.get("nb-slider-menu")||customElements.define("nb-slider-menu",xe);var Ne=(e=[])=>{e.forEach((e=>{if(e&&e.element)return e.element.addEventListener(e.type,e.listener,e.options)}))},Ie=(e=[])=>{e.forEach((e=>{e&&e.element&&e.element.removeEventListener(e.type,e.listener)}))};const Me=(()=>{const e=({identifier:e="",callback:t,options:i})=>{if(""===e)return{};const s=document.querySelectorAll(e),n=new IntersectionObserver(t,i);for(const e of s)n.observe(e);return{observer:n,targets:s}};return{initialize:t=>{t.map(e)},destroy:()=>{}}})(),Be=[.2,.8],De=(()=>{let e=null,t=!1;const i=e=>{s(e[0])},s=t=>{if(t.isIntersecting&&!e.isScrolling){let{sectionId:e=""}=t.target.dataset;e=""===e?t.target.getAttribute("data-id"):"",L({eventName:"EVENT_NAVIGATION_SECTION_CHANGE",args:{sectionId:e}})}};return{initialize:s=>{e=s;const n=[{identifier:"[data-id]",callback:i,options:{threshold:Be,rootMargin:"-160px 0px 0px 0px"}}],r=()=>{t||(t=!0,Me.initialize(n))};setTimeout((()=>{r()}),2e3),window.addEventListener("WEB_COMPONENT_PROJECTS_LOADED",(()=>{r()}))},destroy:()=>{}}})(),Fe=e=>{const t=e=>{const t=e.querySelectorAll("a");for(const[e,s]of t.entries())s.addEventListener("click",i(e))},i=t=>i=>{i.preventDefault();const s=i.target.closest(".is-link");s&&(L({eventName:"EVENT_NAVIGATION_SECTION_CHANGE",args:{sectionId:s.getAttribute("data-href"),index:t}}),e.scroll&&e.scroll(s,t),window.location.hash=s.getAttribute("data-href"))},s=t=>{const{sectionId:i,index:s}=$(t);e.updateBubbles&&e.updateBubbles(i),e.updateChips&&e.updateChips(i),e.updateSlider&&e.updateSlider(i,s)};return{createListeners:()=>{const{containerBubble:i,containerChip:r,sliderBubble:a,sliderChip:o}=e.refs,l=[];return i&&l.push({element:i,type:n,listener:t(a),options:{once:!0}}),r&&l.push({element:r,type:n,listener:t(o),options:{once:!0}}),l.push({element:window,type:"EVENT_NAVIGATION_SECTION_CHANGE",listener:s}),l.push({element:window,type:"EVENT_HEADER_POSITION_CHANGED",listener:e.updateLayout.bind(e)}),Ne(l),l}}};class He{constructor(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}}class qe extends HTMLElement{static get observedAttributes(){return["sticky"]}constructor(){super(),this.isMobile=window.innerWidth<768,this.isScrolling=!1}connectedCallback(){this.props=x(this.attributes),this.classList.add("nb-navigation-bubbles"),this.init()}init(){this.render(),this.refs=oe(this),this.geometry=this.getGeometry(),this.slidesVisibles=this.getSlidesVisible(),De.initialize(this),this.eventsListeners=Fe(this).createListeners()}update(){this.eventListeners&&Ie(this.eventListeners),this.updateClasses(),this.render(),this.refs=oe(this),this.eventsListeners=Fe(this).createListeners()}attributeChangedCallback(e,t,i){"sticky"===e&&this.props&&i!==t&&(this.props.sticky=i,this.update())}render(){let e="";e=this.isSticky()?`${this.renderNavigation(32,"Chip","white_1000")}`:`${this.renderNavigation(16,"Bubble","")}`,this.innerHTML=e,this.updateClasses()}renderNavigation(e,t,i){const{a11y_slider_previous_button:s,a11y_slider_next_button:n}=this.props,r=this.renderList(`render${t}`);return`\n            <nb-container\n                background_color="${i}"\n                class="nb-navigation-bubbles__container--${t.toLowerCase()}"\n                contrast="light"\n                data-ref="container${t}"\n            >\n                <nb-slider-menu\n                    a11y_slider_previous_button="${s}"\n                    a11y_slider_next_button="${n}"\n                    navigation="true"\n                    pagination="false"\n                    slides_loop="false"\n                    slides_visible="${this.slidesVisibles}"\n                    space_between="${e}"\n                    data-ref="slider${t}"\n                >\n                    ${r}\n                </nb-slider-menu>\n            </nb-container>\n        `}renderList(e){const{bubbles:t=[]}=this.props;return t.map((t=>this[e](t))).join("")}renderBubble(e){let{link:t}=e;if(!t)return null;const{linkNoHash:i,linkHash:s}=this._getHashLink(t);return`\n            <a href="${s}" class="is-link" data-href='${i}'>\n                <nb-bubble data='${JSON.stringify(e).replace(/"/g,"&quot;")}' data-ref="bubbles[${i}]"></nb-bubble>\n            </a>\n        `}_getHashLink(e){let t=e,i=e;return-1!==e.indexOf("#")?i=e.replace("#",""):t="#"+e,{linkNoHash:i,linkHash:t}}renderChip(e){const{link:t}=e;if(!t)return null;const{linkNoHash:i,linkHash:s}=this._getHashLink(t);return`\n            <a href="${s}" data-href='${i}' class="is-link">\n                <nb-chip\n                    background_image="${e.visual.src}"\n                    data-ref="chips[${i}]"\n                    rounded="false"\n                >\n                    ${e.label}\n                </nb-chip>\n            </a>\n        `}isSticky(){if(!this.props)return!1;const{sticky:e="false"}=this.props;return"true"===e}getMethod(e){return["add","remove"][e?0:1]}addClass(e,...t){this.classList[this.getMethod(e)](...t)}updateClasses(){const e=this.isSticky(),{padding_top:t,padding_bottom:i}=this.props;null!=i&&null!=t&&this.addClass(!e,t,i)}updateLayout(){this.geometry=this.getGeometry(),this.updatePosition()}updateBubbles(e){const{bubbles:t={}}=this.refs;for(const i in t){const s=t[i],n=i===e?"selected":"default";s.setAttribute&&s.setAttribute("state",n)}}updateChips(e){const{chips:t={}}=this.refs;for(const i in t){const s=t[i],n=i===e?"true":"false";s.setAttribute&&s.setAttribute("checked",n)}}async updateSlider(e,t){let i=t;if(this.refs.sliderChip){const s=await this.refs.sliderChip.sliderMenu;if(void 0===t){document.querySelectorAll("#pnProductNav-"+s._options.id+" .pn-ProductNavLinkWrapper").forEach(((t,s)=>{t.childNodes[0].getAttribute("data-href")===e&&(i=s)}))}i&&s&&s.goToSlide&&s.goToSlide(i)}}emit(e){L({element:this,...e})}async scroll(e,t){this.isScrolling=!0;const i=e.getAttribute("data-href"),{header:s,chips:n,navigation:r}=this.geometry,a=0===t?r.height:n.height,o={scrollPaddingTop:s.top+s.height+a};await((e,t={})=>{const i={scrollPaddingTop:140,scrollDuration:300,...t},s=new He;let n;const r=typeof e;if(["string","object"].indexOf(r)>-1){n=e,"string"===r&&(n=document.querySelector(e));try{e=window.pageYOffset+n.getBoundingClientRect().top-i.scrollPaddingTop}catch(t){throw new Error(`error: No element found with the selector "${e}"`)}}else"number"!=typeof e&&(e=0);let a=window.performance.now(),o=0,l=window.pageYOffset-e,c=window.innerHeight,d=document.body.clientHeight;l>c&&d-c>0&&(i.scrollDuration=Math.abs(i.scrollDuration+i.scrollDuration*(Math.abs(l)/(d-c))));let u=a+i.scrollDuration;return window.requestAnimationFrame((function t(){let n=window.performance.now();if(n<u){o=(n-a)/i.scrollDuration,o=--o*o*o+1;const s=l*o;window.scrollTo(0,e+(l-s)),window.requestAnimationFrame(t)}else window.scrollTo(0,e),setTimeout((()=>s.resolve()),125);return s.promise})),s.promise})(`[data-id="${i}"]`,o),this.isScrolling=!1}track(e){const{customEventAction:t}=this.props;let i={eventRaisedBy:"Before",eventLabel:e};t&&(i.eventAction=t),D(i)}getGeometry(){const e=document.querySelector(".Header__top"),t=this?.getBoundingClientRect(),i=e?.getBoundingClientRect()||{height:0,y:0};return{header:{height:i.height,top:i.y},navigation:{height:t.height,top:window.scrollY+t.y},chips:{height:t.height,top:window.scrollY+t.y}}}getSlidesVisible(){const{sticky:e="false"}=this.props;return h.is.mobile?3:h.is.tablet?6:"true"===e?5:9}disconnectedCallback(){Ie(this.eventListeners)}}async function ze(){return await window.plpData}customElements.get("nb-navigation-bubbles")||customElements.define("nb-navigation-bubbles",qe);var Re={init:async function(e){return window.plpDataType=e,window.getPLPData=window.getPLPData||ze,this.set("sessionId",(Math.random()+1).toString(36).substring(7)),this.set("filtersSelected",[]),this.set("sortCurrent",{}),this.set("sortOptions",[]),window.getPLPData()},set:function(e,t){this[e]=t},get:function(e){return this[e]||null},initPriceFormatter:function(){return async function(){return napi.priceFormat()}()},initCurrency:function(){return async function(){return napi.market().read()}()},productsList:function(){return this.products},productsListFiltered:function(){return this.products.reduce(((e,t)=>e.concat(t.products)),[]).filter(((e,t,i)=>this.get("filtersSelected").every((t=>!!e[t.key]&&("string"==typeof e[t.key]?e[t.key]===t.value:"number"==typeof e[t.key]?JSON.parse("["+t.value+"]").includes(e[t.key]):e[t.key].includes(t.value))))&&i.findIndex((t=>t.id===e.id))===t)).sort(((e,t)=>e[this.get("sortCurrent").key]<t[this.get("sortCurrent").key]?"asc"===this.get("sortCurrent").order?-1:1:e[this.get("sortCurrent").key]>t[this.get("sortCurrent").key]?"asc"===this.get("sortCurrent").order?1:-1:0))},productsFilteredCount:function(){return this.productsListFiltered().length},filtersUpdate:function(e,t=!0){const i=e.key,s=e.value,n=e.selected,r=this.get("filters").find((e=>e.key===i));r&&(r.values.forEach((e=>{("object"==typeof e.value?e.value.join(",")===s:e.value===s)&&(e.selected=n,n?this.get("filtersSelected").push({key:i,value:s,color:e.color||null}):this.set("filtersSelected",this.get("filtersSelected").filter((e=>!(e.key===i&&e.value===s)))))})),t&&this.fire())},filtersSelectedWithLabel:function(){return this.get("filtersSelected").map((e=>({label:this.get("filters").find((t=>t.key===e.key)).values.find((t=>t.value===e.value)).label,key:e.key,value:e.value})))},filtersSelectedCount:function(){return this.get("filtersSelected").length},filtersSelectedSerialized:function(){const e=[this.get("sortCurrent"),...this.get("filtersSelected")];return d(e)},filtersReset:function(){this.set("filtersSelected",[]),this.get("filters").forEach((e=>{e.values.forEach((e=>{e.selected=!1,e.disabled=!1}))})),this.set("sortCurrent",this.get("sortOptions")[0]),this.fire()},observers:[],subscribe:function(e){this.observers.push(e)},unsubscribe:function(e){this.observers=this.observers.filter((t=>{if(t!=e)return t}))},fire:function(){this.observers.forEach((e=>{e.call()}))}};const je="filtersPLP",Ve="plp-sort-menu",We="plp-sort-menu-mobile",Ge="plp-filter-popin";var Qe=function(){document.getElementById("productsListPLP").parentElement.setAttribute("data-loaded",Re.sessionId)},Ue=function(){const e=document.getElementById("filtersPLP"),t=document.getElementById("navigationPLP"),i=document.getElementById("productsListPLP"),s=document.getElementById("productsResultsPLP");e.setAttribute("data-request",Re.sessionId),e.setAttribute("data-filter-counter",Re.filtersSelectedCount()),t.setAttribute("data-request",Re.sessionId),i.setAttribute("data-request",Re.sessionId),e.style.display="block",t.style.display="block",i.style.display="block",s.style.display="none",document.getElementById("productsResultsPLP").style.display="none"},Ke=function(){const e=document.getElementById("filtersPLP"),t=document.getElementById("navigationPLP"),i=document.getElementById("productsListPLP"),s=document.getElementById("productsResultsPLP");e.style.display="block",e.setAttribute("data-request",Re.sessionId),e.setAttribute("data-filter-counter",Re.filtersSelectedCount()),t.style.display="none",i.style.display="none",s.setAttribute("data-request",Re.filtersSelectedSerialized()),s.style.display="block"},Ye=function(){let e=document.getElementsByClassName("plp-app")[0].querySelector(`#${Ge}`);e?(e.querySelector("plp-filter-popin").setAttribute("data-refresh","true"),L({eventName:t,args:{id:Ge}})):import("./plp.filter-popin-e18e9aa3.js").then((()=>{e=((e,t)=>{for(let i in t)e.setAttribute(i,t[i]);return e})(document.createElement("nb-popin",{is:customElements.get("Popin")}),{"data-request":Re.sessionId,id:Ge,popin_id:Ge,variation:"before",bgcolor:"white",heading:Re.translations["productlistrespblock.filter.label"],label_close:"test",content:'<plp-filter-popin class="plp-filter-popin-content"></plp-filter-popin>'}),document.getElementsByClassName("plp-app")[0].appendChild(e),L({eventName:t,args:{id:Ge}})}))},Je=function(e){const t=e.detail.err||"Error";console.error(t)};const Xe=(e,t)=>{const i=window.location.href.split("#");history.pushState(null,null,((e,t,i)=>{const s=new RegExp("([?&])"+t+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(s)?e.replace(s,"$1"+t+"="+i+"$2"):e+n+t+"="+i})(i[0],e,encodeURIComponent(JSON.stringify(t))))},Ze=e=>{const t=window.location.search,i=new URLSearchParams(t).get(e);if(!i)return null;try{return JSON.parse(decodeURIComponent(i))}catch(e){console.error("plp.actions-getUrlVariable: url parsing failed")}},et=e=>{const{isSorted:t,isFiltered:i}=e;D(t||i?{eventAction:"PLP Filter click",eventLabel:[tt(e),it(e)].join("|")}:{eventAction:"PLP Filter click",eventLabel:"none selected"})},tt=e=>{const{isSorted:t,sortKey:i,sortOrder:s}=e;return t?`sort:${s}|${i}`:"sort:none selected"},it=e=>{const{isFiltered:t,filtersSelected:i}=e;let s="characteristics:";if(!t)return`${s}none selected`;return`${s}${[...new Set(i.map((e=>e.key)))].join(",")}`};let st={};const nt=e=>e.get("sortCurrent").key!==e.get("sortOptions")[0].key||e.get("sortCurrent").order!==e.get("sortOptions")[0].order,rt=e=>0!==e.filtersSelectedCount();var at={onload:{process:function(e,t){const{plpType:i}=e.detail.value,s=Re.init(i);Re.set("plpType",i||null),Re.set("innerWidth",window.innerWidth),Re.set("innerHeight",window.innerHeight);const n=Re.initCurrency(),r=Re.initPriceFormatter();Promise.all([s,n,r]).then((e=>{st=e[0],Re.set("currency",e[1].currency),Re.set("priceFormatter",e[2]),t(new CustomEvent("onloadSuccess"))})).catch((e=>{console.error(e),t(new CustomEvent("onloadError",{detail:{err:e}}))}))}},onloadSuccess:{nextState:function(e){return Qe(e)}},onloadError:{nextState:function(e){return Je(e)}},onMergeData:{process:function(e,t){const{filtersService:i,productService:s,dataSortService:n,pageBuilderProps:r}=e.detail.value,{categories:a,enabledTechnologies:o,translations:l,categoriesExtraData:c,nav_links:d,bubbles:u}=s(st,r),h=n(r);Re.set("sortOptions",h),Re.set("sortCurrent",h[0]),Re.set("enabledTechnologies",o),Re.set("products",a),Re.set("translations",l),Re.set("nav_links",d),Re.set("bubbles",u);const p=i(Re.get("products"),r,c,l,{priceFormatter:Re.get("priceFormatter"),currency:Re.get("currency")});Re.set("filters",p);const b=Ze("filters");if(b&&b.length>0){const e=((e,t)=>{const i=[];return t.forEach((t=>{e.forEach((e=>{e.key===t.key&&e.values.forEach((s=>{t.value===s.value&&i.push({key:e.key,value:s.value,selected:!0})}))}))})),i})(Re.get("filters"),b);if(e.length>0){let t=!1;e.forEach(((i,s)=>{t=s===e.length-1,Re.filtersUpdate(i,t)}))}}const _=Ze("sort");if(_){const e=(m=Re.get("sortOptions"),g=_,[...m].filter((e=>e.key===g.key&&e.order===g.order)));e.length>0&&Re.set("sortCurrent",e[0])}var m,g;(e=>{const{campaign_id:t,campaign_name:i,campaign_creative:s=null,campaign_position:n}=e,r=window.document.getElementById("filtersPLP");if(s)G(r,{id:t,name:i,position:n,creative:s});else{const{campaign:t=null}=e;t&&G(r,t)}})(r),t(new CustomEvent("switchProductsPage"))}},switchProductsPage:{nextState:function(e){return nt(Re)||rt(Re)?Ke(e):Ue(e)}},onMergeDataError:{nextState:function(e){return Je(e)}},onFilter:{process:(e,t)=>{Xe("filters",Re.get("filtersSelected")),Xe("sort",{key:Re.get("sortCurrent").key,order:Re.get("sortCurrent").order}),t(new CustomEvent("switchProductsPage")),et({isSorted:nt(Re),isFiltered:rt(Re),sortKey:Re.get("sortCurrent").key,sortOrder:Re.get("sortCurrent").order,filtersSelected:Re.get("filtersSelected")})}},onSort:{process:(e,t)=>{Xe("filters",Re.get("filtersSelected")),Xe("sort",{key:Re.get("sortCurrent").key,order:Re.get("sortCurrent").order}),t(new CustomEvent("switchProductsPage")),et({isSorted:nt(Re),isFiltered:rt(Re),sortKey:Re.get("sortCurrent").key,sortOrder:Re.get("sortCurrent").order,filtersSelected:Re.get("filtersSelected")})}},onloadFilter:{process:function(e,t){t(new CustomEvent("onloadFilterSuccess",{detail:{e:e}}))}},onloadFilterSuccess:{nextState:function(e){return Ye(e)}},onloadFilterError:{nextState:function(e){return Je(e)}}},ot=(e,t,i=null)=>{let s=new CustomEvent(e,{detail:{value:t,fn:i}});lt(s)};const lt=e=>{at[e.type].process(e,ct)},ct=e=>{at[e.type].nextState(e)};customElements.get("plp-filter-cta")||customElements.define("plp-filter-cta",class extends a{constructor(...e){super(...e),this.bubbleElement=null}static get observedAttributes(){return["data-filter-counter"]}attributeChangedCallback(e,t,i){null!=i&&i.length>0&&i!==t&&"data-filter-counter"===e&&this.updateBubbleCounter(i)}onStart(){this.template=`<nb-cta id='plp-filter' variation='plpFilter' icon_right='filter'>${this.props.cta_filter_label}</nb-cta>`}onReady(){document.getElementById("plp-filter").addEventListener("click",(()=>{ot("onloadFilter",{})})),this.buttonElement=this.querySelector("nb-cta button"),this.bubbleElement=document.createElement("div"),this.bubbleElement.classList.add("t-2xs-700"),this.bubbleElement.classList.add("bubbleCounter"),this.bubbleElement.innerHTML="0",this.firstChild.firstChild.appendChild(this.bubbleElement)}updateBubbleCounter(e){if(!this.bubbleElement)return null;this.bubbleElement.innerHTML=e,"0"===e?this.buttonElement.classList.remove("bubbleActive"):this.buttonElement.classList.add("bubbleActive")}});function dt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}customElements.get("plp-filter-links")||customElements.define("plp-filter-links",class extends a{onStart(){const e=Re.innerWidth<768;this.template=`<nb-slider-menu\n                            a11y_slider_previous_button="${this.props.a11y_slider_previous_button}"\n                            a11y_slider_next_button="${this.props.a11y_slider_next_button}"\n                            navigation="${!e}"\n                            data-ref="navLink">\n                            ${this.renderLinksList()}\n                        </nb-slider-menu>`}renderLinksList(){const{navigation:e=[]}=this.props;return e.map((({link:e="",icon_left:t="",seo_label:i="",tracking_label:s="",label:n="",selected:r=!1})=>`<nb-link\n                                link='${e}'\n                                phantom='true'\n                                color='black'\n                                selected=${r}\n                                ${i&&`seo_label='${i}'`}\n                                ${s&&`tracking_label='${s}'`}\n                                ${t&&`icon_left='${t}'`}\n                    >${n}</nb-link>`)).join("")}});var ut=0;function ht(e){return"__private_"+ut+++"_"+e}var pt=ht("SORT_MENU_ID");customElements.get("plp-filter-sort")||customElements.define("plp-filter-sort",class extends a{constructor(){super(),Object.defineProperty(this,pt,{writable:!0,value:"plp-sort-menu"}),this.formatSortSeprator="::",Re.subscribe(this.componentUpdated.bind(this)),this.sortButton={}}onStart(){this.props=this._createProps(document.getElementById("filtersPLP").parentElement.attributes);const{label_sort_by:e="Sort By",aa_description_sort_by:t="You can select different sorting values from this listbox. To interact with this listbox press SPACE or ENTER key.",aa_listbox_description_sort_by:i="You can navigate through the options using UP or DOWN arrows keys. To exit this listbox press ESCAPE key.",aa_select_description_sort_by:s="To select this option press SPACE or ENTER key.",label_close_sort_by:n="Close"}=this.props,r=Re.get("sortOptions").map((e=>({label:e.label,value:this._formatSortValue(e.key,e.order),checked:e.checked})));Re.get("sortCurrent").key!==Re.get("sortOptions")[0].key&&r.forEach((e=>{e.checked=e.value===this._formatSortValue(Re.get("sortCurrent").key,Re.get("sortCurrent").order)}));const a={label:e,aa_description:t,aa_listbox_description:i,aa_select_description:s,icon_option:"check",label_close:n,options:r};this.template=`<nb-dropdown id="${dt(this,pt)[pt]}" data='${d(a)}'/>`}onReady(){document.getElementById(dt(this,pt)[pt]).addEventListener("WEB_COMPONENT_SORT_BY_CHANGE",(e=>{const[t,i]=e.detail.selected.value.split(this.formatSortSeprator);Re.set("sortCurrent",{key:t,order:i}),ot("onSort")})),this.sortButton=document.getElementById(dt(this,pt)[pt])}componentUpdated(){const{key:e,order:t}=Re.get("sortCurrent");this.sortButton.setSelected(this._formatSortValue(e,t)),this.sortButton.render()}onDestroy(){Re.unsubscribe(this.componentUpdated)}_formatSortValue(e,t){return`${e}${this.formatSortSeprator}${t}`}});customElements.get("plp-filter")||customElements.define("plp-filter",class extends a{static get observedAttributes(){return["data-request","data-filter-counter"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&("data-request"===e?this.updateComponent():"data-filter-counter"===e&&document.getElementById("plp-filter-cta").setAttribute("data-filter-counter",i))}onStart(){this.props=this._createProps(this.parentElement.attributes),this.classList.add("plp-filter")}updateComponent(){const e=Re.get("nav_links"),t=`<div class='plp-filter-restrict'>\n                        <plp-filter-cta\n                            id="plp-filter-cta"\n                            cta_filter_label="${this.props.copywriting?.cta_filter_label||this.props.cta_filter_label}"\n                            data-filter-counter="0"\n                        ></plp-filter-cta>\n                        <plp-filter-links\n                            data = '${d({navigation:e,a11y_slider_previous_button:this.props.a11y_slider_previous_button,a11y_slider_next_button:this.props.a11y_slider_next_button})}'\n                        ></plp-filter-links>\n                        <plp-filter-sort></plp-filter-sort>\n                    </div>`;this.loadTemplate(t)}});const bt=(()=>{let e=null,t=0;const i=()=>{const i=e.getAttribute("sticky")||"false";let s=0,n=!1,r={};for(var a=0;a<e.parentElement.childNodes.length&&(e.parentElement.childNodes[a].tagName&&e.parentElement.childNodes[a].tagName===e.tagName&&(r=e.parentElement.childNodes[a+2],r&&(s=r.offsetTop-80,n=!0)),!n);a++);n&&0===s&&(s=e.parentElement.offsetTop+e.parentElement.offsetHeight);const o=window.scrollY-s>0;"true"===i!==o&&(e.setAttribute("sticky",o),t>0&&(document.body.style.paddingTop=o?t+"px":"0px"))},s=()=>{window.addEventListener("scroll",i)},n=()=>{window.removeEventListener("scroll",i)};return{initialize:(n,r=t)=>{e=n,t=r,e.setAttribute("sticky","false"),e.classList.add("nb-sticky-container"),i(),s()},destroy:()=>{n()},updatePosition:(t=0)=>{const i=document.querySelector(".Header__top")?.getBoundingClientRect()||{height:0,y:0},s=i.height,n=`${i.y+s+t}px`;return e.style.top=n,0}}})();var _t=e=>{const{a11y_slider_previous_button:t,a11y_slider_next_button:i}=e,s=Re.get("nav_links"),n=(({bubbles:e,a11y_slider_previous_button:t,a11y_slider_next_button:i})=>{let s="";return e&&(s=d({a11y_slider_previous_button:t,a11y_slider_next_button:i,bubbles:e,customEventAction:"PLP Content Tab"})),s})({bubbles:Re.get("bubbles"),...e});let r=`<nb-navigation-bubbles data='${n}'></nb-navigation-bubbles>`;const a=(e=>{let t="";return e&&(t=d({navigation:e})),t})(s);return r+=`<nb-plp-sticky-bar\n                data="${a}"\n                a11y_slider_previous_button="${t}"\n                a11y_slider_next_button="${i}"\n                navigation_bubbles="${n}"\n            ></nb-plp-sticky-bar>`,r},mt=ht("isSticky");customElements.get("plp-navigation")||customElements.define("plp-navigation",class extends a{constructor(...e){super(...e),Object.defineProperty(this,mt,{writable:!0,value:!0})}onStart(){this.props=this._createProps(this.parentElement.attributes),dt(this,mt)[mt]&&bt.initialize(this,0)}static get observedAttributes(){return["sticky","data-request"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&("sticky"===e&&dt(this,mt)[mt]&&bt.updatePosition(),"data-request"===e&&this.updateComponent())}updateComponent(){const e=_t(this.props.copywriting?this.props.copywriting:this.props);this.loadTemplate(e)}onDestroy(){dt(this,mt)[mt]&&bt.destroy()}});var gt=(e,t="")=>{const i={...e,rendererName:t};i.price=Re.priceFormatter.short(Re.currency,e.price),i.price_per_capsule&&(i.price_per_capsule=Re.priceFormatter.short(Re.currency,e.price_per_capsule)),i.intensity_label=Re.translations["productlistrespblock.capsule.a11y.intensity"],i.variation=p;const s=(({type:e})=>{let t="nb-sku";return"capsule"===e?t="nb-sku-coffee":"machine"===e?t="nb-sku-machine":"accessory"===e?t="nb-sku-accessory":"giftcard"===e&&(t="nb-sku-gift-card"),t})(i);return`<${s}\n                id="${i.sku}"\n                data="${d(i)}"\n                ${i.highlighted?`highlighted="${i.highlighted}"`:""}\n           ></${s}>`};customElements.get("plp-results-chip")||customElements.define("plp-results-chip",class extends a{onStart(){const{icon_right:e,variation:t,label:i,a11y_label:s,color:n}=this.props,r=n?`<div class="chip-color" style="background:${n}"></div>`:"";this.template=`<nb-cta\n                    icon_right="${e}"\n                    variation="${t}"\n                    aria_label_before="${s}"\n             >\n                    ${r}\n                    ${i}\n             </nb-cta>`}onReady(){const{value:e,type:t,label:i}=this.props;this.addEventListener("click",(()=>{const s={key:t,value:e,selected:!1,label:i};Re.filtersUpdate(s),this.remove(),ot("onFilter")}))}});customElements.get("plp-results")||customElements.define("plp-results",class extends a{onStart(){this.props=this._createProps(this.parentElement.attributes),this.productListBkp=[],this.classList.add("plp-results")}static get observedAttributes(){return["data-request"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&"data-request"===e&&this.updateComponent()}updateComponent(){if(this.arraysAreEqual(this.productListBkp,Re.productsListFiltered()))return null;this.productListBkp=Re.productsListFiltered();let e=(e=>{const{header_result_label:t="Currently shopping by",a11y_header_result_label_button:i="Reset filter",header_result_label_reset:s="Reset all",a11y_header_result_label_reset:n="Filters",header_result_label_results:r="Results",header_result_label_results_zero:a="",header_result_label_results_one:o="",a11y_header_result_label_results:l="With your filters activated, you have currently"}=e,c=Re.productsFilteredCount();let d='<nb-container element_class="plp-results-header" contrast="light">';return Re.filtersSelectedCount()>0&&(d+=`<p class="t-sm-400-sl cb-title">${t}</p>`,Re.filtersSelectedWithLabel().forEach((e=>{d+=`<plp-results-chip\n                    icon_right="close-2"\n                    variation="secondary"\n                    value="${e.value}"\n                    type="${e.key}"\n                    label="${e.label}"\n                    color="${e.color||""}"\n                    a11y_label="${i}"\n             >${e.label}</plp-results-chip>`}))),d+=`<nb-link\n                  id="nb-plp-filter-results-reset-all"\n                  size="small"\n                  color="black"\n                  aria-label="${n}"\n             >\n                  ${s}\n             </nb-link>`,d+=`<p class="t-xs-700-caps-sl cb-results"><span class="sr-only">${l}</span> <span>${c}</span> ${0===Re.filtersSelectedCount()?a:1===Re.filtersSelectedCount()?o:r}:</p>`,d+="</nb-container>",d})(this.props);e+='<nb-container element_class="plp-grid" className="plp-grid--results-list">',Re.productsListFiltered().forEach((t=>{e+=gt(t,"results")})),e+="</nb-container>",this.loadTemplate(e,!0),document.querySelector("#nb-plp-filter-results-reset-all")?.addEventListener("click",this.resetClick)}arraysAreEqual(e,t){return e===t||e.length===t.length&&e.every(((e,i)=>e===t[i]))}onDestroy(){document.querySelector("#nb-plp-filter-results-reset-all")?.removeEventListener("click",this.resetClick)}resetClick(){Re.filtersReset(),ot("onFilter")}});customElements.get("plp-products")||customElements.define("plp-products",class extends a{static get observedAttributes(){return["data-request"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&"data-request"===e&&this.updateComponent()}updateComponent(){const e=Re.get("products").reduce(((e,t)=>(e+=(e=>{const{id:t=null,background_retina:i,background_desktop:s,background_mobile:n,background_tablet:r,contrast:a="dark",name:o=null,description:l,products:c=[]}=e;return`<div class='plp-category' data-id="${t}">\n                <nb-container\n                    classname="plp-category--header"\n                    contrast='${a}'\n                    background_retina='${i}'\n                    background_desktop='${s}'\n                    background_mobile='${n}'\n                    background_tablet='${r}'\n                >\n                    <header>\n                        ${o?`<h2 class="h-2xl-700-sl plp-category--title">${o}</h2>`:""}\n                        <div class="plp-category--description">\n                            ${l?`<p class="description t-md-400">${l}</p>`:""}\n                        </div>\n                    </header>\n                </nb-container>\n                <nb-container classname="plp-category--products" contrast='light'>\n                    <div class="plp-category--segment">\n                        <div class='plp-category--side'></div>\n                        <div class='plp-category--center'>\n                          <div class="plp-grid">\n                              ${c.map((t=>gt(t,e))).join("")}\n                            </div>\n                        </div>\n                    </div>\n                </nb-container>\n            </div>`})(t),e)),"");this.loadTemplate(e)}});class ft extends a{constructor(){super(),this.dataTransformService=()=>[],this.dataFiltersService=()=>[],this.dataSortService=()=>[]}static get observedAttributes(){return["data-loaded"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&"data-loaded"===e&&ot("onMergeData",{filtersService:this.dataFiltersService,productService:this.dataTransformService,dataSortService:this.dataSortService,pageBuilderProps:this.props})}onStart(){ot("onload",{plpType:this.plpType}),this.classList.add("plp-app"),this.classList.add(`plp-app-${this.plpType}`),this.props.options&&this.props.options.items_per_row&&this.props.options.items_per_row>"3"&&this.classList.add(`plp-row-${this.props.options.items_per_row}`),this.template='\n            <plp-filter id="filtersPLP" style="display: none;"></plp-filter>\n            <plp-navigation id="navigationPLP" style="display: none;"></plp-navigation>\n            <plp-products id="productsListPLP" style="display: none;"></plp-products>\n            <plp-results id="productsResultsPLP" style="display: none;"></plp-results>\n        '}}var vt=ht("id"),yt=ht("name"),kt=ht("description"),wt=ht("products"),Et=ht("capacityLabel"),Ct=ht("detailsIcon"),Lt=ht("icon"),$t=ht("rangeLink"),St=ht("subCategories"),Pt=ht("superCategories"),Ot=ht("url"),At=ht("createdAt"),Tt=ht("updatedAt"),xt=ht("background_retina"),Nt=ht("background_desktop"),It=ht("background_mobile"),Mt=ht("background_tablet"),Bt=ht("contrast"),Dt=ht("isSegment");class Ft extends class{constructor(e,t){Object.defineProperty(this,vt,{writable:!0,value:""}),Object.defineProperty(this,yt,{writable:!0,value:""}),Object.defineProperty(this,kt,{writable:!0,value:""}),Object.defineProperty(this,wt,{writable:!0,value:[]}),Object.defineProperty(this,Et,{writable:!0,value:null}),Object.defineProperty(this,Ct,{writable:!0,value:null}),Object.defineProperty(this,Lt,{writable:!0,value:null}),Object.defineProperty(this,$t,{writable:!0,value:null}),Object.defineProperty(this,St,{writable:!0,value:[]}),Object.defineProperty(this,Pt,{writable:!0,value:[]}),Object.defineProperty(this,Ot,{writable:!0,value:""}),Object.defineProperty(this,At,{writable:!0,value:new Date}),Object.defineProperty(this,Tt,{writable:!0,value:new Date}),Object.defineProperty(this,xt,{writable:!0,value:"/shared_res/agility/next-components/assets/backgrounds/barista_creation_range_XL.jpg"}),Object.defineProperty(this,Nt,{writable:!0,value:"/shared_res/agility/next-components/assets/backgrounds/barista_creation_range_L.jpg"}),Object.defineProperty(this,It,{writable:!0,value:"/shared_res/agility/next-components/assets/backgrounds/barista_creation_range_S.jpg"}),Object.defineProperty(this,Mt,{writable:!0,value:""}),Object.defineProperty(this,Bt,{writable:!0,value:"dark"}),Object.defineProperty(this,Dt,{writable:!0,value:!1}),dt(this,vt)[vt]=e.id||dt(this,vt)[vt],dt(this,yt)[yt]=e.name||dt(this,yt)[yt],dt(this,Et)[Et]=e.capacityLabel||dt(this,Et)[Et],dt(this,kt)[kt]=e.description||dt(this,kt)[kt],dt(this,Ct)[Ct]=e.detailsIcon||dt(this,Ct)[Ct],dt(this,Lt)[Lt]=e.icon||dt(this,Lt)[Lt],dt(this,$t)[$t]=e.rangeLink||dt(this,$t)[$t],dt(this,St)[St]=e.subCategories||dt(this,St)[St],dt(this,Pt)[Pt]=e.superCategories||dt(this,Pt)[Pt],dt(this,Ot)[Ot]=e.url||dt(this,Ot)[Ot],dt(this,Nt)[Nt]=t?.background_desktop||dt(this,Nt)[Nt],dt(this,It)[It]=t?.background_mobile||dt(this,It)[It],dt(this,xt)[xt]=t?.background_retina||dt(this,xt)[xt],dt(this,Mt)[Mt]=t?.background_tablet||dt(this,Mt)[Mt],dt(this,Bt)[Bt]=t?.contrast||dt(this,Bt)[Bt]}get id(){return dt(this,vt)[vt]}get products(){return dt(this,wt)[wt]}set products(e){dt(this,wt)[wt]=e}get name(){return dt(this,yt)[yt]}get description(){return dt(this,kt)[kt]}get contrast(){return dt(this,Bt)[Bt]}get background_desktop(){return dt(this,Nt)[Nt]}get background_mobile(){return dt(this,It)[It]}get background_retina(){return dt(this,xt)[xt]}get background_tablet(){return dt(this,Mt)[Mt]}isProductCategory(){return!dt(this,Dt)[Dt]&&dt(this,wt)[wt]&&dt(this,wt)[wt].length>0}}{constructor(e,t){super(e,t)}}class Ht extends class{constructor(e){if(this.id="",this.name="",this.available=!0,this.cupSizes=[],this.description=null,this.flavors=[],this.headline="",this.hidePrice=!1,this.image_alt_text="",this.image="",this.inStock=!0,this.internationalId="",this.internationalName="",this.legacyId="",this.maxOrderQuantity=null,this.packagingType=null,this.price=null,this.pushRatingEnabled=!1,this.ranges=[],this.salesMultiple=null,this.technologies=[],this.type="",this.unitQuantity=50,this.url="",this.labels=[],this.category_name="",this.id=e.id||this.id,this.name=e.name||this.name,this.available=e.available||this.available,this.cupSizes=e.cupSizes||this.cupSizes,this.description=e.description||this.description,this.flavors=e.flavors||this.flavors,this.headline=e.headline||this.headline,this.hidePrice=e.hidePrice||this.hidePrice,this.image_alt_text=e?.image?.altText||this.image_alt_text,this.image=e?.image?.url||this.image,this.inStock=e.inStock||this.inStock,this.internationalId=e.internationalId||this.internationalId,this.internationalName=e.internationalName||this.internationalName,this.legacyId=e.legacyId||this.legacyId,this.maxOrderQuantity=e.maxOrderQuantity||this.maxOrderQuantity,this.packagingType=e.packagingType||this.packagingType,this.price=e.price||this.price,this.pushRatingEnabled=e.pushRatingEnabled||this.pushRatingEnabled,this.ranges=e.ranges||this.ranges,this.salesMultiple=e.salesMultiple||this.salesMultiple,this.technologies=e.technologies||this.technologies,this.type=e.type||this.type,this.unitQuantity=e.unitQuantity||this.unitQuantity,this.url=e.url||this.url,null!=e.labels)try{this.labels=e.labels.map((e=>JSON.parse(e)))}catch(e){console.error("Wrong JSON format in HMC label categories capsule-range-label",e)}const t=e.categoryId?e.categoryId.split("/"):[""];this.category_name=t[t.length-1]}}{constructor(e,t){super(e),this.sku="",this.longSku="",this.slides=[],this.show_slider=!1,this.in_stock=!0,this.sales_multiple=0,this.bundled=!1,this.logos=[],this.is_headline_hidden="",this.a11y_price="",this.a11y_product_card="",this.show_ratings="",this.minimum_rating="",this.a11y_extra_color="",this.shop_similar="",this.label_sleeve="",this.label_sleeves="",this.label_capsules="",this.intensity=null,this.a11y_intensity_max="",this.label_decaffeinato="",this.show_sleeve_price=!1,this.show_sleeve=!1,this.price_per_capsule=null,this.final_price=null,this.capsule_price_label="",this.capsule_price_syntax="{capsule_price_label}: {price_per_capsule}",this.strikethrough_price="",this.sleeve_syntax="{numberOfSleeves} {sleeveLabel} ({quantity} {label_capsules})",this.number_of_sleeves="",this.number_of_capsules="",this.show_capsule_price=!1,this.additional_message="",this.additional_message_icon="",this.additional_message_link={},this.highlighted=!1,this.bundle_details={};const{alt_fair_trade:i="",alt_vertuo_next:s="",alt_organic:n="",alt_rainforest:r="",alt_sustainability:a="",alt_q_certification_arabica:o="",a11y_price:l="",a11y_product_card:c="",a11y_extra_color:d,show_ratings:u,minimum_rating:h,shop_similar:p}=t.copywriting||t,{show_sleeve:b=!1,label_sleeve:_="",label_sleeves:m="",label_capsules:g="",show_sleeve_price:f=!1,capsule_price_label:v,capsule_price_syntax:y,is_headline_hidden:k=!1,sleeve_syntax:w="{numberOfSleeves} {sleeveLabel} ({quantity} {label_capsules})",label_decaffeinato:E="",a11y_intensity_max:C=""}=t.options||t;this.sku=this.internationalId||"",this.longSku=this.id||"",null!=this.slides&&(this.show_slider="true"),this.in_stock=this.inStock,delete this.inStock,this.intensity=e.intensity||this.intensity,this.min_intensity=t.min_intensity,this.max_intensity=t.max_intensity,this.sales_multiple=e.salesMultiple,this.logos=[],null!=e.onlyVertuoNext&&this.logos.push({name:"only_vertuo_next",alt:s}),null!=e.fairTrade&&this.logos.push({name:"fair_trade",alt:i}),null!=e.organicEu&&this.logos.push({name:"is_organic",alt:n}),null!=e.rainforest&&this.logos.push({name:"is_rainforest",alt:r}),null!=e.sustainability&&this.logos.push({name:"is_sustainable",alt:a}),null!=e.arabica&&this.logos.push({name:"is_q_certified_arabica",alt:o}),this.is_headline_hidden=k,this.a11y_price=l,this.a11y_product_card=c,this.show_ratings=u,this.minimum_rating=h,this.a11y_extra_color=d,this.shop_similar=p,this.label_sleeve=_,this.label_sleeves=m,this.label_capsules=g,this.a11y_intensity_max=C,this.label_decaffeinato=E,this.sleeve_syntax=w,this.show_sleeve_price=f||this.show_sleeve_price,this.show_sleeve=b||this.show_sleeve,this.capsule_price_label=v||this.capsule_price_label,this.capsule_price_syntax=y||this.capsule_price_syntax,this.strikethrough_price=e.strikethrough_price||this.strikethrough_price,this.price_per_capsule=e.price_per_capsule||this.price_per_capsule,this.price=this.getPrice(e),this.number_of_sleeves=e.number_of_sleeves||this.number_of_sleeves,this.number_of_capsules=e.number_of_capsules||this.number_of_capsules,this.show_capsule_price=e.show_capsule_price||this.show_capsule_price,this.additional_message=e.additional_message||this.additional_message,this.additional_message_icon=e.additional_message_icon||this.additional_message_icon,this.additional_message_link=e.additional_message_link||this.additional_message_link,this.highlighted=e.highlighted||this.highlighted,this.bundled=this.isBundled(),this.bundle_details=e.bundle_details||this.bundle_details}getPrice(e){return e.final_price||0===e.final_price?e.final_price:e.price||0===e.price?e.price:this.final_price}isBundled(){return!(this.sales_multiple>1&&1===this.unitQuantity)&&(1===this.sales_multiple&&this.unitQuantity>1)}}var qt=(e,t,i,s,n=null,r=[])=>{if(!e.data)return[];let a=r;const{categories:o,productGroups:l,enabledTechnologies:c}=e.data.configuration.eCommerceData;r&&r.length||(a=e.data.configuration.eCommerceData.products);const{translations:d}=e.data.configuration;(({categories:e,productGroups:t,products:i})=>{const s=we(e),n=t.filter((e=>s.some((t=>t.id===e.categoryId))));n.forEach((e=>{const t=s.find((t=>t.id===e.categoryId));e.productIds.forEach((e=>{const s=i.find((t=>t.id===e));s.labels=s.labels||[],s.labels.push(t.description)}))})),n.forEach((e=>{const i=t.findIndex((t=>t.categoryId===e.categoryId));t.splice(i,1)}))})({categories:o,productGroups:l,products:a});const u=[];t.categories=t.copywriting?t.copywriting.categories:t.categories,o.forEach((e=>{const n=t.categories.find((t=>t.category_id===e.id)),r=new i(e,n);l.forEach((i=>{i.categoryId===e.id&&i.productIds.forEach((i=>{const n=a.find((e=>e.id===i));if(!n)return;n.categoryId=e.id;const o=new s(n,t);r.products.push(o)}))})),r.isProductCategory()&&u.push(r)}));const h=t.copywriting?t.copywriting.nav_links:t.nav_links,p=t.copywriting?t.copywriting.navigation_bubbles.bubbles:t.navigation_bubbles.bubbles,b=((e,t)=>{const i="gran-lungo-vertuo-capsule",s="brand_coffee_capsule_pro",n=e=>e.map((({id:e,url:t,name:i,isSelected:s})=>({link:t,label:i,seo_label:i,icon_left:r(e.split("/").pop()),selected:s}))),r=e=>{switch(e){case"vertuo":return i;case"pro":return s;default:return"original"}};if(!e.length&&t.length)return n(t);if(!t.length)return e;const a=[...e].filter((e=>{if("coffee"!==e.icon_left&&e.icon_left!==i&&e.icon_left!==s)return e}));return[...n(t),...a]})(h,c);let _;return _=n?n(t):((e,t,i)=>{const s=t.map((e=>e.categoryId)),n=[],r=e.map((e=>{const t={...e,link:e.link.replace("#","")};if(s.includes(t.link))return t})).filter((e=>void 0!==e));return s.forEach((e=>{const t=r.find((({link:t})=>t===e));if(t)n.push(t);else{const t=i.find((t=>t.id===e));if(t){const{name:e,id:i,icon:s}=t,r={link:i,tracking_label:e,label:e,visual:{src:s?.url||"",alt:s?.altText||e}};n.push(r)}}})),n})(p,l,o),{categories:u,translations:d,enabledTechnologies:c,categoriesExtraData:o,nav_links:b,bubbles:_}};let zt=100,Rt=null;var jt=e=>(null!==Rt||e.reduce(((e,t)=>e.concat(t.products)),[]).map((e=>{e&&e.intensity&&(e.intensity<zt&&(zt=e.intensity),e.intensity>Rt&&(Rt=e.intensity))})),{min:zt,max:Rt});const Vt=(e,t)=>e.options?e.options[t]:e[t];var Wt=(e,t)=>{const i=({categories:e,productGroups:t,products:i},s,n)=>{const r=s(e);if(!r)return;const a=t.find((e=>r.id===e.categoryId));if(!a)return;a.productIds.forEach((e=>{const t=i.find((t=>t.id===e));n(t,r)}));const o=t.findIndex((e=>e.categoryId===a.categoryId));t.splice(o,1)};i(e.data.configuration.eCommerceData,Ce,((e,t)=>e.fairTrade=t.name)),i(e.data.configuration.eCommerceData,Ee,(e=>e.highlighted=!0)),i(e.data.configuration.eCommerceData,ge,(e=>e.onlyVertuoNext=!0)),i(e.data.configuration.eCommerceData,fe,(e=>e.organicEu=!0)),i(e.data.configuration.eCommerceData,ve,(e=>e.rainforest=!0)),i(e.data.configuration.eCommerceData,ye,(e=>e.sustainability=!0)),i(e.data.configuration.eCommerceData,ke,(e=>e.arabica=!0));const{min:s,max:n}=jt(e.data.configuration.eCommerceData.categories);return t.min_intensity=s,t.max_intensity=n,e.data.configuration.eCommerceData.products.forEach((e=>{const i=t.options?t.options.show_sleeve_price:t.show_sleeve_price,{showCapsulePrice:s,price_per_capsule:n,price:r}=function(e,t,i){let s,n,r=e;const a=i(t);return e&&"capsule"===t.type&&!a?(s=!1===a?t.price*t.salesMultiple:t.price,s=Math.round(100*s)/100,n=t.price):(r=!1,s=t.price),{showCapsulePrice:r,price:s,price_per_capsule:n}}(i,e,v);e.show_sleeve_price=i,e.label_sleeve=Vt(t,"label_sleeve"),e.label_sleeves=Vt(t,"label_sleeves"),e.label_capsules=Vt(t,"label_capsules"),e.show_sleeve=Vt(t,"show_sleeve"),e.capsule_price_label=Vt(t,"capsule_price_label"),e.capsule_price_syntax=Vt(t,"capsule_price_syntax"),e.price_per_capsule=n,e.final_price=r,e.show_capsule_price=s,t.products&&t.products.length&&t.products.forEach((t=>{t.sku&&t.sku===e.legacyId&&(e.strikethrough_price=t.strikethrough_price,e.number_of_sleeves=t.number_of_sleeves,e.number_of_capsules=t.number_of_capsules,e.highlighted=t.highlighted,e.additional_message=t.additional_message,e.additional_message_icon=t.additional_message_icon,e.additional_message_link=t.additional_message_link||{},t.api_override&&(e.name=t.api_override.name||e.name,e.headline=t.api_override.headline||e.headline,e.description=t.api_override.description||e.description),t.bundle_details&&(e.bundle_details=t.bundle_details||{}))}))})),qt(e,t,Ft,Ht)};const Gt=e=>{const t=(e=>{const t=e.replace("capsule-aromatic-","").replace("recipe-","");return["peppery"].includes(t)?"spicy":["woody"].includes(t)?"wood":["sweet","caramel"].includes(t)?"sugar":["maltedCereal"].includes(t)?"malted":["roastedCereal","veryRoasted"].includes(t)?"roasted":["hintOfFruity","fruityWiney"].includes(t)?"fruity":["citric"].includes(t)?"citrus":["chocolate"].includes(t)?"cocoa":["nutty"].includes(t)?"hazelnut":t.toLowerCase()})(e?e.split("/")?.pop():"");let i=K.find((e=>t.split("-").includes(e.replace("notes-",""))));return i||(i="notes-default"),i};var Qt=ht("type"),Ut=ht("key"),Kt=ht("iconFn"),Yt=ht("filterFn"),Jt=ht("title"),Xt=ht("values"),Zt=ht("after"),ei=ht("before");class ti{constructor(e){Object.defineProperty(this,Qt,{writable:!0,value:""}),Object.defineProperty(this,Ut,{writable:!0,value:""}),Object.defineProperty(this,Kt,{writable:!0,value:{}}),Object.defineProperty(this,Yt,{writable:!0,value:{}}),Object.defineProperty(this,Jt,{writable:!0,value:""}),Object.defineProperty(this,Xt,{writable:!0,value:[]}),Object.defineProperty(this,Zt,{writable:!0,value:"</fieldset/>"}),Object.defineProperty(this,ei,{writable:!0,value:`<fieldset><legend class='${h.is.mobile?"t-sm-700-sl":"t-md-700-sl"}'>{title}</legend>`}),dt(this,Qt)[Qt]=e.type,dt(this,Ut)[Ut]=e.key,dt(this,Kt)[Kt]=e.iconFn?e.iconFn:null,dt(this,Yt)[Yt]=e.filterFn?e.filterFn:null;const t=e.title?e.title.toLowerCase():"Filter";dt(this,Jt)[Jt]=t.charAt(0).toUpperCase()+t.slice(1),dt(this,ei)[ei]=e.before?e.before:dt(this,ei)[ei],dt(this,Zt)[Zt]=e.after?e.after:dt(this,Zt)[Zt]}set values(e){dt(this,Xt)[Xt]=e}set after(e){dt(this,Zt)[Zt]=e}get after(){return dt(this,Zt)[Zt]}get values(){return dt(this,Xt)[Xt]}get type(){return dt(this,Qt)[Qt]}get filterFn(){return dt(this,Yt)[Yt]}get iconFn(){return dt(this,Kt)[Kt]}get key(){return dt(this,Ut)[Ut]}renderBefore(){return dt(this,ei)[ei].replace("{title}",dt(this,Jt)[Jt])}renderAfter(){return dt(this,Zt)[Zt]}pushValues(e){-1===(()=>dt(this,Xt)[Xt].findIndex((t=>t.value===e.value)))()&&dt(this,Xt)[Xt].push(e)}}var ii=ht("value"),si=ht("label"),ni=ht("filterType"),ri=ht("filterKey"),ai=ht("icon"),oi=ht("color"),li=ht("selected"),ci=ht("disabled");class di{constructor({value:e,label:t,filterType:i,filterKey:s,icon:n="",color:r="",selected:a=!1,disabled:o=!1}){Object.defineProperty(this,ii,{writable:!0,value:null}),Object.defineProperty(this,si,{writable:!0,value:null}),Object.defineProperty(this,ni,{writable:!0,value:null}),Object.defineProperty(this,ri,{writable:!0,value:null}),Object.defineProperty(this,ai,{writable:!0,value:""}),Object.defineProperty(this,oi,{writable:!0,value:""}),Object.defineProperty(this,li,{writable:!0,value:!1}),Object.defineProperty(this,ci,{writable:!0,value:!1}),e?t?i?s?(dt(this,ii)[ii]=e,dt(this,si)[si]=t,dt(this,ni)[ni]=i,dt(this,ri)[ri]=s,dt(this,ai)[ai]=n,dt(this,oi)[oi]=r,dt(this,li)[li]=a,dt(this,ci)[ci]=o):console.error("DefaultFilterChipType: filterKey is required"):console.error("DefaultFilterChipType: filterType is required"):console.error("DefaultFilterChipType: label is required"):console.error("DefaultFilterChipType: value is required")}set disabled(e){dt(this,ci)[ci]=!!e}set selected(e){dt(this,li)[li]=!!e}get filterType(){return dt(this,ni)[ni]}get value(){return"object"==typeof dt(this,ii)[ii]?dt(this,ii)[ii].join(","):dt(this,ii)[ii]}get label(){return dt(this,si)[si]}get color(){return dt(this,oi)[oi]}render(){return`<nb-chip\n                  data-filter-value="${dt(this,ii)[ii]}"\n                  data-filter-key="${dt(this,ri)[ri]}"\n                  data-filter-label="${dt(this,si)[si]}"\n                  checked="${dt(this,li)[li]}"\n                  disabled="${dt(this,ci)[ci]}"\n                  ${dt(this,ai)[ai]?`icon="${dt(this,ai)[ai]}"`:""}\n                  ${dt(this,oi)[oi]?`color="${dt(this,oi)[oi]}"`:""}\n                >${dt(this,si)[si]}</nb-chip>`}}var ui=(e,t,i)=>{if(!t)return console.error("createFilter.js No categories found in the data"),[];if(!e)return console.error("createFilter.js No Filter definition found in the variables"),[];const s=[];e.forEach((e=>{s.push(new ti(e))}));return t.reduce(((e,t)=>e.concat(t.products)),[]).map((e=>{s.forEach((t=>{"object"==typeof e[t.key]?e[t.key].map((e=>{const s=((e,t)=>{const i=e.find((e=>e.id===t));return i?{label:i.name,color:i.cssColorCode?i.cssColorCode:null,icon:i.icon?.icon}:null})(i,e);s&&t.pushValues(new di({value:e,label:s.label,filterType:t.type,filterKey:t.key,icon:t.iconFn&&t.iconFn(e),color:s.color?s.color:null}))})):t.pushValues(new di({value:e[t.key],label:"function"==typeof t.filterFn?t.filterFn(e[t.key]):e[t.key],filterType:t.type,filterKey:t.key,icon:t.iconFn&&t.iconFn(t.key)}))}))})),s};const hi=(e,t,i)=>{if(!e)return console.error("plp-coffe.filterIntensity.dto.js categories is not defined"),null;const s=new ti({type:"default",key:"intensity",title:i["productlistrespblock.filterlabels.intensity"]}),{min:n,max:r}=jt(e);return[{min:n,max:5,label:t.copywriting?t.copywriting.filter_group_intensity_light:t.filter_group_intensity_light,value:[1,2,3,4,5]},{min:6,max:8,label:t.copywriting?t.copywriting.filter_group_intensity_medium:t.filter_group_intensity_medium,value:[6,7,8]},{min:9,max:r,label:t.copywriting?t.copywriting.filter_group_intensity_intense:t.filter_group_intensity_intense,value:[9,10,11,12,13,14,15]}].map((e=>{s.pushValues(new di({value:e.value,label:e.label.replace("{range}",` ${e.min} - ${e.max}`),filterType:s.type,filterKey:s.key}))})),s},pi=(e,t,i,s)=>[hi(e,t,s),...ui([{type:"default",key:"cupSizes",title:s["productlistrespblock.filterlabels.cupsize"],iconFn:e=>e.match(/([^/]*)\/*$/)[0]},{type:"default",key:"flavors",title:s["productlistrespblock.filterlabels.aromatic"],iconFn:Gt}],e,i)],bi=e=>[{id:"default",label:e.dropdown_recommended_option_label,key:"recommended",order:"asc",checked:!0},{id:"sortPriceAscending",label:e.dropdown_price_ascending_option_label,key:"price",order:"asc",checked:!1},{id:"sortPriceDescending",label:e.dropdown_price_descending_option_label,key:"price",order:"desc",checked:!1},{id:"sortIntensityAscending",label:e.dropdown_intensity_ascending_option_label,key:"intensity",order:"asc",checked:!1},{id:"sortIntensityDescending",label:e.dropdown_intensity_descending_option_label,key:"intensity",order:"desc",checked:!1}];class _i extends ft{constructor(){super(),this.plpType="coffee",this.dataTransformService=Wt,this.dataFiltersService=pi,this.dataSortService=bi}}customElements.get("nb-plp")||customElements.define("nb-plp",_i);export{e as B,r as E,je as F,a as N,Ge as P,We as S,dt as _,Ve as a,Re as b,ht as c,i as d,s as e,_i as f,ot as h};
