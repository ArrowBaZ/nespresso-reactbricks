const e=e=>null==e;class t extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const t=e||this.attributes;let i;try{i=[...t].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});const e=[...t].find((e=>"data"===e.nodeName));return null==e?i:{...i,...JSON.parse(e.nodeValue)}}catch(e){console.log("ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const t=(e,i)=>{const s=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),r=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var a=Array.prototype.slice.call(i.childNodes),n=Array.prototype.slice.call(e.childNodes),o=a.length-n.length;if(o>0)for(;o>0;o--)a[a.length-o].parentNode.removeChild(a[a.length-o]);n.forEach((function(e,n){if(a[n])if(s(e)===s(a[n])){var o=r(e);if(o&&o!==r(a[n])&&(a[n].textContent=o),a[n].childNodes.length>0&&e.childNodes.length<1)a[n].innerHTML="";else{if(a[n].childNodes.length<1&&e.childNodes.length>0){var l=document.createDocumentFragment();return t(e,l),void a[n].appendChild(l)}e.childNodes.length>0&&t(e,a[n])}}else a[n].parentNode.replaceChild(e.cloneNode(!0),a[n]);else i.appendChild(e.cloneNode(!0))}))},i=(s=this.template,(new DOMParser).parseFromString(s,"text/html").body);var s;t(i,this)}loadTemplate(e="",t=!1){this.template=""===e?this.template:`${e}`,this.render(t)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",t);const i={get is(){const{innerWidth:e,devicePixelRatio:t}=window;return{mobile:e<768,mobile_tablet:e<1024,tablet:e>=768&&e<1024,desktop:e>=1024&&t<=1,retina:e>=1024&&t>1}},lt:e=>window.innerWidth<e},s=["upvote","19-bar","24-7-service","360-view","accessories-and-sweets","address-2","address","amex-card","android","apple-pay-card","apple-pay","apple","arrow-bottom","arrow-filled-down","arrow-left","arrow-right","arrow-top","assistance-alt","assistance-videos","assistance","boutique","brand_coffee_capsule-vl-carafe","brand_coffee_capsule-vl-double-espresso-gran-lungo","brand_coffee_capsule-vl-espresso","brand_coffee_capsule-vl-mug","brand_coffee_capsule_ol","brand_coffee_capsule_pro","brand_coffee_capsule_vl","brand_coffee_cereals","brand_coffee_citrus","brand_coffee_cocoa","brand_coffee_coffee-assortment","brand_coffee_coffee-discovery-set","brand_coffee_machines","brand_coffee_malted","brand_coffee_notes-herbal","brand_delivery_boutique-location","brand_delivery_delivery","brand_delivery_free_delivery","brand_delivery_package","brand_delivery_schedule_delivery","brand_general_coffee","brand_machines_auto_clean_system","brand_machines_automatic_off","brand_machines_digital_display","brand_machines_energy_class","brand_machines_fast_heat_up","brand_machines_low_water_alert","brand_machines_milk_frothing","brand_machines_pump_pressure_bar","brand_payment_credit_card","brand_payment_gift_card","brand_payment_invoice","brand_payment_secure","brand_services_assistance","brand_services_boutique","brand_services_easy_order","brand_services_help","brand_services_promotions","brand_services_recycling","brand_services_recycling_ol","brand_services_recycling_vl","brand_services_subscription","brand_services_sustainability","calendar","capsule-cupSize-Cappuccino-And-Latte-Macchiato","capsule-cupSize-Cortado-Cappuccino","capsule-cupSize-icedRecipe-vertuo","capsule-cupSize-icedRecipe","capsule-cupSize-alto","capsule-cupSize-carafe-vertuo","capsule-cupSize-coffee","capsule-cupSize-double-espresso-vertuo","capsule-cupSize-espresso-vertuo","capsule-cupSize-espresso","capsule-cupSize-gran-lungo","capsule-cupSize-lungo","capsule-cupSize-mug","capsule-cupSize-ristretto","capsule-cupSize-americano","capsule-cupSize-large-americano","check","chevron-down","chevron-left","chevron-right","chevron-up","check-mark","clock","close-2","close","coffee","coffee_capsule-ol_24","credit-card-flag","credit-card","delivery-fast","delivery-scheduled","delivery-standard","eco-mode","edit","error","espresso-vertuo-capsule","eye-closed","eye-opened","facebook","filter","find-us-alt","find-us","free-return","gift-card","globe","gran-lungo-vertuo-capsule","help","hero-chat","huawei","information-24","information","instagram","invoice","language","linkedin","link","live-chat","loading-nitro","loading","loan","logout","machine_machines_ol_24","machines-2","machines","mail","mastercard-card","mastercard","menu","minus-16","minus-24","minus-o","modal-alert","modal-check","more-info","nespresso-logo","nespresso-monogram","nespresso-professional-2","nespresso-professional","nespresso","notification","orders","original","package-box","payment-bcorp","payment-bvr","payment-google-pay","payment-ideal","payment-klarna","payment-lsv","payment-postfinance","payment-twint","paypal-card","paypal","phone","pin","pinterest","play-button","play-mini","play","plus-16","plus-24","plus-o","promotions","recycling-point","recycling","remove","search","secure","set-up","shopping-bag","signal-high","signal-low","signal-med","speed","star","rating","subscription-2","subscription","sustainability","tag","twitter","ui_payment_cash","ui_coffee_bergamot","ui_coffee_capsule-ol","ui_coffee_capsule-vl-carafe","ui_coffee_capsule-vl-double-espresso_gran-lungo","ui_coffee_capsule-vl-espresso","ui_coffee_capsule-vl-mug","ui_coffee_capsule-vl","ui_coffee_capsule_professional","ui_coffee_cardamom","ui_coffee_cocoa","ui_coffee_hazelnut","ui_coffee_honey","ui_coffee_notes-cereal","ui_coffee_notes-malted","ui_coffee_winey","ui_delivery_calendar","ui_delivery_clock","ui_general_alerts","ui_general_arrow-right","ui_general_check","ui_general_chevron-bottom","ui_general_chevron-left","ui_general_chevron-right","ui_general_chevron-top","ui_general_credit-card","ui_general_edit","ui_general_error","ui_general_eye-close","ui_general_eye-open","ui_general_faq","ui_general_filter","ui_general_gift-card","ui_general_globe","ui_general_information","ui_general_language","ui_general_link","ui_general_loading","ui_general_log-out","ui_general_map_view","ui_general_menu","ui_general_minus","ui_general_notification","ui_general_order","ui_general_play","ui_general_plus","ui_general_promotions","ui_general_remove","ui_general_search","ui_general_secure","ui_general_shopping-bag","ui_general_tag","ui_general_user-account","ui_general_warranty","ui_general_wifi","ui_general_x","ui_map_directions","ui_payment_invoice","ui_services_assistance","ui_services_delivery","ui_services_easy_order","ui_services_find-us","ui_services_free-return","ui_services_mail","ui_services_phone","ui_services_subscription","ui_sustainability_climate","ui_sustainability_recycling","ui_sustainability_recycling_ol","ui_sustainability_recycling_vl","ui_sustainability_social_sustainability","ui_user_member_status","ui_user_my-address","ui_user_my_information","ultra-compact","user-account","versatil-coffee-system","video-play","vertuo","visa-card","visa","warranty","youtube","services-anticipation-of-maintenance","services-assistance","services-avant-premiere","services-avant-premiere-ol","services-avant-premiere-vl","services-coffee-assortment","services-coffee-coffee-sample","services-coffee-discovery-set","services-coffee-experiences","services-contact-chat","services-contact-community-forum","services-contact-mobile","services-contact-sms","services-contact-video-assistance","services-contact-virtual","services-data-insight","services-delivery-boutique-location","services-delivery-boutique-pick-up","services-delivery-delivery","services-delivery-delivery-bike","services-delivery-delivery-fast","services-delivery-free-delivery","services-delivery-next-day-delivery","services-delivery-package","services-delivery-pick-up-points","services-delivery-schedule-delivery","services-easy-maintenance","services-easy-order","services-easy-stock-management","services-generic","services-gifting-card","services-help","services-orders","services-payments-credit-card","services-payments-gift-card","services-payments-invoice","services-phone","services-reorder","services-satisfied-or-reimbursed","services-services-boutique","services-subscription","services-vip-masterclass","services-voice-enabled","payments-cash","delivery-same-day-delivery","contact-voice-assistant-chatbot","contact-video-chat","contact-mobile-push-notification","contact-chat-bot","coffee-coffee-tasting","contact-video-assistance","filter-style_step-01","filter-style_step-02","filter-style_step-03","filter-style_step-04"].concat(["notes-almonds","notes-balanced","notes-bergamot","notes-berry","notes-biscuity","notes-blueberry","notes-cardamom","notes-cereal","notes-citrus","notes-cocoa","notes-default","notes-flowery","notes-fruity","notes-hazelnut","notes-herbal","notes-honey","notes-leather","notes-malted","notes-roasted","notes-spicy","notes-sugar","notes-winey","notes-wood","notes-brand-coffee-roasted","notes-brand-coffee-caramel","notes-brand-coffee-intense-roasted"]).concat(["machine_technology_machine-ol","machine_technology_machine-vl","machine_details_deluxe-version","machine_details_machine-tutorial-ol","machine_details_machine-tutorial-vl","machine_warranty_warranty-ol","machine_warranty_warranty-vl","machine_features_generic","machine_features_auto-clean-system","machine_features_automatic-off","machine_features_blend-specific-brewing","machine_features_bluetooth","machine_features_capsule-ejection-ol","machine_features_capsule-ejection-vl","machine_features_centrifusion","machine_features_cold-foam-ol","machine_features_cold-foam-vl","machine_features_descale-alert","machine_features_descale","machine_features_digital-display","machine_features_dimensions","machine_features_eco-mode","machine_features_energy-class","machine_features_fast-heat-up","machine_features_hot-foam-ol","machine_features_hot-foam-vl","machine_features_hot-milk","machine_features_hot-foam","machine_features_hot-water","machine_features_low-water-alert","machine_features_manual-lever","machine_features_milk-frothing","machine_features_mobile-push-notification","machine_features_one-touch","machine_features_power-off","machine_features_pump-pressure-bar","machine_features_rinse","machine_features_settings","machine_features_steam","machine_features_temperature-settings-invert","machine_features_temperature-settings","machine_features_temperature","machine_features_ultra-compact","machine_features_water-tank","machine_features_weight"]),r=({key:e="icon",type:t="string",title:i="Icon",list:r=["",...s],description:a="Add icon",default:n=""}={})=>{const o={};return o[e]={type:t,title:i,enum:r,description:a,default:n},o};r({key:"icon_left",title:"Left icon",default:""}),r({key:"icon_right",title:"Right icon",default:""});class a extends HTMLElement{constructor(){super(),this.contrast="light",this.defaultPosition=0,this.displayButtons=!0,this.displayNav=!0,this.displayCounter=!1,this.itemsPerSlide=1,this.overflow=!0,this.overflowOpacity=.25,this.boundPrevClick=this.onPrevClick.bind(this),this.boundNextClick=this.onNextClick.bind(this),this.boundNavClick=this.onNavClick.bind(this),this.boundScroll=this.onScroll.bind(this)}connectedCallback(){this.slot=this.innerHTML,this.props=(t=>{const i=(e=>e.find((e=>"data"===e.nodeName)))([...t]),s=[...t].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(e(i))return s;try{return{...s,...JSON.parse(i.nodeValue)}}catch(e){console.log("ERROR: No data",e)}})(this.attributes),this.render(),this.initSlider()}render(){this.innerHTML=`<div class='container'><div class='wrapper'><ul class='carousel'>${this.slot}</ul></div></div>`}renderButtons(){this.displayButtons&&0!==this.maxSlides&&(this.container.classList.add("hasButtons"),this.prevButton=this.renderButton("prev"),this.nextButton=this.renderButton("next"))}renderButton(e,t=!1){const i=t?this.contrast:this.buttonsContrast,s="prev"===e,r=document.createElement("nb-cta");return r.classList.add(e),((e,t)=>{for(let i in t)e.setAttribute(i,t[i])})(r,{variation:"navigation",contrast:i,size:"48",icon_right:s?"chevron-left":"chevron-right",label:this.a11y_labels[e]}),t?s?this.counter.prepend(r):this.counter.append(r):s?this.container.prepend(r):this.container.append(r),r}renderNav(){if(!this.displayNav||0===this.maxSlides)return;const e=document.createElement("nav");let t="";for(let e=0;e<=this.maxSlides;e++)t+=this.renderBullet(e);e.innerHTML=`${t}`,this.appendChild(e),this.navElements=this.querySelectorAll("nav button")}renderBullet(e){return`<button data-item='${e}' aria-label='${this.a11y_labels.nav} ${e}'><span></span></button>`}renderCounter(){this.displayCounter&&0!==this.maxSlides&&(this.counter=document.createElement("div"),this.counter.classList.add("counter"),this.counter.classList.add("t-sm-500"),this.counter.setAttribute("aria-hidden","true"),this.counter.innerHTML=`<span class='current'>${this.currentIndex+1}</span><span>/</span><span>${this.maxSlides+1}</span>`,this.prevButton=this.renderButton("prev",!0),this.nextButton=this.renderButton("next",!0),this.appendChild(this.counter))}renderSafariFix(){if(!this.overflow||!(()=>{const e=window.navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(e)})())return;const e=document.createElement("li");e.classList.add("safari-fix"),e.setAttribute("aria-hidden",!0);const t=(this.paddingCorrection-this.sliderGap)/16;e.style.setProperty("width",t+"rem"),this.carousel.appendChild(e)}initSlider(){const{options:e,a11y_labels:t}=this.props;this.options=e,this.a11y_labels=t,this.currentIndex=0,this.container=this.querySelector(".container"),this.wrapper=this.querySelector(".wrapper"),this.carousel=this.querySelector("ul"),this.slidesElements=this.querySelectorAll("li:not(.safari-fix)"),this.itemNumber=this.slidesElements.length;const i=this.getOption("contrast");void 0!==i&&(this.contrast=i),this.buttonsContrast=(e=>"light"===e?"dark":"light")(this.contrast),this.setAttribute("contrast",this.contrast);const s=this.getOption("default_position");void 0!==s&&(this.defaultPosition=s);const r=this.getOption("display_buttons");void 0!==r&&(this.displayButtons=r);const a=this.getOption("display_nav");void 0!==a&&(this.displayNav=a);const n=this.getOption("display_counter");void 0!==n&&(this.displayCounter=n),this.displayCounter&&(this.displayNav=this.displayButtons=!1);const o=this.getOption("items_per_slide");void 0!==o&&(this.itemsPerSlide=o);const l=this.getOption("overflow");void 0!==l&&(this.overflow=l),this.overflow&&this.container.classList.add("overflow");const c=this.getOption("overflow_opacity");void 0!==c&&(this.overflowOpacity=c),this.slideWidth=this.getOption("slide_width"),this.slideMinHeight=this.getOption("slide_min_height"),this.sliderGap=this.getOption("slider_gap"),this.maxSlides=this.itemNumber-this.itemsPerSlide,this.currentDirection="",this.lastDirection="",this.renderButtons(),this.renderNav(),this.renderCounter(),this.setCSSvariables(),this.getSliderPositions(),this.getOpacityParams(),this.setOpacity(),this.updateStates(),this.bindEvent(),this.gotoDefaultPosition(),this.renderSafariFix()}updateSlider(e,t=!1){this.getSliderPositions(),this.goSlider(parseInt(e),t)}updateStates(){this.setActiveButtons(),this.setActiveBullet(),this.setCounter(),this.setActiveSlides()}getOption(e){let t=null;return t=i.is.mobile?this.options.mobile[e]:i.is.tablet?this.options.tablet[e]:this.options.desktop[e],isNaN(t)?"true"===t||"false"!==t&&t:parseFloat(t)}getSliderPositions(){this.sliderPositions=[];const e=this.slidesElements[0].offsetLeft;this.querySelectorAll("li").forEach((t=>{this.sliderPositions.push(t.offsetLeft-e)}))}setCSSvariables(){if("auto"===this.slideWidth){const e=(this.container.clientWidth-(this.itemsPerSlide-1)*this.sliderGap)/this.itemsPerSlide;this.style.setProperty("--slide-width",e/16+"rem")}else void 0!==this.slideWidth&&this.style.setProperty("--slide-width",this.slideWidth/16+"rem");"auto"===this.slideMinHeight?this.style.setProperty("--slide-min-height","auto"):void 0!==this.slideMinHeight&&this.style.setProperty("--slide-min-height",this.slideMinHeight/16+"rem"),void 0!==this.sliderGap&&this.style.setProperty("--slider-gap",this.sliderGap/16+"rem"),this.style.setProperty("--items-per-slide",this.itemsPerSlide)}setActiveButtons(){(this.displayButtons&&0!==this.maxSlides||this.displayCounter)&&(this.prevButton.classList.remove("hide"),this.nextButton.classList.remove("hide"),0===this.currentIndex?this.prevButton.classList.add("hide"):this.currentIndex===this.maxSlides&&this.nextButton.classList.add("hide"))}setActiveSlides(){if(!this.overflow)return;this.slidesElements.forEach((e=>{e.classList.remove("active")}));let e=this.currentIndex;for(let t=0;t<this.itemsPerSlide;t++)this.slidesElements[e+t].classList.add("active")}goSlider(e,t=!1){void 0!==e&&(this.currentIndex=e),this.updateStates(),this.carousel.scrollTo({left:this.sliderPositions[this.currentIndex],behavior:t?"auto":"smooth"})}gotoDefaultPosition(){0===this.defaultPosition||this.defaultPosition>this.maxSlides+1||this.goSlider(this.defaultPosition,!0)}onScroll(){this.isScrolling&&clearTimeout(this.isScrolling),this.setOpacity(),this.isScrolling=setTimeout((()=>{const e=this.sliderPositions.indexOf(Math.round(this.carousel.scrollLeft));e>=0&&this.switchBullets(e,!0)}),100)}getOpacityParams(){this.overflow&&(this.paddingCorrection=parseInt(getComputedStyle(this.carousel).getPropertyValue("padding-left")),this.itemWidthAdjusted=this.slidesElements[0].offsetWidth+this.sliderGap)}setOpacity(){if(!this.overflow)return;const e=this.carousel.scrollLeft;this.slidesElements.forEach(((t,i)=>{let s=t.offsetLeft-this.paddingCorrection+this.itemWidthAdjusted,r=100;e>s?r=0:e>=this.itemWidthAdjusted*i?r=Math.round((s-e)/this.itemWidthAdjusted*100):e<s-(1+this.itemsPerSlide)*this.itemWidthAdjusted?r=0:e<=s-this.itemsPerSlide*this.itemWidthAdjusted&&(r=Math.round(100*(this.itemsPerSlide+1)-(s-e)/this.itemWidthAdjusted*100));const a=r/100;let n=Math.round(100*(a*(1-this.overflowOpacity)+this.overflowOpacity))/100;t.firstElementChild.style.setProperty("opacity",n)}))}switchBullets(e,t=!1){this.slidesElements[e]&&(this.currentIndex=e,t?this.updateStates():this.goSlider())}setActiveBullet(){this.displayNav&&0!==this.maxSlides&&(this.navElements.forEach((e=>{e.classList.remove("active")})),this.navElements[this.currentIndex].classList.add("active"))}setCounter(){this.displayCounter&&0!==this.maxSlides&&(this.counter.querySelector(".current").textContent=this.currentIndex+1)}onPrevClick(){this.currentIndex>0&&this.currentIndex--,this.goSlider()}onNextClick(){this.currentIndex<this.maxSlides&&this.currentIndex++,this.goSlider()}onNavClick(e){this.currentIndex=parseInt(e.target.dataset.item),this.setActiveBullet(),this.switchBullets(this.currentIndex)}bindEvent(){this.unbindEvent(),this.carousel.addEventListener("scroll",this.boundScroll),this.prevButton&&this.prevButton.addEventListener("click",this.boundPrevClick),this.nextButton&&this.nextButton.addEventListener("click",this.boundNextClick),this.navElements&&this.navElements.forEach((e=>{e.addEventListener("click",this.boundNavClick)}))}unbindEvent(){this.carousel.removeEventListener("scroll",this.boundScroll),this.prevButton&&this.prevButton.removeEventListener("click",this.boundPrevClick),this.nextButton&&this.nextButton.removeEventListener("click",this.boundNextClick),this.navElements&&this.navElements.forEach((e=>{e.removeEventListener("click",this.boundNavClick)}))}disconnectedCallback(){this.unbindEvent()}}customElements.get("nb-slider-natural")||customElements.define("nb-slider-natural",a);export{a as default};
