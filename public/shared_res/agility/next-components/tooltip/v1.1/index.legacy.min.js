const t=t=>null==t,e=(t,e)=>{const{ref:n}=e.dataset,s=n.match(/(\w+)\[(.+)\]/);return null!==s?o(t,e,s):{...t,[e.dataset.ref]:e}},o=(t,e,[,o,n])=>(void 0===t[o]&&(t[o]=[]),t[o][n]=e,t),n=["center","left","right"],s=["top","right","bottom","left"];class i extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(t=null){const e=t||this.attributes;let o;try{o=[...e].reduce(((t,e)=>({...t,[e.nodeName]:e.nodeValue})),{});const t=[...e].find((t=>"data"===t.nodeName));return null==t?o:{...o,...JSON.parse(t.nodeValue)}}catch(t){console.log("ERROR: No data",t)}}render(t=!1){t&&(this.innerHTML="");const e=(t,o)=>{const n=t=>3===t.nodeType?"text":8===t.nodeType?"comment":t.tagName.toLowerCase(),s=t=>t.childNodes&&t.childNodes.length>0?null:t.textContent;var i=Array.prototype.slice.call(o.childNodes),l=Array.prototype.slice.call(t.childNodes),a=i.length-l.length;if(a>0)for(;a>0;a--)i[i.length-a].parentNode.removeChild(i[i.length-a]);l.forEach((function(t,l){if(i[l])if(n(t)===n(i[l])){var a=s(t);if(a&&a!==s(i[l])&&(i[l].textContent=a),i[l].childNodes.length>0&&t.childNodes.length<1)i[l].innerHTML="";else{if(i[l].childNodes.length<1&&t.childNodes.length>0){var c=document.createDocumentFragment();return e(t,c),void i[l].appendChild(c)}t.childNodes.length>0&&e(t,i[l])}}else i[l].parentNode.replaceChild(t.cloneNode(!0),i[l]);else o.appendChild(t.cloneNode(!0))}))},o=(n=this.template,(new DOMParser).parseFromString(n,"text/html").body);var n;e(o,this)}loadTemplate(t="",e=!1){this.template=""===t?this.template:`${t}`,this.render(e)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",i);const l=(()=>{const t=t=>{const e=window.visualViewport&&window.visualViewport.width||window.innerWidth,o=t.content.getBoundingClientRect(),n=e-16,s=16,i=o.right>n?Math.round(n-o.right):0;o.left<s&&o.left;i&&(t.content.style.right=-i+"px",t.tooltip.style.setProperty("--tooltip-tip-x",-i+"px"))};return{checkPosition:(t,{alignment:e=n[0],position:o=s[0]})=>{const i=t.getBoundingClientRect(),l=i.top<0,a=i.right>window.innerWidth,c=i.bottom>window.innerHeight,r=i.left<0;"top"===o||"bottom"===o?"top"===o&&l?(t.classList.remove("nb-tooltip__content--top"),t.classList.add("nb-tooltip__content--bottom")):"bottom"===o&&c?(t.classList.remove("nb-tooltip__content--bottom"),t.classList.add("nb-tooltip__content--top")):a?"left"===e?(t.classList.remove("nb-tooltip__content--aleft"),t.classList.add("nb-tooltip__content--aright")):"center"===e&&(t.classList.remove("nb-tooltip__content--acenter"),t.classList.add("nb-tooltip__content--aright")):r&&("right"===e?(t.classList.remove("nb-tooltip__content--aright"),t.classList.add("nb-tooltip__content--aleft")):"center"===e&&(t.classList.remove("nb-tooltip__content--acenter"),t.classList.add("nb-tooltip__content--aleft"))):"right"===o&&a?(t.classList.remove("nb-tooltip__content--right"),t.classList.add("nb-tooltip__content--left")):"left"===o&&r&&(t.classList.remove("nb-tooltip__content--left"),t.classList.add("nb-tooltip__content--right"))},observe:e=>{window.addEventListener("resize",(()=>{t(e)}))},unobserve:e=>{window.removeEventListener("resize",(()=>{t(e)}))}}})();class a extends HTMLElement{connectedCallback(){this.props=(e=>{const o=(t=>t.find((t=>"data"===t.nodeName)))([...e]),n=[...e].filter((t=>"data"!==t.nodeName)).reduce(((t,e)=>({...t,[e.nodeName]:e.nodeValue})),{});if(t(o))return n;try{return{...n,...JSON.parse(o.nodeValue)}}catch(t){console.log("ERROR: No data",t)}})(this.attributes),this.classes=this.createClasses(),this.render(),this.refs=[...this.querySelectorAll("[data-ref]")].reduce(e,{}),l.observe(this.refs)}disconnectedCallback(){l.observe(this.refs)}createClasses(){const{alignment:t=n[0],position:e=s[0]}=this.props,o="nb-tooltip";return{root:o,label:"nb-tooltip__label t-sm-700-sl",container:"nb-tooltip__container",content:"nb-tooltip__content t-2xs-500-sl",tooltip:["nb-tooltip__tooltip",`nb-tooltip__tooltip--${e}`,["top","bottom"].includes(e)?`nb-tooltip__tooltip--a${t}`:""].join(" "),tip:"nb-tooltip__tip"}}render(){const{label:t="",content:e=""}=this.props;this.innerHTML=e?`\n            <div class="${this.classes.root}" tabindex="0">\n                ${t&&`<div class="${this.classes.label}">${t}</div>`}\n                <div class="${this.classes.container}">\n                    <nb-icon icon="information"></nb-icon>\n                    <div class="${this.classes.tooltip}" data-ref="tooltip">\n                        <div class="${this.classes.content}" data-ref="content">\n                            ${e}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `:""}}customElements.get("nb-tooltip")||customElements.define("nb-tooltip",a);export{a as default};
