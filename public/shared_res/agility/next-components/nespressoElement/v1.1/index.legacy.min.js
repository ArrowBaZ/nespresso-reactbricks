class e extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const t=e||this.attributes;let n;try{n=[...t].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});const e=[...t].find((e=>"data"===e.nodeName));return null==e?n:{...n,...JSON.parse(e.nodeValue)}}catch(e){console.log("ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const t=(e,n)=>{const l=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),o=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var s=Array.prototype.slice.call(n.childNodes),d=Array.prototype.slice.call(e.childNodes),r=s.length-d.length;if(r>0)for(;r>0;r--)s[s.length-r].parentNode.removeChild(s[s.length-r]);d.forEach((function(e,d){if(s[d])if(l(e)===l(s[d])){var r=o(e);if(r&&r!==o(s[d])&&(s[d].textContent=r),s[d].childNodes.length>0&&e.childNodes.length<1)s[d].innerHTML="";else{if(s[d].childNodes.length<1&&e.childNodes.length>0){var a=document.createDocumentFragment();return t(e,a),void s[d].appendChild(a)}e.childNodes.length>0&&t(e,s[d])}}else s[d].parentNode.replaceChild(e.cloneNode(!0),s[d]);else n.appendChild(e.cloneNode(!0))}))},n=(l=this.template,(new DOMParser).parseFromString(l,"text/html").body);var l;t(n,this)}loadTemplate(e="",t=!1){this.template=""===e?this.template:`${e}`,this.render(t)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",e);export{e as NespressoElement};
