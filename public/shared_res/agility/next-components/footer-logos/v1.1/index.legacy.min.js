const e=e=>null==e;class t extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const t=e||this.attributes;let n;try{n=[...t].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});const e=[...t].find((e=>"data"===e.nodeName));return null==e?n:{...n,...JSON.parse(e.nodeValue)}}catch(e){console.log("ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const t=(e,n)=>{const a=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),s=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var o=Array.prototype.slice.call(n.childNodes),r=Array.prototype.slice.call(e.childNodes),l=o.length-r.length;if(l>0)for(;l>0;l--)o[o.length-l].parentNode.removeChild(o[o.length-l]);r.forEach((function(e,r){if(o[r])if(a(e)===a(o[r])){var l=s(e);if(l&&l!==s(o[r])&&(o[r].textContent=l),o[r].childNodes.length>0&&e.childNodes.length<1)o[r].innerHTML="";else{if(o[r].childNodes.length<1&&e.childNodes.length>0){var i=document.createDocumentFragment();return t(e,i),void o[r].appendChild(i)}e.childNodes.length>0&&t(e,o[r])}}else o[r].parentNode.replaceChild(e.cloneNode(!0),o[r]);else n.appendChild(e.cloneNode(!0))}))},n=(a=this.template,(new DOMParser).parseFromString(a,"text/html").body);var a;t(n,this)}loadTemplate(e="",t=!1){this.template=""===e?this.template:`${e}`,this.render(t)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",t);const n=()=>window[window?.padlNamespace]?.dataLayer;class a extends HTMLElement{constructor(){super(),this.market=(()=>{const e=n();return e?e.app.app.market.toLocaleLowerCase():"ch"})(),this.language=n()?n().page.page.pageInfo.language.toLocaleLowerCase():"en"}connectedCallback(){this.props=(t=>{const n=(e=>e.find((e=>"data"===e.nodeName)))([...t]),a=[...t].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(e(n))return a;try{return{...a,...JSON.parse(n.nodeValue)}}catch(e){console.log("ERROR: No data",e)}})(this.attributes),this.render()}render(){const{id:e,name:t,creative:n,position:a}=this.props.campaign,{heading:s,size:o}=this.props.copywriting;this.classList.add(`size-${o}`);let r="";s&&(r=`<h2 class="t-sm-400-caps">${s}</h2>`),this.innerHTML=`<nb-container\n                campaign_id="${e}"\n                campaign_name="${t}"\n                campaign_creative="${n}"\n                campaign_position="${a}"\n                classname="pt4 pb4"\n                contrast="light">\n                ${r}\n                ${this.renderItems()}\n            </nb-container>`}renderItems(){const{items:e=[]}=this.props.copywriting;return`<ul>${e.reduce(((e,t)=>`${e}${this.renderItem(t)}`),"")}</ul>`}renderItem({label:e,icon:t,image:n,link:a,target_blank:s}){const{is_app_download:o}=this.props.copywriting;let r="_self";if("true"===s&&(r="_blank"),"true"===o)switch(t){case"apple":a=(a="https://apps.apple.com/us/app/nespresso/id342879434").replace("/us/",`/${this.market}/`);break;case"android":a="https://play.google.com/store/apps/details?id=com.nespresso.activities";break;case"huawei":a="https://appgallery.huawei.com/app/C102571517"}let l="";t&&""===n&&(l=`<nb-icon icon="${t}"></nb-icon><span class="sr-only">${e}</span>`);let i="";if(n&&(i=`<img loading="lazy" src="${n}" alt="${e}" />`),a){return`<li><a href="${c=a,d=this.market,p=this.language,c.replace("{market}",d).replace("{lang}",p)}" target="${r}">${l}${i}</a></li>`}var c,d,p;return`<li><div>${l}${i}</div></li>`}}customElements.get("nb-footer-logos")||customElements.define("nb-footer-logos",a);export{a as default};
