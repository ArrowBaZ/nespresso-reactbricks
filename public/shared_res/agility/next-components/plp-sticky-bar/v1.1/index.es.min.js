const e=e=>null==e;class t extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const t=e||this.attributes;let n;try{n=[...t].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});const e=[...t].find((e=>"data"===e.nodeName));return null==e?n:{...n,...JSON.parse(e.nodeValue)}}catch(e){console.log("ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const t=(e,n)=>{const i=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),s=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var o=Array.prototype.slice.call(n.childNodes),r=Array.prototype.slice.call(e.childNodes),l=o.length-r.length;if(l>0)for(;l>0;l--)o[o.length-l].parentNode.removeChild(o[o.length-l]);r.forEach((function(e,r){if(o[r])if(i(e)===i(o[r])){var l=s(e);if(l&&l!==s(o[r])&&(o[r].textContent=l),o[r].childNodes.length>0&&e.childNodes.length<1)o[r].innerHTML="";else{if(o[r].childNodes.length<1&&e.childNodes.length>0){var d=document.createDocumentFragment();return t(e,d),void o[r].appendChild(d)}e.childNodes.length>0&&t(e,o[r])}}else o[r].parentNode.replaceChild(e.cloneNode(!0),o[r]);else n.appendChild(e.cloneNode(!0))}))},n=(i=this.template,(new DOMParser).parseFromString(i,"text/html").body);var i;t(n,this)}loadTemplate(e="",t=!1){this.template=""===e?this.template:`${e}`,this.render(t)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",t);const n={get is(){const{innerWidth:e,devicePixelRatio:t}=window;return{mobile:e<768,mobile_tablet:e<1024,tablet:e>=768&&e<1024,desktop:e>=1024&&t<=1,retina:e>=1024&&t>1}},lt:e=>window.innerWidth<e},i=e=>e?e.toString().replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"";class s extends HTMLElement{constructor(){super(),this.boundGetChips=this.getChips.bind(this)}connectedCallback(){this.props=(t=>{const n=(e=>e.find((e=>"data"===e.nodeName)))([...t]),i=[...t].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(e(n))return i;try{return{...i,...JSON.parse(n.nodeValue)}}catch(e){console.log("ERROR: No data",e)}})(this.attributes),this.render(),this.addEventListener("WEB_COMPONENT_SLIDER_READY",this.boundGetChips),this.querySelectorAll(".nb-dropdown__menu button").forEach((e=>{e.addEventListener("click",this.clickChip)}))}render(){const{navigation:e=[],navigation_bubbles:t=""}=this.props;this.classList.add("nb-plp-sticky-bar"),this.innerHTML=`<div class="nb-plp-sticky-bar--inner">\n                ${this.renderLinksSelect(e)}\n                ${this.renderBubblesSlide(t)}\n            </div>`}renderLinksSelect(e){if(n.is.mobile||!e||e.length<=1)return"";return`<div class="nb-plp-sticky-bar--dropdown">\n            <nb-dropdown\n                data='${(e=>i(JSON.stringify(e)))({icon_option:"check",options:e.map((e=>(e.checked=e.selected,e)))})}'\n            ></nb-dropdown>\n        </div>`}renderBubblesSlide(e){const{a11y_slider_previous_button:t="",a11y_slider_next_button:n=""}=this.props;return`<nb-navigation-bubbles\n                a11y_slider_previous_button="${t}"\n                a11y_slider_next_button="${n}"\n                sticky='true' data='${e}'></nb-navigation-bubbles>`}getChips(){this.querySelectorAll("nb-chip").forEach((e=>{e.addEventListener("click",this.clickChip)}))}clickChip(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-link");t&&(window.location.href=t)}disconnectedCallback(){this.removeEventListener("WEB_COMPONENT_SLIDER_READY",this.boundGetChips),this.querySelectorAll("nb-chip").forEach((e=>{e.removeEventListener("click",this.clickChip)})),this.querySelectorAll(".nb-dropdown__menu button").forEach((e=>{e.removeEventListener("click",this.clickChip)}))}}customElements.get("nb-plp-sticky-bar")||customElements.define("nb-plp-sticky-bar",s);export{s as default};
