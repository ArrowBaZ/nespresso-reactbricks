const e=e=>null==e;const t=(e,t)=>{const{ref:a}=t.dataset,r=a.match(/(\w+)\[(.+)\]/);return null!==r?s(e,t,r):{...e,[t.dataset.ref]:t}},s=(e,t,[,s,a])=>(void 0===e[s]&&(e[s]=[]),e[s][a]=t,e);class a extends HTMLElement{constructor(){super()}connectedCallback(){this.props=(t=>{const s=(e=>e.find((e=>"data"===e.nodeName)))([...t]),a=[...t].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(e(s))return a;try{return{...a,...JSON.parse(s.nodeValue)}}catch(e){console.log("ERROR: No data",e)}})(this.attributes),this.render(),this.refs=[...this.querySelectorAll("[data-ref]")].reduce(t,{}),this.initLazyLoad()}initLazyLoad(){const{image:e}=this.props,{visual:t}=this.refs;let s="";s=""!==e.custom?e.custom:"/shared_res/agility/next-components/assets/cup-size/"+e.predefined+".png",t&&e&&function(e,t,s,a,r){const n=(t,s)=>{e.setAttribute(t,s);const n=()=>e.classList.add("lazy-loaded");if(a){const t=new Image;return t.src=a,t.onload=n,void(t.onerror=()=>{r&&r(`Image ${a} cannot be loaded.`),e.classList.add("lazy-loaded-error")})}n()};if(/Trident\/|MSIE/.test(window.navigator.userAgent)||(o=window.navigator.userAgent,i=o.indexOf("OS "),(o.indexOf("iPhone")>-1||o.indexOf("iPad")>-1)&&i>-1&&window.Number(o.substr(i+3,3).replace("_","."))<14))n(t,s);else if("IntersectionObserver"in window){e.classList.add("lazy-load");let a=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&(n(t,s),a.unobserve(e.target))}))}));a.observe(e)}else n(t,s);var o,i}(t,"src",`${s}`,s)}render(){const{label:e,a11y_label:t}=this.props;this.innerHTML=`\n            <img src='' data-ref="visual" aria-hidden='true' />\n            <h3 class='t-sm-700' aria-description='${t}'>${e}</h3>\n            ${this.renderVolume()}\n        `}renderVolume(){const{volume:e}=this.props;let t="";return t=e.automatic||"true"===e.automatic?"("+((e,t=!1)=>{let s="";switch(e){case"carafe":s=t?"18.09":"535";break;case"alto":s=t?"11.33":"335";break;case"mug":s=t?"7.77":"230";break;case"gran_lungo":s=t?"5.07":"150";break;case"lungo":s=t?"3.7":"110";break;case"double_espresso":s=t?"2.7":"80";break;case"espresso":s=t?"1.35":"40";break;case"ristretto":s=t?"0.84":"25"}return t?s+" oz":s+" ml"})(e.size,"oz"===e.unit)+")":e.override,`<p class='t-sm-400'>${t}</p>`}}customElements.get("nb-cup-size")||customElements.define("nb-cup-size",a);export{a as default};
