const t=t=>null==t;window.gtmDataObject=window.gtmDataObject||[];const e=()=>window[window?.padlNamespace]?.dataLayer;class n extends HTMLElement{constructor(){super(),this.slot=this.innerHTML,this.boundHandleClick=this.handleClick.bind(this),this.market=(()=>{const t=e();return t?t.app.app.market.toLocaleLowerCase():"ch"})(),this.language=e()?e().page.page.pageInfo.language.toLocaleLowerCase():"en"}connectedCallback(){this.props=(e=>{const n=(t=>t.find((t=>"data"===t.nodeName)))([...e]),i=[...e].filter((t=>"data"!==t.nodeName)).reduce(((t,e)=>({...t,[e.nodeName]:e.nodeValue})),{});if(t(n))return i;try{return{...i,...JSON.parse(n.nodeValue)}}catch(t){console.log("ERROR: No data",t)}})(this.attributes),this.render(),this.setClassHelper(),this.bindEvents()}render(){const{size:t="large",color:e="gold",link:n="",icon_right:i="",icon_left:s="",image:a="",image_alt:o=""}=this.props;t&&this.setAttribute("size",t),e&&this.setAttribute("color",e),a&&this.setAttribute("image",a),o&&this.setAttribute("image_alt",o),s&&this.setAttribute("icon_left",s),i&&this.setAttribute("icon_right",i),""===n?this.renderButton():this.renderLink(),this.link=this.firstElementChild}renderLink(){const{label:t,seo_label:e="",tracking_label:n="",link_new_tab:i="false",a11y_label_new_tab:s="",icon_right:a="",image:o="",image_alt:l="",icon_left:c="",selected:r="",phantom:h=""}=this.props;let{link:d}=this.props;const p=this.slot?this.slot:t;d&&(d=d.replace("{market}",this.market),d=d.replace("{lang}",this.language)),this.innerHTML=`\n        <a\n            href="${d}"\n            ${"true"===i?'target="_blank"':""}\n            ${"true"===i&&""!==s?`aria-description='${s}'`:""}\n            ${n&&`tracking_label='${n}'`}\n            ${e?`title="${e}"`:""}\n            ${"true"===r?'aria-selected="true"':""}\n            ${"true"===h?`phantom="${p}"`:""}\n        >\n            ${c&&`<nb-icon icon='${c}'></nb-icon>`}\n            ${o&&`<img src='${o}' alt='${l}'/>`}\n            <span>${p}</span>\n            ${a&&`<nb-icon icon='${a}'></nb-icon>`}\n        </a>`}renderButton(){const{label:t,tracking_label:e="",icon_right:n="",icon_left:i="",selected:s="",image:a="",image_alt:o="",phantom:l=""}=this.props,c=this.slot?this.slot:t;this.innerHTML=`\n        <button\n            ${e&&`tracking_label='${e}'`}\n            ${"true"===s?'aria-selected="true"':""}\n            ${"true"===l?`phantom="${c}"`:""}\n        >\n            ${a&&`<img src='${a}' alt='${o}'/>`}\n            ${i&&`<nb-icon icon='${i}'></nb-icon>`}\n            <span>${c}</span>\n            ${n&&`<nb-icon icon='${n}'></nb-icon>`}\n        </button>`}setClassHelper(){const{size:t="large",cta_link_type:e="false"}=this.props;let n="";switch(t){case"xsmall":n="t-2xs-500";break;case"small":n="t-xs-500-sl";break;case"medium":n="t-sm-400-sl";break;default:n="t-xs-700-caps-sl"}"true"===e&&(n="t-sm-700-caps-sl",this.setAttribute("underline","false")),this.querySelector("a, button").classList.add(n)}handleClick(){this.track();const{popin_id:t=""}=this.props;t&&this.popin(t)}popin(t){(({eventName:t,args:e,element:n})=>{let i;n=n||window,e?i=new CustomEvent(t,{detail:e,bubbles:!0}):"function"==typeof Event?i=new Event(t):(i=document.createEvent("Event"),i.initEvent(t,!0,!0)),n.dispatchEvent(i)})({eventName:"WEB_COMPONENT_POPIN_OPEN",args:{id:t}})}track(){this.props.campaign_id&&this.handlePromoClick(),this.props.custom_tracking&&this.handleCustomEvent()}handlePromoClick(){const{campaign_id:t="",campaign_name:e="",campaign_position:n="",campaign_creative:i=""}=this.props;var s;""!==t&&(s={ecommerce:{promoClick:{promotions:[{id:t,name:e,position:n,creative:i}]}}},window.gtmDataObject.push({event:"promoClick",eventRaisedBy:"Web component",ecommerce:{},...s}))}handleCustomEvent(){const{tracking_label:t=""}=this.props;var e;""!==t&&(e={eventAction:"Click",eventLabel:t},window.gtmDataObject.push({event:"customEvent",eventRaisedBy:"Web component",eventCategory:"User Engagement",eventAction:"Click",eventLabel:"",nonInteraction:0,...e}))}bindEvents(){this.unbindEvents(),this.link.addEventListener("click",this.boundHandleClick)}unbindEvents(){this.link.removeEventListener("click",this.boundHandleClick)}disconnectedCallback(){this.unbindEvents()}}customElements.get("nb-link")||customElements.define("nb-link",n);export{n as default};
