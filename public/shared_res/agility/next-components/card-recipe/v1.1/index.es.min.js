const e=e=>null==e;class t extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const t=e||this.attributes;let n;try{n=[...t].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});const e=[...t].find((e=>"data"===e.nodeName));return null==e?n:{...n,...JSON.parse(e.nodeValue)}}catch(e){console.log("ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const t=(e,n)=>{const s=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),a=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var i=Array.prototype.slice.call(n.childNodes),l=Array.prototype.slice.call(e.childNodes),r=i.length-l.length;if(r>0)for(;r>0;r--)i[i.length-r].parentNode.removeChild(i[i.length-r]);l.forEach((function(e,l){if(i[l])if(s(e)===s(i[l])){var r=a(e);if(r&&r!==a(i[l])&&(i[l].textContent=r),i[l].childNodes.length>0&&e.childNodes.length<1)i[l].innerHTML="";else{if(i[l].childNodes.length<1&&e.childNodes.length>0){var o=document.createDocumentFragment();return t(e,o),void i[l].appendChild(o)}e.childNodes.length>0&&t(e,i[l])}}else i[l].parentNode.replaceChild(e.cloneNode(!0),i[l]);else n.appendChild(e.cloneNode(!0))}))},n=(s=this.template,(new DOMParser).parseFromString(s,"text/html").body);var s;t(n,this)}loadTemplate(e="",t=!1){this.template=""===e?this.template:`${e}`,this.render(t)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",t);const n={get is(){const{innerWidth:e,devicePixelRatio:t}=window;return{mobile:e<768,mobile_tablet:e<1024,tablet:e>=768&&e<1024,desktop:e>=1024&&t<=1,retina:e>=1024&&t>1}},lt:e=>window.innerWidth<e},s={getResponsiveSrc:e=>{const t=(s=e,Array.isArray(s)||"object"==typeof s?["mobile","tablet","desktop","retina"].find((e=>!0===n.is[e]&&e in s&&""!==s[e])):null);var s;return t?e[t]:e.desktop}};class a extends HTMLElement{connectedCallback(){this.props=(t=>{const n=(e=>e.find((e=>"data"===e.nodeName)))([...t]),s=[...t].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(e(n))return s;try{return{...s,...JSON.parse(n.nodeValue)}}catch(e){console.log("ERROR: No data",e)}})(this.attributes),this.render()}render(){const{heading:e="",time:t="",difficulty:s="",single:a="false",a11y_recipe:i="",a11y_time:l="",a11y_difficulty:r=""}=this.props;this.isSingle="true"===a,this.isSingle&&this.setAttribute("single","true"),this.setAttribute("aria-label",i),this.innerHTML=`\n            <div class="card">\n                ${this.renderVisual()}\n                ${e&&`<h3 class="heading ${n.is.mobile?"t-xs-700-caps":"t-sm-700-caps"}">${e}</h3>`}\n            </div>\n            <div class="side">\n                <div class="meta t-xs-500-sl">\n                    <span class="sr-only">${l}</span>\n                    ${t&&`${t}`}\n                    <span class="dash"></span>\n                    <span class="sr-only">${r}</span>\n                    ${s&&`${s}`}\n                </div>\n            </div>\n            <div class="button-container">\n                <button aria-label="${this.renderA11yOpenModal()}"></button>\n            </div>`}renderA11yOpenModal(){const{heading:e="",a11y_open_modal:t=""}=this.props;return""!==t?t.replace("{heading}",e):e}renderVisual(){const{visual:{src:e,alt:t=""}={}}=this.props;if(!e)return"";const n=s.getResponsiveSrc(e);return n&&`<div class="visual">\n                <img src="${n}" alt="${t}" aria-hidden="true" loading=lazy/>\n            </div>`}}customElements.get("nb-card-recipe")||customElements.define("nb-card-recipe",a);export{a as default};
