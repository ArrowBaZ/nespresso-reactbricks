const n=n=>null==n,e=n=>n?n.toString().replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"",t=()=>window[window?.padlNamespace]?.dataLayer,i=(n,e,t)=>n.replace("{market}",e).replace("{lang}",t);class o{constructor(){this.promise=new Promise(((n,e)=>{this.reject=e,this.resolve=n}))}}class r extends HTMLElement{constructor(){super(),this.market=(()=>{const n=t();return n?n.app.app.market.toLocaleLowerCase():"ch"})(),this.language=t()?t().page.page.pageInfo.language.toLocaleLowerCase():"en",this.btnScrollToTop=null,this.dropdownButtons=null}connectedCallback(){this.props=(e=>{const t=(n=>n.find((n=>"data"===n.nodeName)))([...e]),i=[...e].filter((n=>"data"!==n.nodeName)).reduce(((n,e)=>({...n,[e.nodeName]:e.nodeValue})),{});if(n(t))return i;try{return{...i,...JSON.parse(t.nodeValue)}}catch(n){console.log("ERROR: No data",n)}})(this.attributes),this.render()}render(){this.unbindEvent();const{id:n,name:e,creative:t,position:i}=this.props.campaign;this.innerHTML=`<nb-container\n                campaign_id="${n}"\n                campaign_name="${e}"\n                campaign_creative="${t}"\n                campaign_position="${i}"\n                classname="pt0 pb0"\n                contrast="light">\n                <div class="cb-row">\n                    <div class="country">${this.renderCountry()}</div>\n                    <div class="links">\n                      <div class="big-links t-xs-500-sl">${this.renderBigLinks()}</div>\n                      <div class="small-links t-2xs-500">${this.renderSmallLinks()}</div>\n                    </div>\n                </div>\n                <div class="cb-row t-xs-500-sl">\n                    <div class="socials">${this.renderSocialLinks()}</div>\n                    <div class="pagetop">${this.renderPageTop()}</div>\n                    <div class="copyright">${this.renderCopyright()}</div>\n                </div>\n            </nb-container>`,this.btnScrollToTop=this.querySelector(".pagetop a"),this.dropdownButtons=this.querySelectorAll(".nb-dropdown__menu button"),this.bindEvent()}renderCountry(){const{label_dropdown:n,aa_description:t,aa_listbox_description:i,aa_select_description:o}=this.props.copywriting.languages.dropdown,{langs:r}=this.props.copywriting.languages;return this.getCurrentURLs(),`${this.renderFlag()}\n        <nb-dropdown\n            id="lang_menu_id"\n            data="${s={label:n,aa_description:t,aa_listbox_description:i,aa_select_description:o,icon_option:"check",options:r},e(JSON.stringify(s))}"/>`;var s}renderFlag(){let{label_a11y:n,label_country:e,icon:t,location_link:o}=this.props.copywriting.languages.country;const{label:r,link:s}=o;"tw"===this.market&&(t="globe");let a=`<img loading="lazy" src="https://www.nespresso.com/_ui/img/flags/${this.market}.png?impolicy=small&imwidth=24" alt="${e}" aria-hidden="true" />`;return"globe"===t&&(a=`<nb-icon icon="${t}"></nb-icon>`),`<span class="sr-only">${n} ${e}</span>\n        <a href="${i(s,this.market,this.language)}" target="_self" aria-label="${r}" class="icon">\n            ${a}\n        </a>`}getCurrentURLs(){const{langs:n}=this.props.copywriting.languages;let e=window.location.href;n.forEach((n=>{n.link=this.replaceLang(e,n.code),n.checked=n.code===this.language}))}replaceLang(n,e){return n.replace(`/${this.market}/${this.language}`,`/${this.market}/${e}`)}renderBigLinks(){const{big_links:n}=this.props.copywriting;return`${this.renderItems(n)}`}renderSmallLinks(){const{small_links:n}=this.props.copywriting;return`${this.renderItems(n)}`}renderSocialLinks(){const{heading:n,links:e}=this.props.copywriting.socials;return`<p>${n}</p>${this.renderItems(e)}`}renderPageTop(){const{page_top:n}=this.props.copywriting;return`<a href="#" target="_self" phantom="${n}"><span>${n}</span><nb-icon icon="arrow-top"></nb-icon></a>`}renderCopyright(){const{homepage_label:n,copyright:e,copyright_a11y:t}=this.props.copywriting,i=(new Date).getFullYear();return`<a href="/${this.market}/${this.language}"\n                target="_self" aria-label="${n}">\n            <nb-icon icon="nespresso-logo"></nb-icon>\n        </a><p><span class="sr-only">${t+" "}</span>${e} ${i}</p>`}renderItems(n){return`<ul>${n.reduce(((n,e)=>`${n}${this.renderItem(e)}`),"")}</ul>`}renderItem({label:n,link:e,icon:t="",script:o="false",target_blank:r}){const s=i(e,this.market,this.language);if(t.trim())return`<li><a href="${s}" target="_blank" aria-label="${n}"><nb-icon icon="${t}"></nb-icon></a></li>`;if("true"===o)return`<li><a href="javascript:void(0)" phantom="${n}" onclick="try{ah.optOut()}catch(e){}"><span>${n}</span></a></li>`;let a="_self";return"true"===r&&(a="_blank"),`<li><a href="${s}" target="${a}" phantom="${n}"><span>${n}</span></a></li>`}scroll(){((n,e={})=>{const t={scrollPaddingTop:140,scrollDuration:300,...e},i=new o;let r;const s=typeof n;if(["string","object"].indexOf(s)>-1){r=n,"string"===s&&(r=document.querySelector(n));try{n=window.pageYOffset+r.getBoundingClientRect().top-t.scrollPaddingTop}catch(e){throw new Error(`error: No element found with the selector "${n}"`)}}else"number"!=typeof n&&(n=0);let a=window.performance.now(),l=0,c=window.pageYOffset-n,d=window.innerHeight,p=document.body.clientHeight;c>d&&p-d>0&&(t.scrollDuration=Math.abs(t.scrollDuration+t.scrollDuration*(Math.abs(c)/(p-d))));let h=a+t.scrollDuration;window.requestAnimationFrame((function e(){let o=window.performance.now();if(o<h){l=(o-a)/t.scrollDuration,l=--l*l*l+1;const i=c*l;window.scrollTo(0,n+(c-i)),window.requestAnimationFrame(e)}else window.scrollTo(0,n),setTimeout((()=>i.resolve()),125);return i.promise})),i.promise})(0)}navigate(n){const e=n.target.getAttribute("data-link");e&&(window.location.href=e)}bindEvent(){this.btnScrollToTop&&(this.boundScroll=this.scroll.bind(this),this.btnScrollToTop.addEventListener("click",this.boundScroll)),this.dropdownButtons.forEach((n=>{n.boundClick=this.navigate.bind(n),n.addEventListener("click",n.boundClick)}))}unbindEvent(){this.btnScrollToTop&&this.btnScrollToTop.removeEventListener("click",this.boundScroll),this.dropdownButtons&&this.dropdownButtons.forEach((n=>{n.removeEventListener("click",n.boundClick)}))}disconnectedCallback(){this.unbindEvent()}}customElements.get("nb-footer-bottom")||customElements.define("nb-footer-bottom",r);export{r as default};
