const e=e=>null==e,t=(e,t)=>{const{ref:a}=t.dataset,s=a.match(/(\w+)\[(.+)\]/);return null!==s?n(e,t,s):{...e,[t.dataset.ref]:t}},n=(e,t,[,n,a])=>(void 0===e[n]&&(e[n]=[]),e[n][a]=t,e);var a=(e=[])=>{e.forEach((e=>{if(e&&e.element)return e.element.addEventListener(e.type,e.listener,e.options)}))};const s=e=>{const{key_3d:t=""}=e.props,{cta:n}=e.refs,a=()=>{n.addEventListener("mouseover",s,{once:!0})},s=()=>{if(c()||!window.seek.state.availableFeatures.webgl)return;const e=i();window.seek.launchExperience(d(),{modelKey:t,requestedEngine:"webgl"},{experienceTarget:e})},r=()=>{window.seek.removeEventListener("experienceLaunched",r),n.removeAttribute("disabled")},i=()=>{const e=document.createElement("div");e.style.display="none";const t=document.getElementsByTagName("body")[0];return t.parentNode.insertBefore(e,t),e},c=()=>["iOS","Android"].includes(window.seek.state.platform.os),d=()=>c()?"seekview":"viewer-qr-showcase";return window.seek||(({src:e,callback:t=null,async:n=!1,defer:a=!1,id:s=""})=>{const r=document.createElement("script");r.type="text/javascript",r.src=e,s&&(r.id=s),"function"==typeof t&&(r.onload=t),r.async=n,r.defer=a,document.body.appendChild(r)})({src:"//view.seekxr.com/nespresso/seek.min.js",defer:!0,callback:a}),{launch:()=>{window.seek.addEventListener("experienceLaunched",r),window.seek.config.defaultContext.selectedLanguageCode=(()=>{const{dataLayer:{page:{page:{pageInfo:{language:e="en"}}}}}=window[window.config.padl.namespace];return e})(),window.seek.launchExperience(d(),{modelKey:t}),n.setAttribute("disabled","disabled")}}};class r extends HTMLElement{connectedCallback(){this.props=(t=>{const n=(e=>e.find((e=>"data"===e.nodeName)))([...t]),a=[...t].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(e(n))return a;try{return{...a,...JSON.parse(n.nodeValue)}}catch(e){console.log("ERROR: No data",e)}})(this.attributes),this.render(),this.refs=[...this.querySelectorAll("[data-ref]")].reduce(t,{}),this.createEventListeners(),this.arService=s(this)}createEventListeners(){const e=[{element:this.refs.cta,type:"click",listener:this.onClick.bind(this)}];a(e),this.eventListeners=e}render(){const{key_3d:e="",label_button_3d:t="",tracking_label:n,variation:a="secondary"}=this.props;this.innerHTML=`\n            <nb-cta\n                data-ref="cta"\n                class="cta__3d"\n                icon_right="link"\n                link="${e}"\n                tracking_label="${n}"\n                variation="${a}"\n            >${t}</nb-cta>\n        `}async onClick(e){e.preventDefault(),this.arService.launch()}}customElements.get("nb-cta-3d")||customElements.define("nb-cta-3d",r);export{r as default};
