const e=e=>null==e;class t extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const t=e||this.attributes;let n;try{n=[...t].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});const e=[...t].find((e=>"data"===e.nodeName));return null==e?n:{...n,...JSON.parse(e.nodeValue)}}catch(e){console.log("ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const t=(e,n)=>{const i=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),s=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var o=Array.prototype.slice.call(n.childNodes),a=Array.prototype.slice.call(e.childNodes),r=o.length-a.length;if(r>0)for(;r>0;r--)o[o.length-r].parentNode.removeChild(o[o.length-r]);a.forEach((function(e,a){if(o[a])if(i(e)===i(o[a])){var r=s(e);if(r&&r!==s(o[a])&&(o[a].textContent=r),o[a].childNodes.length>0&&e.childNodes.length<1)o[a].innerHTML="";else{if(o[a].childNodes.length<1&&e.childNodes.length>0){var l=document.createDocumentFragment();return t(e,l),void o[a].appendChild(l)}e.childNodes.length>0&&t(e,o[a])}}else o[a].parentNode.replaceChild(e.cloneNode(!0),o[a]);else n.appendChild(e.cloneNode(!0))}))},n=(i=this.template,(new DOMParser).parseFromString(i,"text/html").body);var i;t(n,this)}loadTemplate(e="",t=!1){this.template=""===e?this.template:`${e}`,this.render(t)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",t);const n={get is(){const{innerWidth:e,devicePixelRatio:t}=window;return{mobile:e<768,mobile_tablet:e<1024,tablet:e>=768&&e<1024,desktop:e>=1024&&t<=1,retina:e>=1024&&t>1}},lt:e=>window.innerWidth<e};class i extends HTMLElement{constructor(){super(),this.props={},this.isChatAvailable=!1}connectedCallback(){this.props=(t=>{const n=(e=>e.find((e=>"data"===e.nodeName)))([...t]),i=[...t].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(e(n))return i;try{return{...i,...JSON.parse(n.nodeValue)}}catch(e){console.log("ERROR: No data",e)}})(this.attributes),this.init()}init(){this.isChatAvailable=!!window.hero,this.render(),this.setNegativeMargins()}render(){const{layout:e={},copywriting:t={},campaign:n={}}=this.props;this.innerHTML=`<nb-container\n            classname="${e.padding_top} ${e.padding_bottom}"\n            contrast="${e.contrast}"\n            background_color="${e.background_color}"\n            campaign_id="${n.id}"\n            campaign_name="${n.name}"\n            campaign_creative="${n.creative}"\n            campaign_position="${n.position}">\n            <div class="section-text">\n                <h2 class='h-2xl-700'>${t.heading}</h2>\n                ${t.description&&`<p class='t-sm-500'>${t.description}</p>`}\n                ${t.highlight_message&&`<p class='t-sm-500'>${t.highlight_message}</p>`}\n                <p class='t-sm-500'><em>${this.renderMessage()}</em></p>\n            </div>\n            <div class="section-img">\n                ${this.renderShowcaseImage()}\n            </div>\n        </nb-container>`}setNegativeMargins(){const e=this.querySelector("section"),t=this.querySelector(".section-img");if(!n.is.mobile){let n=window.getComputedStyle(e).getPropertyValue("padding-top");t.style.marginTop="-"+n}let i=window.getComputedStyle(e).getPropertyValue("padding-bottom");t.style.marginBottom="-"+i}renderMessage(){const{copywriting:e={}}=this.props;return this.isChatAvailable?e.chat_available_msg:e.chat_not_available_msg}renderShowcaseImage(){const{copywriting:e={}}=this.props,t=this.getBgImgUrl();return t&&`<img src="${t}" alt="${e.showcase_image.image_alt_text}" loading="lazy" />`}getBgImgUrl(){const{copywriting:e={}}=this.props,{mobile:t="",desktop:i="",retina:s=""}=e.showcase_image;return n.is.mobile&&t?t:n.is.retina&&s?s:i}}customElements.get("nb-hero-video-chat")||customElements.define("nb-hero-video-chat",i);export{i as default};
