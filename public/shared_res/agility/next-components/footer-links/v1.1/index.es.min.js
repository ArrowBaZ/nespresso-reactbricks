const e=e=>null==e;class t extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const t=e||this.attributes;let n;try{n=[...t].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});const e=[...t].find((e=>"data"===e.nodeName));return null==e?n:{...n,...JSON.parse(e.nodeValue)}}catch(e){console.log("ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const t=(e,n)=>{const a=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),i=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var l=Array.prototype.slice.call(n.childNodes),s=Array.prototype.slice.call(e.childNodes),o=l.length-s.length;if(o>0)for(;o>0;o--)l[l.length-o].parentNode.removeChild(l[l.length-o]);s.forEach((function(e,s){if(l[s])if(a(e)===a(l[s])){var o=i(e);if(o&&o!==i(l[s])&&(l[s].textContent=o),l[s].childNodes.length>0&&e.childNodes.length<1)l[s].innerHTML="";else{if(l[s].childNodes.length<1&&e.childNodes.length>0){var r=document.createDocumentFragment();return t(e,r),void l[s].appendChild(r)}e.childNodes.length>0&&t(e,l[s])}}else l[s].parentNode.replaceChild(e.cloneNode(!0),l[s]);else n.appendChild(e.cloneNode(!0))}))},n=(a=this.template,(new DOMParser).parseFromString(a,"text/html").body);var a;t(n,this)}loadTemplate(e="",t=!1){this.template=""===e?this.template:`${e}`,this.render(t)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",t);const n={get is(){const{innerWidth:e,devicePixelRatio:t}=window;return{mobile:e<768,mobile_tablet:e<1024,tablet:e>=768&&e<1024,desktop:e>=1024&&t<=1,retina:e>=1024&&t>1}},lt:e=>window.innerWidth<e},a=()=>window[window?.padlNamespace]?.dataLayer;class i extends HTMLElement{constructor(){super(),this.market=(()=>{const e=a();return e?e.app.app.market.toLocaleLowerCase():"ch"})(),this.language=a()?a().page.page.pageInfo.language.toLocaleLowerCase():"en",this.buttonElements=null}connectedCallback(){this.props=(t=>{const n=(e=>e.find((e=>"data"===e.nodeName)))([...t]),a=[...t].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(e(n))return a;try{return{...a,...JSON.parse(n.nodeValue)}}catch(e){console.log("ERROR: No data",e)}})(this.attributes),this.render()}render(){this.unbindEvent();const{id:e,name:t,creative:n,position:a}=this.props.campaign,{heading:i}=this.props.copywriting;let l="";i&&(l=`<h2 class="sr-only">${i}</h2>`),this.innerHTML=`<nb-container\n                campaign_id="${e}"\n                campaign_name="${t}"\n                campaign_creative="${n}"\n                campaign_position="${a}"\n                classname="pt4 pb4"\n                contrast="light">\n                ${l}\n                ${this.renderColumns()}\n            </nb-container>`,this.buttonElements=this.querySelectorAll("button"),this.liveChatElement=this.querySelector('a[href="#live-chat"]'),this.bindEvent()}renderColumns(){const{columns:e=[],contact:t}=this.props.copywriting;return e.push(t),e.reduce(((e,t,n)=>`${e}${this.renderItems(t,n)}`),"")}renderItems({heading:e,links:t},a){const i=t.reduce(((e,t)=>`${e}${this.renderItem(t)}`),"");return n.is.mobile?`<div>\n                  <button class="t-sm-400-sl-caps"\n                      role="heading"\n                      aria-level="3"\n                      aria-expanded="false"\n                      id="footer-link-heading-${a}"\n                      aria-controls="footer-link-region-${a}">${e}</button>\n                  <ul class="t-xs-500-sl"\n                      aria-hidden="true"\n                      role="region"\n                      aria-labelledby="footer-link-heading-${a}"\n                      id="footer-link-region-${a}">${i}</ul>\n                </div>`:`<div>\n                  <h3 class="t-sm-400-sl-caps">${e}</h3>\n                  <ul class="t-xs-500">${i}</ul>\n                </div>`}renderItem({label:e,link:t,icon:n,phone:a,sublabel_first_line:i,sublabel_second_line:l,target_blank:s}){if(""===t||""===e)return;const o=(r=t,d=this.market,c=this.language,r.replace("{market}",d).replace("{lang}",c));var r,d,c;let h="_self";return"true"===s&&(h="_blank"),n||a||i||l?`<li>\n                    <a href="${o}" target="${h}">\n                        ${n&&`<nb-icon icon="${n}"></nb-icon>`}\n                        <span>${e}</span>\n                        ${a&&`<span>${a}</span>`}\n                    </a>\n                    <span>${i}</span>\n                    <span>${l}</span>\n                </li>`:`<li>\n                <a href="${o}" target="${h}">${e}</a>\n            </li>`}toogle(e){"false"===e.target.getAttribute("aria-expanded")?(e.target.setAttribute("aria-expanded","true"),e.target.nextElementSibling.setAttribute("aria-hidden","false")):(e.target.setAttribute("aria-expanded","false"),e.target.nextElementSibling.setAttribute("aria-hidden","true"))}openChat(){window.dydu&&window.dydu.chatbox?window.dydu.chatbox.togglePopin(!0):window.calleoChat&&window.calleoChat("startChat")}bindEvent(){this.buttonElements&&this.buttonElements.forEach((e=>{e.boundHandleClick=this.toogle.bind(e),e.addEventListener("click",e.boundHandleClick)})),this.liveChatElement&&(this.liveChatElement.boundLiveChatClick=this.openChat.bind(this.liveChatElement),this.liveChatElement.addEventListener("click",this.liveChatElement.boundLiveChatClick))}unbindEvent(){this.buttonElements&&this.buttonElements.forEach((e=>{e.removeEventListener("click",e.boundHandleClick)})),this.liveChatElement&&this.liveChatElement.removeEventListener("click",this.liveChatElement.boundLiveChatClick)}disconnectedCallback(){this.unbindEvent()}}customElements.get("nb-footer-links")||customElements.define("nb-footer-links",i);export{i as default};
