const e=e=>null==e;class a extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const a=e||this.attributes;let i;try{i=[...a].reduce(((e,a)=>({...e,[a.nodeName]:a.nodeValue})),{});const e=[...a].find((e=>"data"===e.nodeName));return null==e?i:{...i,...JSON.parse(e.nodeValue)}}catch(e){console.log("ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const a=(e,i)=>{const s=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),t=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var n=Array.prototype.slice.call(i.childNodes),r=Array.prototype.slice.call(e.childNodes),c=n.length-r.length;if(c>0)for(;c>0;c--)n[n.length-c].parentNode.removeChild(n[n.length-c]);r.forEach((function(e,r){if(n[r])if(s(e)===s(n[r])){var c=t(e);if(c&&c!==t(n[r])&&(n[r].textContent=c),n[r].childNodes.length>0&&e.childNodes.length<1)n[r].innerHTML="";else{if(n[r].childNodes.length<1&&e.childNodes.length>0){var o=document.createDocumentFragment();return a(e,o),void n[r].appendChild(o)}e.childNodes.length>0&&a(e,n[r])}}else n[r].parentNode.replaceChild(e.cloneNode(!0),n[r]);else i.appendChild(e.cloneNode(!0))}))},i=(s=this.template,(new DOMParser).parseFromString(s,"text/html").body);var s;a(i,this)}loadTemplate(e="",a=!1){this.template=""===e?this.template:`${e}`,this.render(a)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",a);const i={get is(){const{innerWidth:e,devicePixelRatio:a}=window;return{mobile:e<768,mobile_tablet:e<1024,tablet:e>=768&&e<1024,desktop:e>=1024&&a<=1,retina:e>=1024&&a>1}},lt:e=>window.innerWidth<e},s={getResponsiveSrc:e=>{const a=(s=e,Array.isArray(s)||"object"==typeof s?["mobile","tablet","desktop","retina"].find((e=>!0===i.is[e]&&e in s&&""!==s[e])):null);var s;return a?e[a]:e.desktop}},t=["upvote","19-bar","24-7-service","360-view","accessories-and-sweets","address-2","address","amex-card","android","apple-pay-card","apple-pay","apple","arrow-bottom","arrow-filled-down","arrow-left","arrow-right","arrow-top","assistance-alt","assistance-videos","assistance","boutique","brand_coffee_capsule-vl-carafe","brand_coffee_capsule-vl-double-espresso-gran-lungo","brand_coffee_capsule-vl-espresso","brand_coffee_capsule-vl-mug","brand_coffee_capsule_ol","brand_coffee_capsule_pro","brand_coffee_capsule_vl","brand_coffee_cereals","brand_coffee_citrus","brand_coffee_cocoa","brand_coffee_coffee-assortment","brand_coffee_coffee-discovery-set","brand_coffee_machines","brand_coffee_malted","brand_coffee_notes-herbal","brand_delivery_boutique-location","brand_delivery_delivery","brand_delivery_free_delivery","brand_delivery_package","brand_delivery_schedule_delivery","brand_general_coffee","brand_machines_auto_clean_system","brand_machines_automatic_off","brand_machines_digital_display","brand_machines_energy_class","brand_machines_fast_heat_up","brand_machines_low_water_alert","brand_machines_milk_frothing","brand_machines_pump_pressure_bar","brand_payment_credit_card","brand_payment_gift_card","brand_payment_invoice","brand_payment_secure","brand_services_assistance","brand_services_boutique","brand_services_easy_order","brand_services_help","brand_services_promotions","brand_services_recycling","brand_services_recycling_ol","brand_services_recycling_vl","brand_services_subscription","brand_services_sustainability","calendar","capsule-cupSize-Cappuccino-And-Latte-Macchiato","capsule-cupSize-Cortado-Cappuccino","capsule-cupSize-icedRecipe-vertuo","capsule-cupSize-icedRecipe","capsule-cupSize-alto","capsule-cupSize-carafe-vertuo","capsule-cupSize-coffee","capsule-cupSize-double-espresso-vertuo","capsule-cupSize-espresso-vertuo","capsule-cupSize-espresso","capsule-cupSize-gran-lungo","capsule-cupSize-lungo","capsule-cupSize-mug","capsule-cupSize-ristretto","capsule-cupSize-americano","capsule-cupSize-large-americano","check","chevron-down","chevron-left","chevron-right","chevron-up","check-mark","clock","close-2","close","coffee","coffee_capsule-ol_24","credit-card-flag","credit-card","delivery-fast","delivery-scheduled","delivery-standard","eco-mode","edit","error","espresso-vertuo-capsule","eye-closed","eye-opened","facebook","filter","find-us-alt","find-us","free-return","gift-card","globe","gran-lungo-vertuo-capsule","help","hero-chat","huawei","information-24","information","instagram","invoice","language","linkedin","link","live-chat","loading-nitro","loading","loan","logout","machine_machines_ol_24","machines-2","machines","mail","mastercard-card","mastercard","menu","minus-16","minus-24","minus-o","modal-alert","modal-check","more-info","nespresso-logo","nespresso-monogram","nespresso-professional-2","nespresso-professional","nespresso","notification","orders","original","package-box","payment-bcorp","payment-bvr","payment-google-pay","payment-ideal","payment-klarna","payment-lsv","payment-postfinance","payment-twint","paypal-card","paypal","phone","pin","pinterest","play-button","play-mini","play","plus-16","plus-24","plus-o","promotions","recycling-point","recycling","remove","search","secure","set-up","shopping-bag","signal-high","signal-low","signal-med","speed","star","rating","subscription-2","subscription","sustainability","tag","twitter","ui_payment_cash","ui_coffee_bergamot","ui_coffee_capsule-ol","ui_coffee_capsule-vl-carafe","ui_coffee_capsule-vl-double-espresso_gran-lungo","ui_coffee_capsule-vl-espresso","ui_coffee_capsule-vl-mug","ui_coffee_capsule-vl","ui_coffee_capsule_professional","ui_coffee_cardamom","ui_coffee_cocoa","ui_coffee_hazelnut","ui_coffee_honey","ui_coffee_notes-cereal","ui_coffee_notes-malted","ui_coffee_winey","ui_delivery_calendar","ui_delivery_clock","ui_general_alerts","ui_general_arrow-right","ui_general_check","ui_general_chevron-bottom","ui_general_chevron-left","ui_general_chevron-right","ui_general_chevron-top","ui_general_credit-card","ui_general_edit","ui_general_error","ui_general_eye-close","ui_general_eye-open","ui_general_faq","ui_general_filter","ui_general_gift-card","ui_general_globe","ui_general_information","ui_general_language","ui_general_link","ui_general_loading","ui_general_log-out","ui_general_map_view","ui_general_menu","ui_general_minus","ui_general_notification","ui_general_order","ui_general_play","ui_general_plus","ui_general_promotions","ui_general_remove","ui_general_search","ui_general_secure","ui_general_shopping-bag","ui_general_tag","ui_general_user-account","ui_general_warranty","ui_general_wifi","ui_general_x","ui_map_directions","ui_payment_invoice","ui_services_assistance","ui_services_delivery","ui_services_easy_order","ui_services_find-us","ui_services_free-return","ui_services_mail","ui_services_phone","ui_services_subscription","ui_sustainability_climate","ui_sustainability_recycling","ui_sustainability_recycling_ol","ui_sustainability_recycling_vl","ui_sustainability_social_sustainability","ui_user_member_status","ui_user_my-address","ui_user_my_information","ultra-compact","user-account","versatil-coffee-system","video-play","vertuo","visa-card","visa","warranty","youtube","services-anticipation-of-maintenance","services-assistance","services-avant-premiere","services-avant-premiere-ol","services-avant-premiere-vl","services-coffee-assortment","services-coffee-coffee-sample","services-coffee-discovery-set","services-coffee-experiences","services-contact-chat","services-contact-community-forum","services-contact-mobile","services-contact-sms","services-contact-video-assistance","services-contact-virtual","services-data-insight","services-delivery-boutique-location","services-delivery-boutique-pick-up","services-delivery-delivery","services-delivery-delivery-bike","services-delivery-delivery-fast","services-delivery-free-delivery","services-delivery-next-day-delivery","services-delivery-package","services-delivery-pick-up-points","services-delivery-schedule-delivery","services-easy-maintenance","services-easy-order","services-easy-stock-management","services-generic","services-gifting-card","services-help","services-orders","services-payments-credit-card","services-payments-gift-card","services-payments-invoice","services-phone","services-reorder","services-satisfied-or-reimbursed","services-services-boutique","services-subscription","services-vip-masterclass","services-voice-enabled","payments-cash","delivery-same-day-delivery","contact-voice-assistant-chatbot","contact-video-chat","contact-mobile-push-notification","contact-chat-bot","coffee-coffee-tasting","contact-video-assistance","filter-style_step-01","filter-style_step-02","filter-style_step-03","filter-style_step-04"].concat(["notes-almonds","notes-balanced","notes-bergamot","notes-berry","notes-biscuity","notes-blueberry","notes-cardamom","notes-cereal","notes-citrus","notes-cocoa","notes-default","notes-flowery","notes-fruity","notes-hazelnut","notes-herbal","notes-honey","notes-leather","notes-malted","notes-roasted","notes-spicy","notes-sugar","notes-winey","notes-wood","notes-brand-coffee-roasted","notes-brand-coffee-caramel","notes-brand-coffee-intense-roasted"]).concat(["machine_technology_machine-ol","machine_technology_machine-vl","machine_details_deluxe-version","machine_details_machine-tutorial-ol","machine_details_machine-tutorial-vl","machine_warranty_warranty-ol","machine_warranty_warranty-vl","machine_features_generic","machine_features_auto-clean-system","machine_features_automatic-off","machine_features_blend-specific-brewing","machine_features_bluetooth","machine_features_capsule-ejection-ol","machine_features_capsule-ejection-vl","machine_features_centrifusion","machine_features_cold-foam-ol","machine_features_cold-foam-vl","machine_features_descale-alert","machine_features_descale","machine_features_digital-display","machine_features_dimensions","machine_features_eco-mode","machine_features_energy-class","machine_features_fast-heat-up","machine_features_hot-foam-ol","machine_features_hot-foam-vl","machine_features_hot-milk","machine_features_hot-foam","machine_features_hot-water","machine_features_low-water-alert","machine_features_manual-lever","machine_features_milk-frothing","machine_features_mobile-push-notification","machine_features_one-touch","machine_features_power-off","machine_features_pump-pressure-bar","machine_features_rinse","machine_features_settings","machine_features_steam","machine_features_temperature-settings-invert","machine_features_temperature-settings","machine_features_temperature","machine_features_ultra-compact","machine_features_water-tank","machine_features_weight"]),n=({key:e="icon",type:a="string",title:i="Icon",list:s=["",...t],description:n="Add icon",default:r=""}={})=>{const c={};return c[e]={type:a,title:i,enum:s,description:n,default:r},c};n({key:"icon_left",title:"Left icon",default:""}),n({key:"icon_right",title:"Right icon",default:""});class r extends HTMLElement{constructor(){super(),this.props={}}connectedCallback(){this.props=(a=>{const i=(e=>e.find((e=>"data"===e.nodeName)))([...a]),s=[...a].filter((e=>"data"!==e.nodeName)).reduce(((e,a)=>({...e,[a.nodeName]:a.nodeValue})),{});if(e(i))return s;try{return{...s,...JSON.parse(i.nodeValue)}}catch(e){console.log("ERROR: No data",e)}})(this.attributes),this.render(),this.initLazyLoad(),this.trackDetailView()}render(){const{layout:e,copywriting:a,options:i}=this.props,{sales_multiple:s,unit_quantity:t,technologies:n}=i,r={salesMultiple:s,unitQuantity:t,technologies:n},c=function(e){function a(e,a){return e%a==0}return"original"===function(e){const a=e.technologies[0];return a.substring(a.indexOf("/machineTechno/")+"/machineTechno/".length)}(e)?1===e.sales_multiple?a(e.unitQuantity,10)?e.unitQuantity/10:NaN:a(e.sales_multiple,10)?e.sales_multiple/10:NaN:1===e.sales_multiple?a(e.unitQuantity,10)&&1!==e.unitQuantity?e.unitQuantity/10:a(e.unitQuantity,7)&&1!==e.unitQuantity?e.unitQuantity/7:NaN:a(e.sales_multiple,10)?e.sales_multiple/10:a(e.sales_multiple,7)?e.sales_multiple/7:NaN}(r),{background:o}=e,{disclaimer_text:l,link:u,logos:_,image:d,show_sleeve:p}=a,m=JSON.stringify({..._,...a,...i,unit_quantity:t,sales_multiple:s,sleeve_variation_pdp:!0,number_of_sleeves:c,bundled:(f=r,f.sales_multiple=f.sales_multiple||f.salesMultiple,!(f.sales_multiple>1&&1===f.unitQuantity)&&1===f.sales_multiple&&f.unitQuantity>1),show_sleeve:!isNaN(c)&&p,logos:i.logos,position:1,src_page:"pdp"});var f;this.innerHTML=`\n            <nb-container\n                contrast='light'\n                background_mobile='${o.mobile}'\n                background_desktop='${o.desktop}'\n                background_retina='${o.retina}'>\n                <div class="cb-col1">\n                    ${u&&u.link&&u.label?`<nb-link link='${u.link}' seo_label='${u.seo_label}' color='black' size='large'\n                                >${u.label}</nb-link>`:""}\n                    <img alt="${d.alt_text}" class="sku"/>\n                    <small class="t-xs-500">${l}</small>\n                </div>\n                <div class="cb-col2">\n                    <nb-plp-product-card data='${m}' variation="pdp"></nb-plp-product-card>\n                </div>\n            </nb-container>\n        `}async trackDetailView(){window.napi.data().product().setProductData(await window.productHelper.getPadlProductDetail(await window.napi.catalog().getProduct(this.props.options.longSku)))}initLazyLoad(){const{image:e}=this.props.copywriting,a=this.querySelector(".sku");if(!a)return;const i=s.getResponsiveSrc(e);!function(e,a,i,s,t){const n=(a,i)=>{e.setAttribute(a,i);const n=()=>e.classList.add("lazy-loaded");if(s){const a=new Image;return a.src=s,a.onload=n,void(a.onerror=()=>{t&&t(`Image ${s} cannot be loaded.`),e.classList.add("lazy-loaded-error")})}n()};if(/Trident\/|MSIE/.test(window.navigator.userAgent)||(r=window.navigator.userAgent,c=r.indexOf("OS "),(r.indexOf("iPhone")>-1||r.indexOf("iPad")>-1)&&c>-1&&window.Number(r.substr(c+3,3).replace("_","."))<14))n(a,i);else if("IntersectionObserver"in window){e.classList.add("lazy-load");let s=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&(n(a,i),s.unobserve(e.target))}))}));s.observe(e)}else n(a,i);var r,c}(a,"src",i,i)}}customElements.get("nb-pdp-header")||customElements.define("nb-pdp-header",r);export{r as default};
