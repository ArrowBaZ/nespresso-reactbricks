const n=n=>null==n,t=n=>n?n.toString().replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"",e=()=>window[window?.padlNamespace]?.dataLayer;class a extends HTMLElement{constructor(){super(),this.market=(()=>{const n=e();return n?n.app.app.market.toLocaleLowerCase():"ch"})(),this.language=e()?e().page.page.pageInfo.language.toLocaleLowerCase():"en",this.btnScrollToTop=null,this.dropdownButtons=null,this.boundOnNavigate=this.onNavigate.bind(this)}connectedCallback(){this.props=(t=>{const e=(n=>n.find((n=>"data"===n.nodeName)))([...t]),a=[...t].filter((n=>"data"!==n.nodeName)).reduce(((n,t)=>({...n,[t.nodeName]:t.nodeValue})),{});if(n(e))return a;try{return{...a,...JSON.parse(e.nodeValue)}}catch(n){console.log("ERROR: No data",n)}})(this.attributes),this.render()}render(){this.unbindEvent();const{id:n,name:t,creative:e,position:a}=this.props.campaign;this.innerHTML=`<nb-container\n                campaign_id="${n}"\n                campaign_name="${t}"\n                campaign_creative="${e}"\n                campaign_position="${a}"\n                classname="pt0 pb0"\n                contrast="light">\n                <div class="cb-row">\n                    <div class="country">${this.renderCountry()}</div>\n                </div>\n            </nb-container>`,this.bindEvent()}renderCountry(){const{label_dropdown:n,aa_description:e,aa_listbox_description:a,aa_select_description:o}=this.props.copywriting.languages.dropdown,{langs:i}=this.props.copywriting.languages;return this.getCurrentURLs(),`\n        ${this.renderFlag()}\n        <nb-dropdown\n            id="lang_menu_id_standalone"\n            data="${s={label:n,aa_description:e,aa_listbox_description:a,aa_select_description:o,icon_option:"check",options:i},t(JSON.stringify(s))}"></nb-dropdown>`;var s}renderFlag(){const{label_a11y:n,label_country:t}=this.props.copywriting.languages.country;return t?`<span class="t-xs-500-sl pre_language" title="${n}">${t}</span>`:""}getCurrentURLs(){const{langs:n}=this.props.copywriting.languages;let t=window.location.href;n.forEach((n=>{n.link=this.replaceLang(t,n.code),n.checked=n.code===this.language}))}replaceLang(n,t){return n.replace(`/${this.market}/${this.language}`,`/${this.market}/${t}`)}onNavigate(n){const t=n.target.getAttribute("data-link");t&&(window.location.href=t)}bindEvent(){this.dropdownButtons=this.querySelectorAll(".nb-dropdown__menu button"),this.dropdownButtons&&this.dropdownButtons.forEach((n=>{n.addEventListener("click",this.boundOnNavigate)}))}unbindEvent(){this.dropdownButtons&&this.dropdownButtons.forEach((n=>{n.removeEventListener("click",this.boundOnNavigate)}))}disconnectedCallback(){this.unbindEvent()}}customElements.get("nb-language-selector")||customElements.define("nb-language-selector",a);export{a as default};
