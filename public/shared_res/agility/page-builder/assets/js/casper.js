(self.webpackChunkweb_components_es6_loader=self.webpackChunkweb_components_es6_loader||[]).push([[883],{606:function(n,e,t){"use strict";t.r(e),t.d(e,{createCasperExperience:function(){return s},hasDefaultVariation:function(){return l},trackCasperXP:function(){return c}});var r=t(737);function o(){return(o=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}var i={event:"customEvent",eventRaisedBy:"Web component",eventCategory:"GTM Global Campaign Tracking",eventAction:"Personalized Component",eventLabel:"[component-name]",nonInteraction:1};function a(n){return n.replace(/^n-/,"pb_component_").replace(/-/g,"_")}function c(n){window.gtmDataObject=window.gtmDataObject||[];var e=o({},i);e.eventLabel=a(n),window.gtmDataObject.push(e)}var u=["basketContains","basketTotalIs","since"];function s(n,e,t,r){if(void 0===r&&(r=void 0),!window.casperEventHub&&!d())throw new Error("Error Casper Generator - can't find casperEventHub");var o=function(n){return n.variations.findIndex((function(n){return null!==n.personalisation}))}(e);-1==o||d()||p(n,e,o,t,r)}function p(n,e,t,c,u){if(void 0===u&&(u=void 0),window.casperEventHub){var s=e.variations[t].personalisation,l=f(e),d=new window.casperEventHub.Experience(s.name);s.rules.forEach((function(n){var e="experience."+n.type+"("+n.condition+")";new Function("experience",e)(d)})),d.executeOnMatch((function(s){!function(n,e,t,c,u){void 0===u&&(u=void 0),(0,r.n5)(n,e,t,c,u),function(n){window.gtmDataObject=window.gtmDataObject||[];var e=o({},i);e.eventLabel=a(n),e.eventAction="Personalized Component Match",window.gtmDataObject.push(e)}(e.module)}(n,e,t,c,u),s.unsubscribe()})),d.executeOnMismatch((function(o){(function(n){return w(n,(function(n){return"mismatches"===n.type}))})(e)||(function(n,e,t,o,i){var a;void 0===i&&(i=void 0);try{a=function(n,e){if(!window.nwc||!window.nwc.projects)throw new Error("Error Casper Generator - can't find nwc.projects");var t=window.nwc.projects.find((function(e){return e.id===n}));if(!t)throw new Error("Error Casper Generator - can't find project "+n);var r=t.components.find((function(n){return n.uuid===e}));if(!r)throw new Error("Error Casper Generator - can't find component "+e+" in project "+n);return r}(n,e)}catch(n){return void console.log(n)}a.variations.length>t+1&&null!==a.variations[t+1].personalisation?setTimeout((function(){try{p(n,a,t+1,o,i)}catch(n){console.log(n)}}),0):null===a.variations[0].personalisation&&(0,r.n5)(n,a,0,o,i)}(n,e.uuid,t,c,u),l||o.unsubscribe())})),d.evaluate()}}function f(n){return w(n,(function(n){return-1!==u.indexOf(n.type)}))}function w(n,e){return n.variations.some((function(n){return null!=n.personalisation&&n.personalisation.rules.some(e)}))}function l(n){return f(n)||d()}function d(){return-1!==window.location.pathname.indexOf("/iframe.html")}}}]);
//# sourceMappingURL=casper.js.map