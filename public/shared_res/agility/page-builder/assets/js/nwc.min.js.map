{"version":3,"sources":["webpack://web-components-es6-loader/webpack/runtime/load script","webpack://web-components-es6-loader/./src/polyfills.ts","webpack://web-components-es6-loader/./src/resource-tag.ts","webpack://web-components-es6-loader/./src/project-cache.ts","webpack://web-components-es6-loader/./src/web-component.ts","webpack://web-components-es6-loader/./src/json.ts","webpack://web-components-es6-loader/./src/placeholder.ts","webpack://web-components-es6-loader/./src/component-element.ts","webpack://web-components-es6-loader/./src/types.ts","webpack://web-components-es6-loader/./src/options.ts","webpack://web-components-es6-loader/./src/lazy-load.ts","webpack://web-components-es6-loader/./src/loader.ts","webpack://web-components-es6-loader/webpack/bootstrap","webpack://web-components-es6-loader/webpack/runtime/define property getters","webpack://web-components-es6-loader/webpack/runtime/ensure chunk","webpack://web-components-es6-loader/webpack/runtime/get javascript chunk filename","webpack://web-components-es6-loader/webpack/runtime/hasOwnProperty shorthand","webpack://web-components-es6-loader/webpack/runtime/make namespace object","webpack://web-components-es6-loader/webpack/runtime/publicPath","webpack://web-components-es6-loader/webpack/runtime/jsonp chunk loading","webpack://web-components-es6-loader/./src/userType.ts","webpack://web-components-es6-loader/./src/helpers/bootstrap.ts"],"names":["inProgress","dataWebpackPrefix","loadPolyfills","result","oldBrowser","win","script","value","Promise","createResourceTag","body","args","i","arguments","f","isModern","testCode","supportsDynamicImport","window","String","dynamicImport","literals","classFields","optionalChaining","code","err","promiseCache","alreadyLoaded","element","document","tagType","resolve","loadedProjects","then","loadTags","loadWC","preload","isLoaded","wcCache","NWC","loadDef","path","load","url","xhr","JSON","definition","style","modern","legacy","recover","Error","e","loadDeps","loadDep","preloadDeps","deps","resources","PLACEHOLDER_STYLE_ID","PLACEHOLDER_ID","getPlaceholderID","projectId","isPlaceholder","setPlaceholderHeight","isString","vhValue","convertPXToVH","actualHeight","Math","height","actualHeightMobile","heightMobile","setMinHeightStyle","parseInt","Object","getProjectContainer","projectContainer","containerTimeout","setTimeout","console","clearInterval","reject","containerInterval","setInterval","clearTimeout","setAttributes","isNaN","parseFloat","attributes","createElement","component","properties","order","addMinHeight","VERTUO","ORIGINAL","excludeTech","techOption","project","getTechOption","isPage","neitherTech","targetTech","plpData","shouldBe","currentTech","MACHINE_TECHNO_NAME","isTechnoName","getPLPData","item","matchCriteria","test","excludeIE","PRODUCT_LIST_NAME","rootMargin","pact","state","observer","callback","_this","onFulfilled","onRejected","displayPlaceholder","placeHolder","maxHeight","getPlaceholder","promises","getViewportPromises","nextComponent","_cycle","array","thenable","isElementInViewport","isContainer","IntersectionObserver","entries","entry","threshold","PROJ_CONTAINER_THRESHOLD","obs","isPreviousInViewport","previous","isCloseToViewport","deferred","promise","resolvePromise","viewportCache","cacheViewportPromise","MINIMUM_COMPONENT_DISPLAYED","VIEWPORT_BOTTOM_MARGIN","OBSERVEE_THRESHOLD","index","replace","clearProjectFromCache","clearProjectContainer","loadProject","loadComponent","isAnchor","variation","correctId","module","moduleResources","flattenDeps","promiseResolve","variations","hasDefaultVariation","createCasperExperience","trackCasperXP","displayNewVariation","isProjectLoaded","Date","start","browserIsOld","styleSheet","earlyLoadResources","withAnchor","componentPromises","shouldPass","anchorAndAbove","projectLoadedTimeout","createEvent","clearCLSSize","matches","loadProjects","clearCache","container","Array","child","clearProjectsCache","lazyLoadEnabled","params","URLSearchParams","pathname","RegExp","LAZY_LOAD_DISABLE_REGEX","readLazyLoadOption","anchor","importComponent","BASE_URL","componentId","componentIndex","WEB_COMPONENT_PROJECTS_LOADED","WEB_COMPONENT_ANCHOR_LOADED","LAZY_LOAD_ENABLED_PARAM","PROJECTS_LOADED_TIMEOUT_DELAY","firstComponentLoaded","undefined","existingVariation","nextSibling","getNextSibling","appendVariation","variationId","eventName","Event","event","__webpack_module_cache__","__webpack_require__","moduleId","exports","__webpack_modules__","m","d","key","o","defineProperty","enumerable","get","chunkId","all","keys","reduce","u","obj","prop","prototype","hasOwnProperty","call","l","done","push","needAttach","scripts","getElementsByTagName","length","s","getAttribute","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","onerror","onload","doneFns","parentNode","removeChild","forEach","fn","bind","type","target","head","appendChild","r","Symbol","toStringTag","p","installedChunks","179","j","installedChunkData","error","errorType","realSrc","message","name","request","chunkLoadingGlobal","self","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","resolves","shift","addMouseUser","getBreakpoint","vw","callbackResizeFunction","func","rest","timer","debounce","newBreakpoint"],"mappings":"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","file":"nwc.min.js","sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"web-components-es6-loader:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { createResourceTag } from './resource-tag'\nimport { loadProjects } from './loader'\nlet isModern: boolean\nconst win = window\n\nexport async function loadPolyfills(): Promise<void> {\n  if (oldBrowser()) {\n    win.addEventListener('WebComponentsReady', loadProjects)\n    win.addEventListener('beforeunload', function () {\n      win.removeEventListener('WebComponentsReady', loadProjects)\n    })\n    const script = 'script'\n    await Promise.all([\n      createResourceTag('https://cdn.polyfill.io/v2/polyfill.min.js', script),\n      createResourceTag(\n        'https://unpkg.com/@webcomponents/webcomponentsjs@latest/webcomponents-loader.js',\n        script\n      ),\n      createResourceTag('https://unpkg.com/@webcomponents/custom-elements', script),\n      createResourceTag(\n        'https://unpkg.com/@webcomponents/webcomponentsjs/custom-elements-es5-adapter.js',\n        script\n      ),\n    ])\n  }\n}\n\nexport function oldBrowser(): boolean {\n  // cache result, call only once\n  if (isModern == null) {\n    isModern = isModernBrowser()\n  }\n  return !isModern\n}\n\nfunction isModernBrowser(): boolean {\n  return (\n    supportsDynamicImport() &&\n    Promise.prototype.finally != null &&\n    supportsLiterals() &&\n    supportsClassFields() &&\n    Promise.any != null &&\n    window.WeakRef != null &&\n    String.prototype.replaceAll != null &&\n    supportsChaining()\n  )\n}\n\nconst dynamicImport = 'import(\"\")'\nconst literals = '\"\"===``'\nconst classFields = 'class WithFields{ #privateField; instanceField; }'\nconst optionalChaining = 'const foo = {}; foo?.bar'\n\nfunction testCode(code: string): boolean {\n  try {\n    // eslint-disable-next-line @typescript-eslint/no-implied-eval\n    new Function(code)\n    return true\n  } catch (err) {\n    return false\n  }\n}\n\nfunction supportsDynamicImport() {\n  return testCode(dynamicImport)\n}\n\nfunction supportsLiterals(): boolean {\n  return testCode(literals)\n}\n\nfunction supportsClassFields(): boolean {\n  return testCode(classFields)\n}\n\nfunction supportsChaining(): boolean {\n  return testCode(optionalChaining)\n}\n","import { TagType } from './types'\nimport { oldBrowser } from './polyfills'\n\nexport const alreadyLoaded: URLCache = {}\nexport const promiseCache: PromiseCache = {}\ninterface URLCache {\n  [url: string]: boolean\n}\ninterface PromiseCache {\n  [url: string]: Promise<void>\n}\n\nexport async function createResourceTag(url: string, tagType: TagType): Promise<void> {\n  if (promiseCache[url] != null) {\n    return promiseCache[url]\n  }\n  return (promiseCache[url] = new Promise((resolve) => {\n    if (alreadyLoaded[url] === true) {\n      resolve()\n      return\n    }\n    const element: HTMLScriptElement | HTMLLinkElement = document.createElement(tagType)\n    if (tagType === 'script') {\n      element.type = oldBrowser() ? 'text/javascript' : 'module'\n      ;(element as HTMLScriptElement).defer = true\n      ;(element as HTMLScriptElement).src = url\n    } else {\n      ;(element as HTMLLinkElement).rel = 'stylesheet'\n      ;(element as HTMLLinkElement).href = url\n    }\n    element.onerror = element.onload = () => {\n      resolve()\n    }\n    alreadyLoaded[url] = true\n    document.head.appendChild(element)\n  }))\n}\n","import { ProjectCache, Project } from './types'\n\nexport const loadedProjects: ProjectCache = {}\n\nexport function isProjectLoaded(project: Project): boolean {\n  if (loadedProjects[project.id] != null) {\n    return true\n  } else {\n    loadedProjects[project.id] = true\n    return false\n  }\n}\n\nexport function clearProjectFromCache(project: Project): void {\n  delete loadedProjects[project.id]\n}\n\nexport function clearProjectsCache(): void {\n  for (const project in loadedProjects) delete loadedProjects[project]\n}\n","import { WCDefinition, WCCache, ComponentPreload, ComponentResources } from './types'\nimport { loadJSON } from './json'\nimport { createResourceTag } from './resource-tag'\nimport { oldBrowser } from './polyfills'\n\nexport const wcCache: WCCache = {}\nconst fileName = 'package.json'\n/**\n * Returns a promise resolving when the given Web Component is ready\n * Maps Web Components by path\n * @param path path of the given WC's package.json (without file name)\n */\nexport async function loadWC(path: string, preload: ComponentPreload | null = null): Promise<void> {\n  if (isLoaded(path)) {\n    return wcCache[path].ready\n  } else {\n    return new NWC().loadDef(path, preload)\n  }\n}\n\nexport function isLoaded(path: string): boolean {\n  return wcCache[path] != null\n}\nexport default class NWC {\n  public ready?: Promise<void>\n  /**\n   * Checks that it returns directly the promise to be able to await from multiple place the readiness of the webcomponent\n   */\n  public async loadDef(path: string, preload: ComponentPreload | null): Promise<void> {\n    wcCache[path] = this\n    this.ready = this.load(path, preload)\n    return await this.ready\n  }\n  /**\n   * Loads all the necessary resources for one given WC\n   */\n  private async load(path: string, preload: ComponentPreload | null): Promise<void> {\n    try {\n      if (preload !== null) {\n        //this will start loading the scripts before receiving package.json\n        void this.loadTags(preload)\n      }\n      const definition: WCDefinition = await loadJSON(path + fileName)\n      const { stylesheet: style, module: modern, nomodule: legacy } = definition.scripts\n      await Promise.all([\n        await this.loadDeps(definition),\n        await this.loadTags({ style, modern, legacy }),\n      ])\n    } catch (e) {\n      throw new Error('Error - WebComponent.load ' + (e as Error).message)\n    }\n  }\n\n  private async loadDeps(definition: WCDefinition): Promise<void> {\n    // Check if component has dependencies\n    if (definition.scriptDependencies) {\n      // Load dependencies\n      await Promise.all(definition.scriptDependencies.map(this.loadDep.bind(this)))\n    }\n  }\n\n  private async loadDep(path: string): Promise<void> {\n    return loadWC(path, null)\n  }\n\n  /**\n   * Optionally the preload argument can contain deps which need to be individually preloaded\n   * @param deps\n   */\n  private async preloadDeps(\n    deps: ComponentResources[] | undefined\n  ): Promise<void | [void, void][]> {\n    if (deps != null) {\n      return Promise.all(\n        deps.map(({ style, modern, legacy }) => {\n          return Promise.all([\n            createResourceTag(oldBrowser() ? legacy : modern, 'script'),\n            createResourceTag(style, 'link'),\n          ])\n        })\n      )\n    } else {\n      return\n    }\n  }\n\n  private async loadTags(\n    resources: ComponentPreload\n  ): Promise<[void | [void, void][], void, void]> {\n    const { style, modern, legacy } = resources\n    return Promise.all([\n      this.preloadDeps(resources.deps as ComponentResources[] | undefined),\n      createResourceTag(oldBrowser() ? legacy : modern, 'script'),\n      createResourceTag(style, 'link'),\n    ])\n  }\n}\n","import { WCDefinition } from './types'\n\n// LIB: get a JSON and call a callback\n// create and send the request\nexport function loadJSON(url: string): Promise<WCDefinition> {\n  return new Promise((resolve) => {\n    const xhr = new XMLHttpRequest()\n    xhr.onload = function () {\n      resolve(JSON.parse(xhr.responseText))\n    }\n    xhr.open('GET', url)\n    xhr.send()\n  })\n}\n","export const PLACEHOLDER_STYLE_ID = 'nwc-placeholder-style'\nexport const PLACEHOLDER_ID = 'nwc-loader-placeholder-'\nconst DEFAULT_HEIGHT = 40\nconst color = '#FAF9F8'\n\nexport function getPlaceholderID(projectId: string): string {\n  return PLACEHOLDER_ID + projectId\n}\n\nexport function getPlaceholder(projectId: string, maxHeight = DEFAULT_HEIGHT): HTMLDivElement {\n  const element: HTMLDivElement = document.createElement('div')\n  setPlaceholderHeight(maxHeight, maxHeight, getPlaceholderID(projectId), element)\n  element.style.backgroundColor = color\n  element.id = getPlaceholderID(projectId)\n  return element\n}\n\nfunction setMinHeightStyle(\n  minHeight: string,\n  minHeightMobile: string,\n  placeholderId: string\n): void {\n  let style = document.getElementById(PLACEHOLDER_STYLE_ID)\n  if (style === null) {\n    style = document.createElement('style')\n    style.id = PLACEHOLDER_STYLE_ID\n    style = document.body.appendChild(style)\n  }\n  style.textContent = `\n    #${placeholderId} {\n      min-height: ${minHeightMobile};\n    }\n    @media (min-width: 768px) {\n      #${placeholderId} {\n        min-height: ${minHeight};\n      }\n    }\n  `\n}\n\nexport function isPlaceholder(element: Element): boolean {\n  return element.id.indexOf(PLACEHOLDER_ID) !== -1\n}\n\nexport function setPlaceholderHeight(\n  height: number | string,\n  heightMobile: number | string,\n  placeholderId: string,\n  element?: HTMLDivElement | null\n): void {\n  if (element == null) {\n    return\n  }\n  let actualHeight\n  let actualHeightMobile\n  if (isString(height)) {\n    const vhValue = convertPXToVH(height)\n    //eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n    actualHeight = Math.min(vhValue, DEFAULT_HEIGHT) + 'vh'\n  } else {\n    //eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n    actualHeight = height + 'vh'\n  }\n  if (isString(heightMobile)) {\n    const vhValue = convertPXToVH(heightMobile)\n    //eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n    actualHeightMobile = Math.min(vhValue, DEFAULT_HEIGHT) + 'vh'\n  } else {\n    //eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n    actualHeightMobile = heightMobile + 'vh'\n  }\n  setMinHeightStyle(actualHeight, actualHeightMobile, placeholderId)\n}\n\nfunction convertPXToVH(value: string): number {\n  return Math.round(parseInt(value) / (document.documentElement.clientHeight / 100))\n}\n\nfunction isString(value: string | number): value is string {\n  return typeof value === 'string' || Object.prototype.toString.call(value) === '[object String]'\n}\n\nexport function clearPlaceHolder(projectId: string): void {\n  const placeHolder = document.getElementById(getPlaceholderID(projectId))\n  placeHolder && placeHolder.parentElement && placeHolder.parentElement.removeChild(placeHolder)\n}\n","import { lazyLoadEnabled } from './loader'\nimport { isPlaceholder } from './placeholder'\nimport { NWComponent, VariationProperties, Component, Project } from './types'\n\nexport const CONTAINER_NOT_FOUND = 'containerNotFound'\n\n/**\n * Sets the attributes and values of a given Element\n */\nexport function setAttributes(element: NWComponent, attributes: VariationProperties): void {\n  for (const attribute in attributes) {\n    if (!isNaN(parseFloat(attribute))) {\n      continue\n    }\n    const value = attributes[attribute]\n    if (typeof value === 'object') {\n      setAttributes(element, value as VariationProperties)\n    } else {\n      element.setAttribute(attribute, value)\n    }\n  }\n}\n\n/**\n * Creates WC element and assigns its attributes\n */\nexport function createElement(\n  component: Component,\n  variationId: number,\n  order: number\n): NWComponent {\n  const element: NWComponent = (component.el = document.createElement(\n    component.module\n  ) as NWComponent)\n  element.variationId = variationId\n  // Set the attributes\n  if (typeof component.uuid === 'undefined') {\n    console.log(\"Error - Web Component Loader - can't find uuid in \", component.module)\n  }\n  const { properties } = component.variations[variationId]\n  properties.id = component.uuid\n  properties['data-wc-order'] = order.toString()\n  setAttributes(element, properties)\n  if (lazyLoadEnabled) {\n    addMinHeight(component)\n  }\n  element.setAttribute('data', JSON.stringify(properties))\n  if (component.sectionId != null) {\n    element.dataset.id = component.sectionId\n  }\n  return element\n}\n\n/**\n * improves CLS and lazy load reliability\n * display:block because the min-height can't affect inline-block\n * which is the default web component value\n */\nfunction addMinHeight(component: Component): void {\n  if (component.minHeight != null && component.minHeightMobile != null) {\n    const style = document.createElement('style')\n    style.textContent = `\n      #${component.uuid} {\n        min-height: ${component.minHeightMobile}px;\n        display:block;\n      }\n      @media (min-width: 768px) {\n        #${component.uuid} {\n          min-height: ${component.minHeight}px;\n          display:block;\n        }\n      }\n    `\n    document.body.appendChild(style)\n  }\n}\n\nexport async function getProjectContainer(projectId: string): Promise<HTMLElement | null> {\n  let projectContainer = document.getElementById(projectId)\n  if (!projectContainer) {\n    /**\n     * this procedure waits for the project container to appear for 8 sec\n     * it checks every 450ms\n     * either the container is found and appendVariation continue or\n     * after the timeout, if the promise rejects, appendVariation is cancelled\n     */\n    try {\n      /**\n       * unit test raise a lint error if this promise is not typed as void and\n       * resolve is without arguments\n       */\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n      ;(await new Promise((resolve, reject) => {\n        const containerTimeout = setTimeout(() => {\n          console.log(\"can't find project's container before timeout\", projectId)\n          clearInterval(containerInterval)\n          reject()\n        }, 8000)\n        const containerInterval = setInterval(() => {\n          projectContainer = document.getElementById(projectId)\n          if (projectContainer) {\n            clearInterval(containerInterval)\n            clearTimeout(containerTimeout)\n            resolve()\n          }\n        }, 450)\n      })) as void\n    } catch (e) {\n      return null\n    }\n  }\n  return projectContainer\n}\n\n/**\n * Appends or inserts the variation element to the project's container\n */\nexport async function appendVariation(\n  projectId: string,\n  component: Component,\n  newVariation: NWComponent,\n  order: number\n): Promise<void> {\n  const projectContainer = (await getProjectContainer(projectId)) as HTMLElement\n  const existingVariation = document.getElementById(component.uuid)\n\n  if (existingVariation) {\n    ;(existingVariation.parentElement as HTMLElement).insertBefore(newVariation, existingVariation)\n    existingVariation.remove()\n  } else {\n    const nextSibling = getNextSibling(projectContainer, order)\n    if (nextSibling) {\n      component.el = projectContainer.insertBefore(newVariation, nextSibling)\n    } else {\n      if (projectContainer.lastElementChild && isPlaceholder(projectContainer.lastElementChild)) {\n        component.el = projectContainer.insertBefore(\n          newVariation,\n          projectContainer.lastElementChild\n        )\n      } else {\n        component.el = projectContainer.appendChild(newVariation)\n      }\n    }\n  }\n}\n\n/**\n * returns the sibling element of a new variation if it exists.\n * If the projectContainer contains other component instances\n * the new instance needs to be inserted in the right position\n */\nfunction getNextSibling(projectContainer: HTMLElement, order: number): Element | undefined {\n  return Array.from(projectContainer.children).find((child) =>\n    parseInt(child.getAttribute('data-wc-order') as string) > order ? true : false\n  )\n}\n\nexport function clearProjectContainer(project: Project): void {\n  const projectContainer = document.getElementById(project.id)\n  if (projectContainer) {\n    projectContainer.innerHTML = ''\n  }\n}\n","import NWC from './web-component'\n\nexport const VERTUO = 'vertuo'\nexport const ORIGINAL = 'original'\n\nexport {}\n\ndeclare global {\n  interface Window {\n    nwc: NespressoWebComponent\n    casperEventHub?: CasperEventHub\n    gtmDataObject?: GTMDataObjectItem[]\n    ui?: CremaModuleData[]\n    plpData: Promise<PLPData>\n    WeakRef?: () => void\n  }\n}\n\nexport interface PLPData {\n  techno: string\n  data: ProductListModuleData\n}\n\nexport interface CremaModuleData {\n  module: string\n  id: string\n  configuration: {\n    eCommerceData: Record<string, unknown>\n  }\n}\n\nexport type ViewportCache = Record<string, ProjectViewportCache>\nexport type ProjectViewportCache = ComponentViewportCache[]\nexport type ComponentViewportCache = Promise<void>\n\nexport interface ProductListModuleData extends CremaModuleData {\n  configuration: {\n    eCommerceData: {\n      categories: Category[]\n      productGroups: ProductGroup[]\n      products: [Product, ...Product[]]\n    }\n  }\n}\n\nexport interface Product {\n  technologies: string[]\n}\n\nexport interface ProductGroup {\n  categoryId: string\n  productIds: string[]\n}\n\nexport interface Category {\n  id: string\n  name: string\n  description: string\n  subCategories: string[]\n  superCategories: string[]\n}\n\nexport interface GTMDataObjectItem {\n  event: string\n  eventRaisedBy: string\n  eventCategory: string\n  eventAction: string\n  eventLabel: string\n  nonInteraction: number\n}\n\ninterface NespressoWebComponent {\n  bootstrap?: boolean\n  breakpoint?: string\n  updateVariation?: (componentId: string, variationId: number) => void\n  load?: (clearCache: boolean | undefined) => Promise<void>\n  projects?: Project[]\n  replace?: (project: Project) => void\n  importComponent?: (path: string) => Promise<void>\n  isComponentLoaded?: (path: string) => boolean\n  hasListeners?: boolean\n  lazyLoadEnabled?: boolean\n}\n\nexport interface Project {\n  id: string\n  version: string\n  created: string\n  stylesheets?: string[]\n  modules?: string[]\n  nomodule?: string[]\n  preload?: Preload\n  components: Component[]\n  options?: ProjectOptions\n}\n\nexport type Preload = Record<string, ComponentPreload>\n\nexport interface ComponentResources {\n  style: string\n  modern: string\n  legacy: string\n}\n\nexport type ComponentPreload = ComponentResources & {\n  deps?: ((ComponentResources & { module: string }) | string)[]\n}\n\ninterface ProjectOptions {\n  excludeIE?: boolean\n  onlyOriginal?: boolean\n  onlyVertuo?: boolean\n}\n\nexport type MachineTech = typeof ORIGINAL | typeof VERTUO | string\n\nexport interface Component {\n  uuid: string\n  sectionId?: string\n  module: string\n  folder: string\n  version: string\n  variations: Variation[]\n  el?: NWComponent\n  minHeight?: string\n  minHeightMobile?: string\n}\n\nexport interface NWComponent extends HTMLElement {\n  variationId: number\n}\n\nexport interface Variation {\n  index: number\n  properties: VariationProperties\n  personalisation?: Personalization | null\n}\n\nexport interface VariationProperties {\n  [propName: string]: string | VariationProperties | string[]\n}\n\nexport interface Personalization {\n  name: string\n  rules: Rule[]\n}\n\nexport interface Rule {\n  type: string\n  condition: string\n}\n\nexport interface WCDefinition {\n  name: string\n  version: string\n  description: string\n  folder: string\n  author: string\n  preview: string\n  scriptDependencies?: string[]\n  scripts: WCScripts\n  tag: string\n}\ninterface WCScripts {\n  stylesheet: string\n  nomodule: string\n  module: string\n}\n\nexport type TagType = 'link' | 'script'\n\ninterface CasperEventHub {\n  Experience: ExperienceConstructor\n  allOf: Predicate\n  oneOf: Predicate\n  any: Predicate\n  isGreaterThanOrEqual: Predicate\n  isLessThanOrEqual: Predicate\n  noneOf: Predicate\n  olderThan: Predicate\n  regex: Predicate\n}\n\n/**\n * Casper Event Hub Types\n */\nexport type Primitive = string | number | boolean | IUnknownObject | string[] | number[] | Predicate\nexport interface IUnknownObject {\n  [index: string]: Primitive | undefined\n}\nexport type Predicate = (\n  possibilities: Possibilities,\n  ...args: Array<Predicate | Possibilities>\n) => boolean\nexport type Predicates = Array<Predicate>\nexport type Condition = Primitive | Predicate | IUnknownObject\nexport type Conditions = Array<Condition> & IndexableArray\nexport type Possibility = Primitive | Primitive[]\nexport type Possibilities = Array<Possibility>\nexport type IndexableArray = {\n  [index in ArrayTestMethods]: (callback: (item: Condition) => boolean) => boolean\n}\nexport type ArrayTestMethods = 'every' | 'some'\n/**\n * End of Casper Event Hub Types\n */\n\nexport interface ExperienceType {\n  executeOnMatch: (callback: (data: ExperienceArg) => void) => ExperienceType\n  executeOnMismatch: (callback: (data: ExperienceArg) => void) => ExperienceType\n  evaluate: () => ExperienceType\n}\nexport interface ExperienceArg {\n  unsubscribe: () => void\n}\n\nexport interface CasperRule {\n  args: any[]\n}\n\ninterface ExperienceConstructor {\n  new (name: string): ExperienceType\n}\n\nexport interface ProjectCache {\n  [id: string]: boolean\n}\n\nexport interface WCCache {\n  [id: string]: NWC\n}\n","import { MachineTech, ORIGINAL, ProductListModuleData, Project, VERTUO } from './types'\n\nconst MACHINE_TECHNO_NAME = '/machineTechno/'\n\nconst PRODUCT_LIST_NAME = 'ProductList'\n\nexport async function matchCriteria(project: Project): Promise<boolean> {\n  return excludeIE(project) && (await excludeTech(project))\n}\n\nexport function isRunningIE(): boolean {\n  return /Trident\\/|MSIE/.test(window.navigator.userAgent)\n}\n\nexport function excludeIE(project: Project): boolean {\n  return (\n    project.options == null ||\n    project.options.excludeIE == null ||\n    project.options.excludeIE === false ||\n    !isRunningIE()\n  )\n}\n\nfunction isTechnoName(shouldBe: string, currentTech: string): boolean {\n  return (\n    currentTech.substr(currentTech.indexOf(MACHINE_TECHNO_NAME) + MACHINE_TECHNO_NAME.length) ===\n    shouldBe\n  )\n}\n\nasync function getPLPData(): Promise<ProductListModuleData | null> {\n  if (window.plpData != null) {\n    return (await window.plpData).data\n  } else if (window.ui != null) {\n    return window.ui.find((item) => item.module === PRODUCT_LIST_NAME) as ProductListModuleData\n  }\n  return null\n}\n\nasync function isPage(targetTech: string): Promise<boolean> {\n  const plpData: ProductListModuleData | null = await getPLPData()\n  if (plpData == null) return true\n  const currentTechs = plpData.configuration.eCommerceData.products[0].technologies\n  return currentTechs.some((currentTech) => isTechnoName(targetTech, currentTech))\n}\n\nasync function neitherTech(): Promise<boolean> {\n  return !(await isPage(VERTUO)) && !(await isPage(ORIGINAL))\n}\n\nfunction getTechOption(project: Project): MachineTech | null {\n  if (project.options == null) return null\n  if (project.options.onlyOriginal) {\n    return ORIGINAL\n  } else if (project.options.onlyVertuo) {\n    return VERTUO\n  } else {\n    return null\n  }\n}\n\nexport async function excludeTech(project: Project): Promise<boolean> {\n  const techOption: MachineTech | null = getTechOption(project)\n  if (techOption === null) {\n    return true\n  }\n  return (await neitherTech()) || (await isPage(techOption))\n}\n","import { CONTAINER_NOT_FOUND, getProjectContainer } from './component-element'\nimport { getPlaceholder, getPlaceholderID, setPlaceholderHeight } from './placeholder'\nimport { Component, Project, ViewportCache } from './types'\n\nlet viewportCache: ViewportCache = {}\n\nconst MINIMUM_COMPONENT_DISPLAYED = 2\nconst VIEWPORT_BOTTOM_MARGIN = '600px'\nconst OBSERVEE_THRESHOLD = 0.8\nconst PROJ_CONTAINER_THRESHOLD = 0.1\n\n/**\n * Main API entry\n *\n * will resolves when the given component is ready to be displayed\n * acts as a pause in the loader's main rendering loop at the project level\n *\n * the spec are, the component should render if the previous component is\n * visible in proportion set by OBVSERVEE_THRESHOLD inside the viewport\n *  augmented by VIEWPORT_BOTTOM_MARGIN\n *\n * @param project\n * @param order\n */\nexport async function isCloseToViewport(\n  project: Project,\n  order: number,\n  passLazy: boolean\n): Promise<(value: void | PromiseLike<void>) => void> {\n  const { promise, resolve: resolvePromise } = deferred<void>()\n\n  cacheViewportPromise(project.id, order, promise)\n  //waits one tick to let all the project's component create their own promise\n  await new Promise((resolve: (value?: unknown) => void) => {\n    setTimeout(() => {\n      resolve()\n    }, 0)\n  })\n\n  if (order > MINIMUM_COMPONENT_DISPLAYED && !passLazy) {\n    //awaits rendering of all prior element in the project\n    await Promise.all(getViewportPromises(project.id, order - 1))\n  }\n  await isPreviousInViewport(project, order)\n  return resolvePromise\n}\n\n/**\n * resolves when the section before in the project is\n * visible enough to trigger the current component\n * render\n *\n * @param project\n * @param order\n */\nasync function isPreviousInViewport(project: Project, order: number): Promise<void> {\n  let previous: HTMLElement | null\n  let isContainer = false\n  if (order <= MINIMUM_COMPONENT_DISPLAYED) {\n    const projectContainer: HTMLElement | null = await getProjectContainer(project.id)\n    if (projectContainer === null) {\n      throw CONTAINER_NOT_FOUND\n    }\n    previous = projectContainer\n    isContainer = true\n  } else {\n    previous = project.components[order - 1].el as HTMLElement\n  }\n  if (previous != null) {\n    await isElementInViewport(previous, isContainer)\n  }\n}\n\n/**\n * resolves when the targeted section is visible enough\n *\n * @param element\n */\nasync function isElementInViewport(element: HTMLElement, isContainer = false): Promise<void> {\n  return new Promise((resolve) => {\n    const obs = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            observer.disconnect()\n            resolve()\n          }\n        })\n      },\n      {\n        threshold: isContainer ? PROJ_CONTAINER_THRESHOLD : OBSERVEE_THRESHOLD,\n        rootMargin: `10000px 0px ${VIEWPORT_BOTTOM_MARGIN} 0px`,\n      }\n    )\n    obs.observe(element)\n  })\n}\n\n/**\n * adds a placeholder rectangle at the bottom of the project's container\n *  until the project has finished loading/rendering\n */\nexport async function displayPlaceholder(project: Project): Promise<void> {\n  const projectContainer = await getProjectContainer(project.id)\n  if (projectContainer == null) {\n    return\n  }\n  let placeHolder = getPlaceholder(project.id)\n  placeHolder = projectContainer.appendChild(placeHolder)\n  const promises = getViewportPromises(project.id)\n  for (let i = 0; i < promises.length; i++) {\n    await promises[i]\n    if (i === project.components.length - 2) {\n      const nextComponent: Component = project.components[i + 1]\n      if (nextComponent.minHeight != null && nextComponent.minHeightMobile != null) {\n        setPlaceholderHeight(\n          nextComponent.minHeight,\n          nextComponent.minHeightMobile,\n          getPlaceholderID(project.id)\n        )\n      }\n    }\n  }\n  await Promise.all(promises)\n  placeHolder.parentElement && placeHolder.parentElement.removeChild(placeHolder)\n}\n\nfunction cacheViewportPromise(projectId: string, order: number, promise: Promise<void>): void {\n  if (!viewportCache[projectId]) {\n    viewportCache[projectId] = []\n  }\n  viewportCache[projectId][order] = promise\n}\n\n// returns all rendering promises equal or prior to given order (index)\nfunction getViewportPromises(projectId: string, order?: number): Promise<void>[] {\n  if (order == null) {\n    return viewportCache[projectId]\n  }\n  return viewportCache[projectId].filter((_, index) => index <= order)\n}\n\nexport function clearViewportPromises(): void {\n  viewportCache = {}\n}\n\nconst deferred = <T>(): {\n  resolve: (value: T | PromiseLike<T>) => void\n  reject: (reason?: any) => void\n  promise: Promise<T>\n} => {\n  let resolve!: (value: T | PromiseLike<T>) => void\n  let reject!: (reason?: any) => void\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res\n    reject = rej\n  })\n\n  return {\n    resolve,\n    reject,\n    promise,\n  }\n}\n","import { Project, Component, ComponentPreload } from './types'\nimport { createResourceTag } from './resource-tag'\nimport { loadPolyfills, oldBrowser } from './polyfills'\nimport { isProjectLoaded, clearProjectFromCache, clearProjectsCache } from './project-cache'\nimport { loadWC, isLoaded } from './web-component'\nimport { createElement, appendVariation, clearProjectContainer } from './component-element'\nimport { matchCriteria } from './options'\nimport { clearViewportPromises, displayPlaceholder, isCloseToViewport } from './lazy-load'\nimport { clearPlaceHolder, isPlaceholder } from './placeholder'\n\nwindow.nwc = window.nwc || {}\nwindow.nwc.replace = replace\nwindow.nwc.load = load\nwindow.nwc.updateVariation = updateVariation\nwindow.nwc.importComponent = importComponent\nwindow.nwc.isComponentLoaded = isComponentLoaded\n\nconst WEB_COMPONENT_PROJECTS_LOADED = 'WEB_COMPONENT_PROJECTS_LOADED'\nconst WEB_COMPONENT_ANCHOR_LOADED = 'WEB_COMPONENT_ANCHOR_LOADED'\nconst WEB_COMPONENT_FIRST_COMPONENT_DISPLAYED = 'WEB_COMPONENT_FIRST_COMPONENT_DISPLAYED'\nconst LAZY_LOAD_ENABLED_PARAM = 'lazyLoadEnabled'\nconst LAZY_LOAD_DISABLE_REGEX = 'order\\/capsules\\/(original|vertuo)\\/[a-z\\d-]+'\nconst PROJECTS_LOADED_TIMEOUT_DELAY = 500\n\nconst BASE_URL = '/shared_res/agility/'\n\nlet firstComponentLoaded = false\nexport let lazyLoadEnabled = false\nlet projectLoadedTimeout: number | null\n\nexport let start = Date.now()\nexport let anchor = ''\n\nexport async function importComponent(path: string): Promise<void> {\n  return loadWC(BASE_URL + path)\n}\n\nexport function isComponentLoaded(path: string): boolean {\n  return isLoaded(BASE_URL + path)\n}\n\n/**\n * Initializes the nwc.projects\n * called by the loader's loader tag once the loader is loaded\n */\nexport async function load(clearCache = false): Promise<void> {\n  readLazyLoadOption()\n  anchor = getAnchor()\n  await loadPolyfills()\n  void createResourceTag('/shared_res/agility/web-components/assets/css/fonts.css', 'link')\n  await loadProjects(null, clearCache)\n  //here the projects are all loaded / ready / pushed on screen\n  dispatchProjectLoaded()\n}\n\nfunction dispatchProjectLoaded(): void {\n  if (projectLoadedTimeout != null) {\n    clearTimeout(projectLoadedTimeout)\n    projectLoadedTimeout = null\n  }\n  projectLoadedTimeout = window.setTimeout(\n    () => window.dispatchEvent(createEvent(WEB_COMPONENT_PROJECTS_LOADED)),\n    PROJECTS_LOADED_TIMEOUT_DELAY\n  )\n}\n\nfunction dispatchAnchorLoaded(): void {\n  if (projectLoadedTimeout != null) {\n    clearTimeout(projectLoadedTimeout)\n    projectLoadedTimeout = null\n  }\n  projectLoadedTimeout = window.setTimeout(\n    () => window.dispatchEvent(createEvent(WEB_COMPONENT_ANCHOR_LOADED)),\n    PROJECTS_LOADED_TIMEOUT_DELAY\n  )\n}\n\n/**\n * this is reading first the global variable (low priority)\n * then the query param\n * The query param is considered true is anything else then \"false\"\n */\nfunction readLazyLoadOption(): void {\n  lazyLoadEnabled =\n    window.nwc.lazyLoadEnabled != null ? window.nwc.lazyLoadEnabled : lazyLoadEnabled\n  const params = new URLSearchParams(window.location.search)\n  lazyLoadEnabled = params.has(LAZY_LOAD_ENABLED_PARAM)\n    ? params.get(LAZY_LOAD_ENABLED_PARAM) !== 'false'\n    : lazyLoadEnabled\n  // TODO: properly fix all PDP, dirty switch off\n  if (lazyLoadEnabled) {\n    const {pathname} = window.location\n    lazyLoadEnabled = !(new RegExp(LAZY_LOAD_DISABLE_REGEX, 'g').test(pathname))\n  }\n}\n\n/**\n * Loads all projects\n */\n// tslint:disable-next-line\nexport async function loadProjects(e: Event | null, clearCache = false): Promise<void> {\n  if (clearCache) clearProjects()\n  if (window.nwc && window.nwc.projects) {\n    await Promise.all(window.nwc.projects.map(loadProject))\n  }\n}\n\nfunction clearProjects() {\n  clearPlaceHolders()\n  clearViewportPromises()\n  clearProjectsContainers()\n  clearProjectsCache()\n}\n\nfunction clearPlaceHolders(): void {\n  window.nwc &&\n    window.nwc.projects &&\n    window.nwc.projects.forEach((project) => clearPlaceHolder(project.id))\n}\n\nfunction clearProjectsContainers() {\n  window.nwc.projects &&\n    window.nwc.projects.forEach((project) => {\n      const container = document.getElementById(project.id)\n      if (container) {\n        Array.from(container.children)\n          .filter((child) => !isPlaceholder(child))\n          .forEach((child) => (child.parentElement as Element).removeChild(child))\n      }\n    })\n}\n\n/**\n * Loads the given project\n */\nasync function loadProject(project: Project): Promise<void> {\n  const matches = await matchCriteria(project)\n  const projectContainer = document.getElementById(project.id)\n  if (isProjectLoaded(project) || !project.components || !matches) {\n    if (!matches && projectContainer) {\n      clearCLSSize(projectContainer, project)\n    }\n    return\n  }\n  start = Date.now()\n  earlyLoadResources(project)\n  const withAnchor = project.components.findIndex(\n    (component: Component) => component?.sectionId === anchor\n  )\n\n  const componentPromises = project.components.map((component: Component, index: number) => {\n    // this makes sure we do not lazy load sections up to an anchor\n    const shouldPass = index <= withAnchor\n    return loadComponent(project.id, component, index, project, shouldPass)\n  })\n  if (lazyLoadEnabled) {\n    await new Promise((resolve: (value?: unknown) => void) => {\n      setTimeout(() => {\n        resolve()\n      }, 0)\n    })\n    void displayPlaceholder(project)\n  }\n\n  if (withAnchor !== -1) {\n    const anchorAndAbove = componentPromises.concat()\n    anchorAndAbove.length = withAnchor + 1\n    void Promise.all(anchorAndAbove).then(() => dispatchAnchorLoaded())\n  }\n  await Promise.all(componentPromises)\n  projectContainer && clearCLSSize(projectContainer, project)\n}\n\nfunction clearCLSSize(projectContainer: HTMLElement, project: Project): void {\n  projectContainer.classList.remove(project.id)\n}\n\n// optimize attempt, load all the resources early\nfunction earlyLoadResources(project: Project) {\n  const browserIsOld = oldBrowser()\n  if (project.stylesheets) {\n    project.stylesheets.forEach((styleSheet) => {\n      void createResourceTag(styleSheet, 'link')\n    })\n  }\n  if (browserIsOld) {\n    if (project.nomodule) {\n      project.nomodule.forEach((script) => {\n        void createResourceTag(script, 'script')\n      })\n    }\n  } else {\n    if (project.modules) {\n      project.modules.forEach((module) => {\n        void createResourceTag(module, 'script')\n      })\n    }\n  }\n  if (project.preload && !lazyLoadEnabled) {\n    Object.values(project.preload).forEach((component) => {\n      if (browserIsOld) {\n        void createResourceTag(browserIsOld ? component.legacy : component.modern, 'script')\n      }\n      void createResourceTag(component.style, 'link')\n    })\n  }\n}\n\n/**\n * This is an ugly hack because some element had historically used the\n *  ID attributes that now reside in each variation properties\n * But the loader has its own ID for each component which collides with\n * the variations ID\n */\nfunction correctId(component: Component): void {\n  const { properties } = component.variations[0]\n  if (properties.id) {\n    component.uuid = properties.id as string\n    component.variations.forEach((variation) => delete variation.properties.id)\n  }\n}\n\n/**\n * Loads a given project's component\n * @param order order of this component within the project\n */\nasync function loadComponent(\n  projectId: string,\n  component: Component,\n  order: number,\n  project: Project,\n  isAnchor: boolean\n): Promise<void> {\n  correctId(component)\n\n  let promiseResolve\n  if (lazyLoadEnabled) {\n    try {\n      promiseResolve = await isCloseToViewport(project, order, isAnchor)\n    } catch (e) {\n      console.log('Error in lazy load, project', project.id, 'component', order)\n    }\n    const preload: ComponentPreload | null = flattenDeps(project, component)\n    /**\n     * this promise await will wait until this wc is ready for use\n     * (CSS + JS loaded)\n     * before instancing the element\n     * */\n    await loadWC(component.folder, preload)\n  } else {\n    await loadWC(component.folder)\n  }\n\n  const { variations } = component\n  if (variations.length > 1 || variations[0].personalisation != null) {\n    //load casper chunk only when this component has variations\n    const { hasDefaultVariation, createCasperExperience, trackCasperXP } = await import(\n      /* webpackChunkName: \"casper\" */ './casper'\n    )\n    createCasperExperience(projectId, component, order, promiseResolve)\n    if (hasDefaultVariation(component)) {\n      displayNewVariation(projectId, component, 0, order, promiseResolve)\n    } else {\n      promiseResolve && promiseResolve()\n    }\n    trackCasperXP(component.module)\n  } else {\n    displayNewVariation(projectId, component, 0, order, promiseResolve)\n  }\n}\n\n/**\n * Handles the preload property from the project\n * the current module's entry contains its direct resources\n *  + a list of modules dependencies\n * It will append each dependency resources to the preload\n *  propery value and return it\n * @param project\n * @param component\n */\nfunction flattenDeps(project: Project, component: Component): ComponentPreload | null {\n  let preload: ComponentPreload | null = null\n\n  if (project.preload != null && project.preload[component.module] != null) {\n    preload = project.preload[component.module]\n    if (preload.deps != null) {\n      preload.deps = preload.deps.map((dep) => {\n        const module = dep as string\n        if (project.preload != null && project.preload[module] != null) {\n          const moduleResources = project.preload[module]\n          if (moduleResources != null) {\n            return {\n              module,\n              ...moduleResources,\n            }\n          }\n        }\n        return module\n      })\n    }\n  }\n  return preload\n}\n\n/**\n * Creates and inserts a component into its project's container\n */\nexport function displayNewVariation(\n  projectId: string,\n  component: Component,\n  variationId: number,\n  order: number,\n  resolve: ((value: void | PromiseLike<void>) => void) | undefined = undefined\n): void {\n  void appendVariation(projectId, component, createElement(component, variationId, order), order)\n  if (!firstComponentLoaded) {\n    firstComponentLoaded = true\n    window.dispatchEvent(createEvent(WEB_COMPONENT_FIRST_COMPONENT_DISPLAYED))\n  }\n  resolve && resolve()\n}\n\n/**\n * returns the given project position in nxc.projects:[]\n */\nfunction findProjectIndex(projectId: string) {\n  if (window.nwc.projects) {\n    return window.nwc.projects.findIndex((project) => project.id === projectId)\n  } else {\n    return -1\n  }\n}\n\n/**\n * Replaces a project by an other and initializes it\n */\nexport async function replace(project: Project): Promise<void> {\n  if (!window.nwc.projects || !matchCriteria(project)) {\n    return\n  }\n  const index = findProjectIndex(project.id)\n  if (index < 0) {\n    window.nwc.projects.push(project)\n  } else {\n    clearProjectFromCache(project)\n    clearProjectContainer(project)\n    window.nwc.projects[index] = project\n  }\n  await loadProject(project)\n}\n\n/**\n * Create an event compatible with IE\n * @param eventName\n */\nfunction createEvent(eventName: string) {\n  let event: Event\n  if (typeof Event === 'function') {\n    event = new Event(eventName)\n  } else {\n    event = document.createEvent('Event')\n    event.initEvent(eventName, true, true)\n  }\n  return event\n}\n\n/**\n * retro compatibility function (missing projectId)\n * this function needs to find the project, then the component\n * index (display order), then the component before calling\n * displayNewVariation with these arguments\n */\nfunction updateVariation(componentId: string, variationId: number) {\n  if (!window.nwc.projects) return\n  let component: Component | null = null\n  let componentIndex = -1\n  const project = window.nwc.projects.find((project) => {\n    componentIndex = project.components.findIndex((component) => component.uuid === componentId)\n    if (componentIndex !== -1) {\n      component = project.components[componentIndex]\n      return true\n    } else {\n      return false\n    }\n  })\n  if (!project || !component || componentIndex === -1) return\n  displayNewVariation(project.id, component, variationId, componentIndex)\n}\n\nfunction getAnchor(): string {\n  return window.location.hash.substring(1)\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"\" + \"casper\" + \".js\";\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/shared_res/agility/page-builder/assets/js/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) {\n\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n\t\t\t\t\t});\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no deferred startup\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tparentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb_components_es6_loader\"] = self[\"webpackChunkweb_components_es6_loader\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = webpackJsonpCallback;","export function addListerners(): void {\n  window.nwc = window.nwc || {}\n  if (window.nwc.hasListeners === true) {\n    return\n  }\n  addMouseUser()\n\n  document.addEventListener('keydown', keyboardUser)\n  document.addEventListener('mousedown', mouseUser)\n  document.addEventListener('touchstart', touchUser, false)\n  window.nwc.hasListeners = true\n}\n\nfunction keyboardUser(e: KeyboardEvent): void {\n  if (e.key === 'Tab') {\n    document.documentElement.classList.add('keyboardUser')\n  }\n}\n\nfunction addMouseUser() {\n  document.documentElement.classList.add('mouseUser')\n}\n\nfunction mouseUser(): void {\n  document.documentElement.classList.remove('keyboardUser')\n  document.documentElement.classList.remove('touchUser')\n  addMouseUser()\n}\n\nfunction touchUser(): void {\n  document.documentElement.classList.remove('mouseUser')\n  document.documentElement.classList.remove('keyboardUser')\n  document.documentElement.classList.add('touchUser')\n}\n","import { load } from '../loader'\n\nconst BREAKPOINT_XL = 1920\nconst BREAKPOINT_L = 996\nconst BREAKPOINT_M = 768\n\nexport function bootstrap(): void {\n  window.nwc = window.nwc || {}\n  if (window.nwc.bootstrap === true) {\n    return\n  }\n  window.addEventListener('resize', callbackResizeFunction)\n\n  window.addEventListener('beforeunload', function () {\n    window.removeEventListener('resize', callbackResizeFunction)\n  })\n\n  window.nwc.breakpoint = getBreakpoint()\n  window.nwc.bootstrap = true\n}\n\nfunction debounce(func: (...rest: any[]) => void, ...rest: any[]) {\n  const timeout: number = rest.length > 1 && rest[1] !== undefined ? (rest[1] as number) : 300\n  let timer: any\n  return function () {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      func(...rest)\n    }, timeout)\n  }\n}\n\nfunction getBreakpoint() {\n  const vw = window.innerWidth\n  return vw < BREAKPOINT_M\n    ? 'mobile'\n    : vw >= BREAKPOINT_M && vw < BREAKPOINT_L\n    ? 'tablet'\n    : vw >= BREAKPOINT_L && vw < BREAKPOINT_XL\n    ? 'desktop'\n    : 'retina'\n}\n\nconst callbackResizeFunction = debounce(function () {\n  const newBreakpoint = getBreakpoint()\n  if (newBreakpoint === window.nwc.breakpoint) {\n    return\n  }\n  window.nwc.breakpoint = newBreakpoint\n  console.info('NWC Loader: breakpoint change detection, projects will be reloaded.')\n  void load(true)\n})\n"],"sourceRoot":""}